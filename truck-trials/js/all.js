function Stanislic_SendInfo(n){return!1}function Stanislic_Start(){Stanislic_SendInfo("Main_Page")}
!function(t){"use strict";var n={};"undefined"==typeof exports?"function"==typeof define&&"object"==typeof define.amd&&define.amd?(n.exports={},define(function(){return n.exports})):n.exports="undefined"!=typeof window?window:t:n.exports=exports,function(t){if(!n)var n=1e-6;if(!r)var r="undefined"!=typeof Float32Array?Float32Array:Array;if(!a)var a=Math.random;var e={setMatrixArrayType:function(t){r=t}};void 0!==t&&(t.glMatrix=e);var u=Math.PI/180;e.toRadian=function(t){return t*u};var o={create:function(){var t=new r(2);return t[0]=0,t[1]=0,t},clone:function(t){var n=new r(2);return n[0]=t[0],n[1]=t[1],n},fromValues:function(t,n){var a=new r(2);return a[0]=t,a[1]=n,a},copy:function(t,n){return t[0]=n[0],t[1]=n[1],t},set:function(t,n,r){return t[0]=n,t[1]=r,t},add:function(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t},subtract:function(t,n,r){return t[0]=n[0]-r[0],t[1]=n[1]-r[1],t}};o.sub=o.subtract,o.multiply=function(t,n,r){return t[0]=n[0]*r[0],t[1]=n[1]*r[1],t},o.mul=o.multiply,o.divide=function(t,n,r){return t[0]=n[0]/r[0],t[1]=n[1]/r[1],t},o.div=o.divide,o.min=function(t,n,r){return t[0]=Math.min(n[0],r[0]),t[1]=Math.min(n[1],r[1]),t},o.max=function(t,n,r){return t[0]=Math.max(n[0],r[0]),t[1]=Math.max(n[1],r[1]),t},o.scale=function(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t},o.scaleAndAdd=function(t,n,r,a){return t[0]=n[0]+r[0]*a,t[1]=n[1]+r[1]*a,t},o.distance=function(t,n){var r=n[0]-t[0],a=n[1]-t[1];return Math.sqrt(r*r+a*a)},o.dist=o.distance,o.squaredDistance=function(t,n){var r=n[0]-t[0],a=n[1]-t[1];return r*r+a*a},o.sqrDist=o.squaredDistance,o.length=function(t){var n=t[0],r=t[1];return Math.sqrt(n*n+r*r)},o.len=o.length,o.squaredLength=function(t){var n=t[0],r=t[1];return n*n+r*r},o.sqrLen=o.squaredLength,o.negate=function(t,n){return t[0]=-n[0],t[1]=-n[1],t},o.normalize=function(t,n){var r=n[0],a=n[1],e=r*r+a*a;return e>0&&(e=1/Math.sqrt(e),t[0]=n[0]*e,t[1]=n[1]*e),t},o.dot=function(t,n){return t[0]*n[0]+t[1]*n[1]},o.cross=function(t,n,r){var a=n[0]*r[1]-n[1]*r[0];return t[0]=t[1]=0,t[2]=a,t},o.lerp=function(t,n,r,a){var e=n[0],u=n[1];return t[0]=e+a*(r[0]-e),t[1]=u+a*(r[1]-u),t},o.random=function(t,n){n=n||1;var r=2*a()*Math.PI;return t[0]=Math.cos(r)*n,t[1]=Math.sin(r)*n,t},o.transformMat2=function(t,n,r){var a=n[0],e=n[1];return t[0]=r[0]*a+r[2]*e,t[1]=r[1]*a+r[3]*e,t},o.transformMat2d=function(t,n,r){var a=n[0],e=n[1];return t[0]=r[0]*a+r[2]*e+r[4],t[1]=r[1]*a+r[3]*e+r[5],t},o.transformMat3=function(t,n,r){var a=n[0],e=n[1];return t[0]=r[0]*a+r[3]*e+r[6],t[1]=r[1]*a+r[4]*e+r[7],t},o.transformMat4=function(t,n,r){var a=n[0],e=n[1];return t[0]=r[0]*a+r[4]*e+r[12],t[1]=r[1]*a+r[5]*e+r[13],t},o.forEach=function(){var t=o.create();return function(n,r,a,e,u,o){var i,c;for(r||(r=2),a||(a=0),c=e?Math.min(e*r+a,n.length):n.length,i=a;i<c;i+=r)t[0]=n[i],t[1]=n[i+1],u(t,t,o),n[i]=t[0],n[i+1]=t[1];return n}}(),o.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},void 0!==t&&(t.vec2=o);var i={create:function(){var t=new r(3);return t[0]=0,t[1]=0,t[2]=0,t},clone:function(t){var n=new r(3);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n},fromValues:function(t,n,a){var e=new r(3);return e[0]=t,e[1]=n,e[2]=a,e},copy:function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t},set:function(t,n,r,a){return t[0]=n,t[1]=r,t[2]=a,t},add:function(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2],t},subtract:function(t,n,r){return t[0]=n[0]-r[0],t[1]=n[1]-r[1],t[2]=n[2]-r[2],t}};i.sub=i.subtract,i.multiply=function(t,n,r){return t[0]=n[0]*r[0],t[1]=n[1]*r[1],t[2]=n[2]*r[2],t},i.mul=i.multiply,i.divide=function(t,n,r){return t[0]=n[0]/r[0],t[1]=n[1]/r[1],t[2]=n[2]/r[2],t},i.div=i.divide,i.min=function(t,n,r){return t[0]=Math.min(n[0],r[0]),t[1]=Math.min(n[1],r[1]),t[2]=Math.min(n[2],r[2]),t},i.max=function(t,n,r){return t[0]=Math.max(n[0],r[0]),t[1]=Math.max(n[1],r[1]),t[2]=Math.max(n[2],r[2]),t},i.scale=function(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t},i.scaleAndAdd=function(t,n,r,a){return t[0]=n[0]+r[0]*a,t[1]=n[1]+r[1]*a,t[2]=n[2]+r[2]*a,t},i.distance=function(t,n){var r=n[0]-t[0],a=n[1]-t[1],e=n[2]-t[2];return Math.sqrt(r*r+a*a+e*e)},i.dist=i.distance,i.squaredDistance=function(t,n){var r=n[0]-t[0],a=n[1]-t[1],e=n[2]-t[2];return r*r+a*a+e*e},i.sqrDist=i.squaredDistance,i.length=function(t){var n=t[0],r=t[1],a=t[2];return Math.sqrt(n*n+r*r+a*a)},i.len=i.length,i.squaredLength=function(t){var n=t[0],r=t[1],a=t[2];return n*n+r*r+a*a},i.sqrLen=i.squaredLength,i.negate=function(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t},i.normalize=function(t,n){var r=n[0],a=n[1],e=n[2],u=r*r+a*a+e*e;return u>0&&(u=1/Math.sqrt(u),t[0]=n[0]*u,t[1]=n[1]*u,t[2]=n[2]*u),t},i.dot=function(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]},i.cross=function(t,n,r){var a=n[0],e=n[1],u=n[2],o=r[0],i=r[1],c=r[2];return t[0]=e*c-u*i,t[1]=u*o-a*c,t[2]=a*i-e*o,t},i.lerp=function(t,n,r,a){var e=n[0],u=n[1],o=n[2];return t[0]=e+a*(r[0]-e),t[1]=u+a*(r[1]-u),t[2]=o+a*(r[2]-o),t},i.random=function(t,n){n=n||1;var r=2*a()*Math.PI,e=2*a()-1,u=Math.sqrt(1-e*e)*n;return t[0]=Math.cos(r)*u,t[1]=Math.sin(r)*u,t[2]=e*n,t},i.transformMat4=function(t,n,r){var a=n[0],e=n[1],u=n[2];return t[0]=r[0]*a+r[4]*e+r[8]*u+r[12],t[1]=r[1]*a+r[5]*e+r[9]*u+r[13],t[2]=r[2]*a+r[6]*e+r[10]*u+r[14],t},i.transformMat3=function(t,n,r){var a=n[0],e=n[1],u=n[2];return t[0]=a*r[0]+e*r[3]+u*r[6],t[1]=a*r[1]+e*r[4]+u*r[7],t[2]=a*r[2]+e*r[5]+u*r[8],t},i.transformQuat=function(t,n,r){var a=n[0],e=n[1],u=n[2],o=r[0],i=r[1],c=r[2],f=r[3],s=f*a+i*u-c*e,h=f*e+c*a-o*u,v=f*u+o*e-i*a,M=-o*a-i*e-c*u;return t[0]=s*f+M*-o+h*-c-v*-i,t[1]=h*f+M*-i+v*-o-s*-c,t[2]=v*f+M*-c+s*-i-h*-o,t},i.rotateX=function(t,n,r,a){var e=[],u=[];return e[0]=n[0]-r[0],e[1]=n[1]-r[1],e[2]=n[2]-r[2],u[0]=e[0],u[1]=e[1]*Math.cos(a)-e[2]*Math.sin(a),u[2]=e[1]*Math.sin(a)+e[2]*Math.cos(a),t[0]=u[0]+r[0],t[1]=u[1]+r[1],t[2]=u[2]+r[2],t},i.rotateY=function(t,n,r,a){var e=[],u=[];return e[0]=n[0]-r[0],e[1]=n[1]-r[1],e[2]=n[2]-r[2],u[0]=e[2]*Math.sin(a)+e[0]*Math.cos(a),u[1]=e[1],u[2]=e[2]*Math.cos(a)-e[0]*Math.sin(a),t[0]=u[0]+r[0],t[1]=u[1]+r[1],t[2]=u[2]+r[2],t},i.rotateZ=function(t,n,r,a){var e=[],u=[];return e[0]=n[0]-r[0],e[1]=n[1]-r[1],e[2]=n[2]-r[2],u[0]=e[0]*Math.cos(a)-e[1]*Math.sin(a),u[1]=e[0]*Math.sin(a)+e[1]*Math.cos(a),u[2]=e[2],t[0]=u[0]+r[0],t[1]=u[1]+r[1],t[2]=u[2]+r[2],t},i.forEach=function(){var t=i.create();return function(n,r,a,e,u,o){var i,c;for(r||(r=3),a||(a=0),c=e?Math.min(e*r+a,n.length):n.length,i=a;i<c;i+=r)t[0]=n[i],t[1]=n[i+1],t[2]=n[i+2],u(t,t,o),n[i]=t[0],n[i+1]=t[1],n[i+2]=t[2];return n}}(),i.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},void 0!==t&&(t.vec3=i);var c={create:function(){var t=new r(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},clone:function(t){var n=new r(4);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n},fromValues:function(t,n,a,e){var u=new r(4);return u[0]=t,u[1]=n,u[2]=a,u[3]=e,u},copy:function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t},set:function(t,n,r,a,e){return t[0]=n,t[1]=r,t[2]=a,t[3]=e,t},add:function(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2],t[3]=n[3]+r[3],t},subtract:function(t,n,r){return t[0]=n[0]-r[0],t[1]=n[1]-r[1],t[2]=n[2]-r[2],t[3]=n[3]-r[3],t}};c.sub=c.subtract,c.multiply=function(t,n,r){return t[0]=n[0]*r[0],t[1]=n[1]*r[1],t[2]=n[2]*r[2],t[3]=n[3]*r[3],t},c.mul=c.multiply,c.divide=function(t,n,r){return t[0]=n[0]/r[0],t[1]=n[1]/r[1],t[2]=n[2]/r[2],t[3]=n[3]/r[3],t},c.div=c.divide,c.min=function(t,n,r){return t[0]=Math.min(n[0],r[0]),t[1]=Math.min(n[1],r[1]),t[2]=Math.min(n[2],r[2]),t[3]=Math.min(n[3],r[3]),t},c.max=function(t,n,r){return t[0]=Math.max(n[0],r[0]),t[1]=Math.max(n[1],r[1]),t[2]=Math.max(n[2],r[2]),t[3]=Math.max(n[3],r[3]),t},c.scale=function(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t},c.scaleAndAdd=function(t,n,r,a){return t[0]=n[0]+r[0]*a,t[1]=n[1]+r[1]*a,t[2]=n[2]+r[2]*a,t[3]=n[3]+r[3]*a,t},c.distance=function(t,n){var r=n[0]-t[0],a=n[1]-t[1],e=n[2]-t[2],u=n[3]-t[3];return Math.sqrt(r*r+a*a+e*e+u*u)},c.dist=c.distance,c.squaredDistance=function(t,n){var r=n[0]-t[0],a=n[1]-t[1],e=n[2]-t[2],u=n[3]-t[3];return r*r+a*a+e*e+u*u},c.sqrDist=c.squaredDistance,c.length=function(t){var n=t[0],r=t[1],a=t[2],e=t[3];return Math.sqrt(n*n+r*r+a*a+e*e)},c.len=c.length,c.squaredLength=function(t){var n=t[0],r=t[1],a=t[2],e=t[3];return n*n+r*r+a*a+e*e},c.sqrLen=c.squaredLength,c.negate=function(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=-n[3],t},c.normalize=function(t,n){var r=n[0],a=n[1],e=n[2],u=n[3],o=r*r+a*a+e*e+u*u;return o>0&&(o=1/Math.sqrt(o),t[0]=n[0]*o,t[1]=n[1]*o,t[2]=n[2]*o,t[3]=n[3]*o),t},c.dot=function(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]+t[3]*n[3]},c.lerp=function(t,n,r,a){var e=n[0],u=n[1],o=n[2],i=n[3];return t[0]=e+a*(r[0]-e),t[1]=u+a*(r[1]-u),t[2]=o+a*(r[2]-o),t[3]=i+a*(r[3]-i),t},c.random=function(t,n){return n=n||1,t[0]=a(),t[1]=a(),t[2]=a(),t[3]=a(),c.normalize(t,t),c.scale(t,t,n),t},c.transformMat4=function(t,n,r){var a=n[0],e=n[1],u=n[2],o=n[3];return t[0]=r[0]*a+r[4]*e+r[8]*u+r[12]*o,t[1]=r[1]*a+r[5]*e+r[9]*u+r[13]*o,t[2]=r[2]*a+r[6]*e+r[10]*u+r[14]*o,t[3]=r[3]*a+r[7]*e+r[11]*u+r[15]*o,t},c.transformQuat=function(t,n,r){var a=n[0],e=n[1],u=n[2],o=r[0],i=r[1],c=r[2],f=r[3],s=f*a+i*u-c*e,h=f*e+c*a-o*u,v=f*u+o*e-i*a,M=-o*a-i*e-c*u;return t[0]=s*f+M*-o+h*-c-v*-i,t[1]=h*f+M*-i+v*-o-s*-c,t[2]=v*f+M*-c+s*-i-h*-o,t},c.forEach=function(){var t=c.create();return function(n,r,a,e,u,o){var i,c;for(r||(r=4),a||(a=0),c=e?Math.min(e*r+a,n.length):n.length,i=a;i<c;i+=r)t[0]=n[i],t[1]=n[i+1],t[2]=n[i+2],t[3]=n[i+3],u(t,t,o),n[i]=t[0],n[i+1]=t[1],n[i+2]=t[2],n[i+3]=t[3];return n}}(),c.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},void 0!==t&&(t.vec4=c);var f={create:function(){var t=new r(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},clone:function(t){var n=new r(4);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n},copy:function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t},identity:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},transpose:function(t,n){if(t===n){var r=n[1];t[1]=n[2],t[2]=r}else t[0]=n[0],t[1]=n[2],t[2]=n[1],t[3]=n[3];return t},invert:function(t,n){var r=n[0],a=n[1],e=n[2],u=n[3],o=r*u-e*a;return o?(o=1/o,t[0]=u*o,t[1]=-a*o,t[2]=-e*o,t[3]=r*o,t):null},adjoint:function(t,n){var r=n[0];return t[0]=n[3],t[1]=-n[1],t[2]=-n[2],t[3]=r,t},determinant:function(t){return t[0]*t[3]-t[2]*t[1]},multiply:function(t,n,r){var a=n[0],e=n[1],u=n[2],o=n[3],i=r[0],c=r[1],f=r[2],s=r[3];return t[0]=a*i+u*c,t[1]=e*i+o*c,t[2]=a*f+u*s,t[3]=e*f+o*s,t}};f.mul=f.multiply,f.rotate=function(t,n,r){var a=n[0],e=n[1],u=n[2],o=n[3],i=Math.sin(r),c=Math.cos(r);return t[0]=a*c+u*i,t[1]=e*c+o*i,t[2]=a*-i+u*c,t[3]=e*-i+o*c,t},f.scale=function(t,n,r){var a=n[0],e=n[1],u=n[2],o=n[3],i=r[0],c=r[1];return t[0]=a*i,t[1]=e*i,t[2]=u*c,t[3]=o*c,t},f.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},f.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},f.LDU=function(t,n,r,a){return t[2]=a[2]/a[0],r[0]=a[0],r[1]=a[1],r[3]=a[3]-t[2]*r[1],[t,n,r]},void 0!==t&&(t.mat2=f);var s={create:function(){var t=new r(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},clone:function(t){var n=new r(6);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n},copy:function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t},identity:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},invert:function(t,n){var r=n[0],a=n[1],e=n[2],u=n[3],o=n[4],i=n[5],c=r*u-a*e;return c?(c=1/c,t[0]=u*c,t[1]=-a*c,t[2]=-e*c,t[3]=r*c,t[4]=(e*i-u*o)*c,t[5]=(a*o-r*i)*c,t):null},determinant:function(t){return t[0]*t[3]-t[1]*t[2]},multiply:function(t,n,r){var a=n[0],e=n[1],u=n[2],o=n[3],i=n[4],c=n[5],f=r[0],s=r[1],h=r[2],v=r[3],M=r[4],l=r[5];return t[0]=a*f+u*s,t[1]=e*f+o*s,t[2]=a*h+u*v,t[3]=e*h+o*v,t[4]=a*M+u*l+i,t[5]=e*M+o*l+c,t}};s.mul=s.multiply,s.rotate=function(t,n,r){var a=n[0],e=n[1],u=n[2],o=n[3],i=n[4],c=n[5],f=Math.sin(r),s=Math.cos(r);return t[0]=a*s+u*f,t[1]=e*s+o*f,t[2]=a*-f+u*s,t[3]=e*-f+o*s,t[4]=i,t[5]=c,t},s.scale=function(t,n,r){var a=n[0],e=n[1],u=n[2],o=n[3],i=n[4],c=n[5],f=r[0],s=r[1];return t[0]=a*f,t[1]=e*f,t[2]=u*s,t[3]=o*s,t[4]=i,t[5]=c,t},s.translate=function(t,n,r){var a=n[0],e=n[1],u=n[2],o=n[3],i=n[4],c=n[5],f=r[0],s=r[1];return t[0]=a,t[1]=e,t[2]=u,t[3]=o,t[4]=a*f+u*s+i,t[5]=e*f+o*s+c,t},s.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},s.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)},void 0!==t&&(t.mat2d=s);var h={create:function(){var t=new r(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},fromMat4:function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[4],t[4]=n[5],t[5]=n[6],t[6]=n[8],t[7]=n[9],t[8]=n[10],t},clone:function(t){var n=new r(9);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n},copy:function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t},identity:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},transpose:function(t,n){if(t===n){var r=n[1],a=n[2],e=n[5];t[1]=n[3],t[2]=n[6],t[3]=r,t[5]=n[7],t[6]=a,t[7]=e}else t[0]=n[0],t[1]=n[3],t[2]=n[6],t[3]=n[1],t[4]=n[4],t[5]=n[7],t[6]=n[2],t[7]=n[5],t[8]=n[8];return t},invert:function(t,n){var r=n[0],a=n[1],e=n[2],u=n[3],o=n[4],i=n[5],c=n[6],f=n[7],s=n[8],h=s*o-i*f,v=-s*u+i*c,M=f*u-o*c,l=r*h+a*v+e*M;return l?(l=1/l,t[0]=h*l,t[1]=(-s*a+e*f)*l,t[2]=(i*a-e*o)*l,t[3]=v*l,t[4]=(s*r-e*c)*l,t[5]=(-i*r+e*u)*l,t[6]=M*l,t[7]=(-f*r+a*c)*l,t[8]=(o*r-a*u)*l,t):null},adjoint:function(t,n){var r=n[0],a=n[1],e=n[2],u=n[3],o=n[4],i=n[5],c=n[6],f=n[7],s=n[8];return t[0]=o*s-i*f,t[1]=e*f-a*s,t[2]=a*i-e*o,t[3]=i*c-u*s,t[4]=r*s-e*c,t[5]=e*u-r*i,t[6]=u*f-o*c,t[7]=a*c-r*f,t[8]=r*o-a*u,t},determinant:function(t){var n=t[0],r=t[1],a=t[2],e=t[3],u=t[4],o=t[5],i=t[6],c=t[7],f=t[8];return n*(f*u-o*c)+r*(-f*e+o*i)+a*(c*e-u*i)},multiply:function(t,n,r){var a=n[0],e=n[1],u=n[2],o=n[3],i=n[4],c=n[5],f=n[6],s=n[7],h=n[8],v=r[0],M=r[1],l=r[2],d=r[3],m=r[4],p=r[5],w=r[6],q=r[7],y=r[8];return t[0]=v*a+M*o+l*f,t[1]=v*e+M*i+l*s,t[2]=v*u+M*c+l*h,t[3]=d*a+m*o+p*f,t[4]=d*e+m*i+p*s,t[5]=d*u+m*c+p*h,t[6]=w*a+q*o+y*f,t[7]=w*e+q*i+y*s,t[8]=w*u+q*c+y*h,t}};h.mul=h.multiply,h.translate=function(t,n,r){var a=n[0],e=n[1],u=n[2],o=n[3],i=n[4],c=n[5],f=n[6],s=n[7],h=n[8],v=r[0],M=r[1];return t[0]=a,t[1]=e,t[2]=u,t[3]=o,t[4]=i,t[5]=c,t[6]=v*a+M*o+f,t[7]=v*e+M*i+s,t[8]=v*u+M*c+h,t},h.rotate=function(t,n,r){var a=n[0],e=n[1],u=n[2],o=n[3],i=n[4],c=n[5],f=n[6],s=n[7],h=n[8],v=Math.sin(r),M=Math.cos(r);return t[0]=M*a+v*o,t[1]=M*e+v*i,t[2]=M*u+v*c,t[3]=M*o-v*a,t[4]=M*i-v*e,t[5]=M*c-v*u,t[6]=f,t[7]=s,t[8]=h,t},h.scale=function(t,n,r){var a=r[0],e=r[1];return t[0]=a*n[0],t[1]=a*n[1],t[2]=a*n[2],t[3]=e*n[3],t[4]=e*n[4],t[5]=e*n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t},h.fromMat2d=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=0,t[3]=n[2],t[4]=n[3],t[5]=0,t[6]=n[4],t[7]=n[5],t[8]=1,t},h.fromQuat=function(t,n){var r=n[0],a=n[1],e=n[2],u=n[3],o=r+r,i=a+a,c=e+e,f=r*o,s=a*o,h=a*i,v=e*o,M=e*i,l=e*c,d=u*o,m=u*i,p=u*c;return t[0]=1-h-l,t[3]=s-p,t[6]=v+m,t[1]=s+p,t[4]=1-f-l,t[7]=M-d,t[2]=v-m,t[5]=M+d,t[8]=1-f-h,t},h.normalFromMat4=function(t,n){var r=n[0],a=n[1],e=n[2],u=n[3],o=n[4],i=n[5],c=n[6],f=n[7],s=n[8],h=n[9],v=n[10],M=n[11],l=n[12],d=n[13],m=n[14],p=n[15],w=r*i-a*o,q=r*c-e*o,y=r*f-u*o,g=a*c-e*i,x=a*f-u*i,b=e*f-u*c,A=s*d-h*l,L=s*m-v*l,D=s*p-M*l,z=h*m-v*d,V=h*p-M*d,j=v*p-M*m,I=w*j-q*V+y*z+g*D-x*L+b*A;return I?(I=1/I,t[0]=(i*j-c*V+f*z)*I,t[1]=(c*D-o*j-f*L)*I,t[2]=(o*V-i*D+f*A)*I,t[3]=(e*V-a*j-u*z)*I,t[4]=(r*j-e*D+u*L)*I,t[5]=(a*D-r*V-u*A)*I,t[6]=(d*b-m*x+p*g)*I,t[7]=(m*y-l*b-p*q)*I,t[8]=(l*x-d*y+p*w)*I,t):null},h.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},h.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},void 0!==t&&(t.mat3=h);var v={create:function(){var t=new r(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},clone:function(t){var n=new r(16);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n},copy:function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t},identity:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},transpose:function(t,n){if(t===n){var r=n[1],a=n[2],e=n[3],u=n[6],o=n[7],i=n[11];t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=r,t[6]=n[9],t[7]=n[13],t[8]=a,t[9]=u,t[11]=n[14],t[12]=e,t[13]=o,t[14]=i}else t[0]=n[0],t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=n[1],t[5]=n[5],t[6]=n[9],t[7]=n[13],t[8]=n[2],t[9]=n[6],t[10]=n[10],t[11]=n[14],t[12]=n[3],t[13]=n[7],t[14]=n[11],t[15]=n[15];return t},invert:function(t,n){var r=n[0],a=n[1],e=n[2],u=n[3],o=n[4],i=n[5],c=n[6],f=n[7],s=n[8],h=n[9],v=n[10],M=n[11],l=n[12],d=n[13],m=n[14],p=n[15],w=r*i-a*o,q=r*c-e*o,y=r*f-u*o,g=a*c-e*i,x=a*f-u*i,b=e*f-u*c,A=s*d-h*l,L=s*m-v*l,D=s*p-M*l,z=h*m-v*d,V=h*p-M*d,j=v*p-M*m,I=w*j-q*V+y*z+g*D-x*L+b*A;return I?(I=1/I,t[0]=(i*j-c*V+f*z)*I,t[1]=(e*V-a*j-u*z)*I,t[2]=(d*b-m*x+p*g)*I,t[3]=(v*x-h*b-M*g)*I,t[4]=(c*D-o*j-f*L)*I,t[5]=(r*j-e*D+u*L)*I,t[6]=(m*y-l*b-p*q)*I,t[7]=(s*b-v*y+M*q)*I,t[8]=(o*V-i*D+f*A)*I,t[9]=(a*D-r*V-u*A)*I,t[10]=(l*x-d*y+p*w)*I,t[11]=(h*y-s*x-M*w)*I,t[12]=(i*L-o*z-c*A)*I,t[13]=(r*z-a*L+e*A)*I,t[14]=(d*q-l*g-m*w)*I,t[15]=(s*g-h*q+v*w)*I,t):null},adjoint:function(t,n){var r=n[0],a=n[1],e=n[2],u=n[3],o=n[4],i=n[5],c=n[6],f=n[7],s=n[8],h=n[9],v=n[10],M=n[11],l=n[12],d=n[13],m=n[14],p=n[15];return t[0]=i*(v*p-M*m)-h*(c*p-f*m)+d*(c*M-f*v),t[1]=-(a*(v*p-M*m)-h*(e*p-u*m)+d*(e*M-u*v)),t[2]=a*(c*p-f*m)-i*(e*p-u*m)+d*(e*f-u*c),t[3]=-(a*(c*M-f*v)-i*(e*M-u*v)+h*(e*f-u*c)),t[4]=-(o*(v*p-M*m)-s*(c*p-f*m)+l*(c*M-f*v)),t[5]=r*(v*p-M*m)-s*(e*p-u*m)+l*(e*M-u*v),t[6]=-(r*(c*p-f*m)-o*(e*p-u*m)+l*(e*f-u*c)),t[7]=r*(c*M-f*v)-o*(e*M-u*v)+s*(e*f-u*c),t[8]=o*(h*p-M*d)-s*(i*p-f*d)+l*(i*M-f*h),t[9]=-(r*(h*p-M*d)-s*(a*p-u*d)+l*(a*M-u*h)),t[10]=r*(i*p-f*d)-o*(a*p-u*d)+l*(a*f-u*i),t[11]=-(r*(i*M-f*h)-o*(a*M-u*h)+s*(a*f-u*i)),t[12]=-(o*(h*m-v*d)-s*(i*m-c*d)+l*(i*v-c*h)),t[13]=r*(h*m-v*d)-s*(a*m-e*d)+l*(a*v-e*h),t[14]=-(r*(i*m-c*d)-o*(a*m-e*d)+l*(a*c-e*i)),t[15]=r*(i*v-c*h)-o*(a*v-e*h)+s*(a*c-e*i),t},determinant:function(t){var n=t[0],r=t[1],a=t[2],e=t[3],u=t[4],o=t[5],i=t[6],c=t[7],f=t[8],s=t[9],h=t[10],v=t[11],M=t[12],l=t[13],d=t[14],m=t[15];return(n*o-r*u)*(h*m-v*d)-(n*i-a*u)*(s*m-v*l)+(n*c-e*u)*(s*d-h*l)+(r*i-a*o)*(f*m-v*M)-(r*c-e*o)*(f*d-h*M)+(a*c-e*i)*(f*l-s*M)},multiply:function(t,n,r){var a=n[0],e=n[1],u=n[2],o=n[3],i=n[4],c=n[5],f=n[6],s=n[7],h=n[8],v=n[9],M=n[10],l=n[11],d=n[12],m=n[13],p=n[14],w=n[15],q=r[0],y=r[1],g=r[2],x=r[3];return t[0]=q*a+y*i+g*h+x*d,t[1]=q*e+y*c+g*v+x*m,t[2]=q*u+y*f+g*M+x*p,t[3]=q*o+y*s+g*l+x*w,q=r[4],y=r[5],g=r[6],x=r[7],t[4]=q*a+y*i+g*h+x*d,t[5]=q*e+y*c+g*v+x*m,t[6]=q*u+y*f+g*M+x*p,t[7]=q*o+y*s+g*l+x*w,q=r[8],y=r[9],g=r[10],x=r[11],t[8]=q*a+y*i+g*h+x*d,t[9]=q*e+y*c+g*v+x*m,t[10]=q*u+y*f+g*M+x*p,t[11]=q*o+y*s+g*l+x*w,q=r[12],y=r[13],g=r[14],x=r[15],t[12]=q*a+y*i+g*h+x*d,t[13]=q*e+y*c+g*v+x*m,t[14]=q*u+y*f+g*M+x*p,t[15]=q*o+y*s+g*l+x*w,t}};v.mul=v.multiply,v.translate=function(t,n,r){var a,e,u,o,i,c,f,s,h,v,M,l,d=r[0],m=r[1],p=r[2];return n===t?(t[12]=n[0]*d+n[4]*m+n[8]*p+n[12],t[13]=n[1]*d+n[5]*m+n[9]*p+n[13],t[14]=n[2]*d+n[6]*m+n[10]*p+n[14],t[15]=n[3]*d+n[7]*m+n[11]*p+n[15]):(a=n[0],e=n[1],u=n[2],o=n[3],i=n[4],c=n[5],f=n[6],s=n[7],h=n[8],v=n[9],M=n[10],l=n[11],t[0]=a,t[1]=e,t[2]=u,t[3]=o,t[4]=i,t[5]=c,t[6]=f,t[7]=s,t[8]=h,t[9]=v,t[10]=M,t[11]=l,t[12]=a*d+i*m+h*p+n[12],t[13]=e*d+c*m+v*p+n[13],t[14]=u*d+f*m+M*p+n[14],t[15]=o*d+s*m+l*p+n[15]),t},v.scale=function(t,n,r){var a=r[0],e=r[1],u=r[2];return t[0]=n[0]*a,t[1]=n[1]*a,t[2]=n[2]*a,t[3]=n[3]*a,t[4]=n[4]*e,t[5]=n[5]*e,t[6]=n[6]*e,t[7]=n[7]*e,t[8]=n[8]*u,t[9]=n[9]*u,t[10]=n[10]*u,t[11]=n[11]*u,t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t},v.rotate=function(t,r,a,e){var u,o,i,c,f,s,h,v,M,l,d,m,p,w,q,y,g,x,b,A,L,D,z,V,j=e[0],I=e[1],P=e[2],Q=Math.sqrt(j*j+I*I+P*P);return Math.abs(Q)<n?null:(j*=Q=1/Q,I*=Q,P*=Q,u=Math.sin(a),i=1-(o=Math.cos(a)),c=r[0],f=r[1],s=r[2],h=r[3],v=r[4],M=r[5],l=r[6],d=r[7],m=r[8],p=r[9],w=r[10],q=r[11],y=j*j*i+o,g=I*j*i+P*u,x=P*j*i-I*u,b=j*I*i-P*u,A=I*I*i+o,L=P*I*i+j*u,D=j*P*i+I*u,z=I*P*i-j*u,V=P*P*i+o,t[0]=c*y+v*g+m*x,t[1]=f*y+M*g+p*x,t[2]=s*y+l*g+w*x,t[3]=h*y+d*g+q*x,t[4]=c*b+v*A+m*L,t[5]=f*b+M*A+p*L,t[6]=s*b+l*A+w*L,t[7]=h*b+d*A+q*L,t[8]=c*D+v*z+m*V,t[9]=f*D+M*z+p*V,t[10]=s*D+l*z+w*V,t[11]=h*D+d*z+q*V,r!==t&&(t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15]),t)},v.rotateX=function(t,n,r){var a=Math.sin(r),e=Math.cos(r),u=n[4],o=n[5],i=n[6],c=n[7],f=n[8],s=n[9],h=n[10],v=n[11];return n!==t&&(t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[4]=u*e+f*a,t[5]=o*e+s*a,t[6]=i*e+h*a,t[7]=c*e+v*a,t[8]=f*e-u*a,t[9]=s*e-o*a,t[10]=h*e-i*a,t[11]=v*e-c*a,t},v.rotateY=function(t,n,r){var a=Math.sin(r),e=Math.cos(r),u=n[0],o=n[1],i=n[2],c=n[3],f=n[8],s=n[9],h=n[10],v=n[11];return n!==t&&(t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[0]=u*e-f*a,t[1]=o*e-s*a,t[2]=i*e-h*a,t[3]=c*e-v*a,t[8]=u*a+f*e,t[9]=o*a+s*e,t[10]=i*a+h*e,t[11]=c*a+v*e,t},v.rotateZ=function(t,n,r){var a=Math.sin(r),e=Math.cos(r),u=n[0],o=n[1],i=n[2],c=n[3],f=n[4],s=n[5],h=n[6],v=n[7];return n!==t&&(t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[0]=u*e+f*a,t[1]=o*e+s*a,t[2]=i*e+h*a,t[3]=c*e+v*a,t[4]=f*e-u*a,t[5]=s*e-o*a,t[6]=h*e-i*a,t[7]=v*e-c*a,t},v.fromRotationTranslation=function(t,n,r){var a=n[0],e=n[1],u=n[2],o=n[3],i=a+a,c=e+e,f=u+u,s=a*i,h=a*c,v=a*f,M=e*c,l=e*f,d=u*f,m=o*i,p=o*c,w=o*f;return t[0]=1-(M+d),t[1]=h+w,t[2]=v-p,t[3]=0,t[4]=h-w,t[5]=1-(s+d),t[6]=l+m,t[7]=0,t[8]=v+p,t[9]=l-m,t[10]=1-(s+M),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t},v.fromQuat=function(t,n){var r=n[0],a=n[1],e=n[2],u=n[3],o=r+r,i=a+a,c=e+e,f=r*o,s=a*o,h=a*i,v=e*o,M=e*i,l=e*c,d=u*o,m=u*i,p=u*c;return t[0]=1-h-l,t[1]=s+p,t[2]=v-m,t[3]=0,t[4]=s-p,t[5]=1-f-l,t[6]=M+d,t[7]=0,t[8]=v+m,t[9]=M-d,t[10]=1-f-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},v.frustum=function(t,n,r,a,e,u,o){var i=1/(r-n),c=1/(e-a),f=1/(u-o);return t[0]=2*u*i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*u*c,t[6]=0,t[7]=0,t[8]=(r+n)*i,t[9]=(e+a)*c,t[10]=(o+u)*f,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*u*2*f,t[15]=0,t},v.perspective=function(t,n,r,a,e){var u=1/Math.tan(n/2),o=1/(a-e);return t[0]=u/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(e+a)*o,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*e*a*o,t[15]=0,t},v.ortho=function(t,n,r,a,e,u,o){var i=1/(n-r),c=1/(a-e),f=1/(u-o);return t[0]=-2*i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*f,t[11]=0,t[12]=(n+r)*i,t[13]=(e+a)*c,t[14]=(o+u)*f,t[15]=1,t},v.lookAt=function(t,r,a,e){var u,o,i,c,f,s,h,M,l,d,m=r[0],p=r[1],w=r[2],q=e[0],y=e[1],g=e[2],x=a[0],b=a[1],A=a[2];return Math.abs(m-x)<n&&Math.abs(p-b)<n&&Math.abs(w-A)<n?v.identity(t):(h=m-x,M=p-b,l=w-A,u=y*(l*=d=1/Math.sqrt(h*h+M*M+l*l))-g*(M*=d),o=g*(h*=d)-q*l,i=q*M-y*h,(d=Math.sqrt(u*u+o*o+i*i))?(u*=d=1/d,o*=d,i*=d):(u=0,o=0,i=0),c=M*i-l*o,f=l*u-h*i,s=h*o-M*u,(d=Math.sqrt(c*c+f*f+s*s))?(c*=d=1/d,f*=d,s*=d):(c=0,f=0,s=0),t[0]=u,t[1]=c,t[2]=h,t[3]=0,t[4]=o,t[5]=f,t[6]=M,t[7]=0,t[8]=i,t[9]=s,t[10]=l,t[11]=0,t[12]=-(u*m+o*p+i*w),t[13]=-(c*m+f*p+s*w),t[14]=-(h*m+M*p+l*w),t[15]=1,t)},v.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},v.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},void 0!==t&&(t.mat4=v);var M={create:function(){var t=new r(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}};M.rotationTo=function(){var t=i.create(),n=i.fromValues(1,0,0),r=i.fromValues(0,1,0);return function(a,e,u){var o=i.dot(e,u);return o<-.999999?(i.cross(t,n,e),i.length(t)<1e-6&&i.cross(t,r,e),i.normalize(t,t),M.setAxisAngle(a,t,Math.PI),a):o>.999999?(a[0]=0,a[1]=0,a[2]=0,a[3]=1,a):(i.cross(t,e,u),a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=1+o,M.normalize(a,a))}}(),M.setAxes=function(){var t=h.create();return function(n,r,a,e){return t[0]=a[0],t[3]=a[1],t[6]=a[2],t[1]=e[0],t[4]=e[1],t[7]=e[2],t[2]=-r[0],t[5]=-r[1],t[8]=-r[2],M.normalize(n,M.fromMat3(n,t))}}(),M.clone=c.clone,M.fromValues=c.fromValues,M.copy=c.copy,M.set=c.set,M.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},M.setAxisAngle=function(t,n,r){r*=.5;var a=Math.sin(r);return t[0]=a*n[0],t[1]=a*n[1],t[2]=a*n[2],t[3]=Math.cos(r),t},M.add=c.add,M.multiply=function(t,n,r){var a=n[0],e=n[1],u=n[2],o=n[3],i=r[0],c=r[1],f=r[2],s=r[3];return t[0]=a*s+o*i+e*f-u*c,t[1]=e*s+o*c+u*i-a*f,t[2]=u*s+o*f+a*c-e*i,t[3]=o*s-a*i-e*c-u*f,t},M.mul=M.multiply,M.scale=c.scale,M.rotateX=function(t,n,r){r*=.5;var a=n[0],e=n[1],u=n[2],o=n[3],i=Math.sin(r),c=Math.cos(r);return t[0]=a*c+o*i,t[1]=e*c+u*i,t[2]=u*c-e*i,t[3]=o*c-a*i,t},M.rotateY=function(t,n,r){r*=.5;var a=n[0],e=n[1],u=n[2],o=n[3],i=Math.sin(r),c=Math.cos(r);return t[0]=a*c-u*i,t[1]=e*c+o*i,t[2]=u*c+a*i,t[3]=o*c-e*i,t},M.rotateZ=function(t,n,r){r*=.5;var a=n[0],e=n[1],u=n[2],o=n[3],i=Math.sin(r),c=Math.cos(r);return t[0]=a*c+e*i,t[1]=e*c-a*i,t[2]=u*c+o*i,t[3]=o*c-u*i,t},M.calculateW=function(t,n){var r=n[0],a=n[1],e=n[2];return t[0]=r,t[1]=a,t[2]=e,t[3]=-Math.sqrt(Math.abs(1-r*r-a*a-e*e)),t},M.dot=c.dot,M.lerp=c.lerp,M.slerp=function(t,n,r,a){var e,u,o,i,c,f=n[0],s=n[1],h=n[2],v=n[3],M=r[0],l=r[1],d=r[2],m=r[3];return(u=f*M+s*l+h*d+v*m)<0&&(u=-u,M=-M,l=-l,d=-d,m=-m),1-u>1e-6?(e=Math.acos(u),o=Math.sin(e),i=Math.sin((1-a)*e)/o,c=Math.sin(a*e)/o):(i=1-a,c=a),t[0]=i*f+c*M,t[1]=i*s+c*l,t[2]=i*h+c*d,t[3]=i*v+c*m,t},M.invert=function(t,n){var r=n[0],a=n[1],e=n[2],u=n[3],o=r*r+a*a+e*e+u*u,i=o?1/o:0;return t[0]=-r*i,t[1]=-a*i,t[2]=-e*i,t[3]=u*i,t},M.conjugate=function(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=n[3],t},M.length=c.length,M.len=M.length,M.squaredLength=c.squaredLength,M.sqrLen=M.squaredLength,M.normalize=c.normalize,M.fromMat3=function(t,n){var r,a=n[0]+n[4]+n[8];if(a>0)r=Math.sqrt(a+1),t[3]=.5*r,r=.5/r,t[0]=(n[7]-n[5])*r,t[1]=(n[2]-n[6])*r,t[2]=(n[3]-n[1])*r;else{var e=0;n[4]>n[0]&&(e=1),n[8]>n[3*e+e]&&(e=2);var u=(e+1)%3,o=(e+2)%3;r=Math.sqrt(n[3*e+e]-n[3*u+u]-n[3*o+o]+1),t[e]=.5*r,r=.5/r,t[3]=(n[3*o+u]-n[3*u+o])*r,t[u]=(n[3*u+e]+n[3*e+u])*r,t[o]=(n[3*o+e]+n[3*e+o])*r}return t},M.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},void 0!==t&&(t.quat=M)}(n.exports)}(this);
WebGLUtils=function(){var e=function(e){return'<table style="background-color: #8CE; width: 100%; height: 100%;"><tr><td align="center"><div style="display: table-cell; vertical-align: middle;"><div style="">'+e+"</div></div></td></tr></table>"},t='This page requires a browser that supports WebGL.<br/><a href="http://get.webgl.org">Click here to upgrade your browser.</a>',r='It doesn\'t appear your computer can support WebGL.<br/><a href="http://get.webgl.org/troubleshooting/">Click here for more information.</a>',n=function(e,t){for(var r=["webgl","experimental-webgl","webkit-3d","moz-webgl"],n=null,i=0;i<r.length;++i){try{n=e.getContext(r[i],t)}catch(e){}if(n)break}return n};return{create3DContext:n,setupWebGL:function(i,o,a){a=a||function(n){var o=i.parentNode;if(o){var a=window.WebGLRenderingContext?r:t;n&&(a+="<br/><br/>Status: "+n),o.innerHTML=e(a)}},i.addEventListener&&i.addEventListener("webglcontextcreationerror",function(e){a(e.statusMessage)},!1);var u=n(i,o);return u||window.WebGLRenderingContext||a(""),u}}}(),window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){window.setTimeout(e,1e3/60)};
!function(t){var e;"object"==typeof exports?module.exports=t():("undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.p2=t())}(function(){return function t(e,o,i){function n(s,a){if(!o[s]){if(!e[s]){var c="function"==typeof require&&require;if(!a&&c)return c(s,!0);if(r)return r(s,!0);throw new Error("Cannot find module '"+s+"'")}var h=o[s]={exports:{}};e[s][0].call(h.exports,function(t){var o=e[s][1][t];return n(o||t)},h,h.exports,t,e,o,i)}return o[s].exports}for(var r="function"==typeof require&&require,s=0;s<i.length;s++)n(i[s]);return n}({1:[function(t,e,o){function i(){}var n=t("./Scalar");e.exports=i,i.lineInt=function(t,e,o){o=o||0;var i,r,s,a,c,h,l,p=[0,0];return i=t[1][1]-t[0][1],r=t[0][0]-t[1][0],s=i*t[0][0]+r*t[0][1],a=e[1][1]-e[0][1],c=e[0][0]-e[1][0],h=a*e[0][0]+c*e[0][1],l=i*c-a*r,n.eq(l,0,o)||(p[0]=(c*s-r*h)/l,p[1]=(i*h-a*s)/l),p},i.segmentsIntersect=function(t,e,o,i){var n=e[0]-t[0],r=e[1]-t[1],s=i[0]-o[0],a=i[1]-o[1];if(s*r-a*n==0)return!1;var c=(n*(o[1]-t[1])+r*(t[0]-o[0]))/(s*r-a*n),h=(s*(t[1]-o[1])+a*(o[0]-t[0]))/(a*n-s*r);return c>=0&&1>=c&&h>=0&&1>=h}},{"./Scalar":4}],2:[function(t,e,o){function i(){}e.exports=i,i.area=function(t,e,o){return(e[0]-t[0])*(o[1]-t[1])-(o[0]-t[0])*(e[1]-t[1])},i.left=function(t,e,o){return i.area(t,e,o)>0},i.leftOn=function(t,e,o){return i.area(t,e,o)>=0},i.right=function(t,e,o){return i.area(t,e,o)<0},i.rightOn=function(t,e,o){return i.area(t,e,o)<=0};var n=[],r=[];i.collinear=function(t,e,o,s){if(s){var a=n,c=r;a[0]=e[0]-t[0],a[1]=e[1]-t[1],c[0]=o[0]-e[0],c[1]=o[1]-e[1];var h=a[0]*c[0]+a[1]*c[1],l=Math.sqrt(a[0]*a[0]+a[1]*a[1]),p=Math.sqrt(c[0]*c[0]+c[1]*c[1]);return s>Math.acos(h/(l*p))}return 0==i.area(t,e,o)},i.sqdist=function(t,e){var o=e[0]-t[0],i=e[1]-t[1];return o*o+i*i}},{}],3:[function(t,e,o){function i(){this.vertices=[]}function n(t,e,o,i,n){n=n||0;var r=e[1]-t[1],s=t[0]-e[0],c=r*t[0]+s*t[1],h=i[1]-o[1],l=o[0]-i[0],p=h*o[0]+l*o[1],u=r*l-h*s;return a.eq(u,0,n)?[0,0]:[(l*c-s*p)/u,(r*p-h*c)/u]}var r=t("./Line"),s=t("./Point"),a=t("./Scalar");e.exports=i,i.prototype.at=function(t){var e=this.vertices,o=e.length;return e[0>t?t%o+o:t%o]},i.prototype.first=function(){return this.vertices[0]},i.prototype.last=function(){return this.vertices[this.vertices.length-1]},i.prototype.clear=function(){this.vertices.length=0},i.prototype.append=function(t,e,o){if(void 0===e)throw new Error("From is not given!");if(void 0===o)throw new Error("To is not given!");if(e>o-1)throw new Error("lol1");if(o>t.vertices.length)throw new Error("lol2");if(0>e)throw new Error("lol3");for(var i=e;o>i;i++)this.vertices.push(t.vertices[i])},i.prototype.makeCCW=function(){for(var t=0,e=this.vertices,o=1;o<this.vertices.length;++o)(e[o][1]<e[t][1]||e[o][1]==e[t][1]&&e[o][0]>e[t][0])&&(t=o);s.left(this.at(t-1),this.at(t),this.at(t+1))||this.reverse()},i.prototype.reverse=function(){for(var t=[],e=0,o=this.vertices.length;e!==o;e++)t.push(this.vertices.pop());this.vertices=t},i.prototype.isReflex=function(t){return s.right(this.at(t-1),this.at(t),this.at(t+1))};var c=[],h=[];i.prototype.canSee=function(t,e){var o,i,n=c,a=h;if(s.leftOn(this.at(t+1),this.at(t),this.at(e))&&s.rightOn(this.at(t-1),this.at(t),this.at(e)))return!1;i=s.sqdist(this.at(t),this.at(e));for(var l=0;l!==this.vertices.length;++l)if((l+1)%this.vertices.length!==t&&l!==t&&s.leftOn(this.at(t),this.at(e),this.at(l+1))&&s.rightOn(this.at(t),this.at(e),this.at(l))&&(n[0]=this.at(t),n[1]=this.at(e),a[0]=this.at(l),a[1]=this.at(l+1),o=r.lineInt(n,a),s.sqdist(this.at(t),o)<i))return!1;return!0},i.prototype.copy=function(t,e,o){var n=o||new i;if(n.clear(),e>t)for(var r=t;e>=r;r++)n.vertices.push(this.vertices[r]);else{for(r=0;e>=r;r++)n.vertices.push(this.vertices[r]);for(r=t;r<this.vertices.length;r++)n.vertices.push(this.vertices[r])}return n},i.prototype.getCutEdges=function(){for(var t=[],e=[],o=[],n=new i,r=Number.MAX_VALUE,s=0;s<this.vertices.length;++s)if(this.isReflex(s))for(var a=0;a<this.vertices.length;++a)if(this.canSee(s,a)){e=this.copy(s,a,n).getCutEdges(),o=this.copy(a,s,n).getCutEdges();for(var c=0;c<o.length;c++)e.push(o[c]);e.length<r&&(t=e,r=e.length,t.push([this.at(s),this.at(a)]))}return t},i.prototype.decomp=function(){var t=this.getCutEdges();return t.length>0?this.slice(t):[this]},i.prototype.slice=function(t){if(0==t.length)return[this];if(t instanceof Array&&t.length&&t[0]instanceof Array&&2==t[0].length&&t[0][0]instanceof Array){for(var e=[this],o=0;o<t.length;o++)for(var i=t[o],n=0;n<e.length;n++){var r=e[n].slice(i);if(r){e.splice(n,1),e.push(r[0],r[1]);break}}return e}i=t,o=this.vertices.indexOf(i[0]),n=this.vertices.indexOf(i[1]);return-1!=o&&-1!=n&&[this.copy(o,n),this.copy(n,o)]},i.prototype.isSimple=function(){for(var t=this.vertices,e=0;e<t.length-1;e++)for(var o=0;e-1>o;o++)if(r.segmentsIntersect(t[e],t[e+1],t[o],t[o+1]))return!1;for(e=1;e<t.length-2;e++)if(r.segmentsIntersect(t[0],t[t.length-1],t[e],t[e+1]))return!1;return!0},i.prototype.quickDecomp=function(t,e,o,r,a,c){a=a||100,c=c||0,r=r||25,t=void 0!==t?t:[],e=e||[],o=o||[];var h=[0,0],l=[0,0],p=[0,0],u=0,d=0,f=0,v=0,y=0,m=0,g=0,A=new i,b=new i,E=this,B=this.vertices;if(B.length<3)return t;if(++c>a)return console.warn("quickDecomp: max level ("+a+") reached."),t;for(var q=0;q<this.vertices.length;++q)if(E.isReflex(q)){e.push(E.vertices[q]),u=d=Number.MAX_VALUE;for(var P=0;P<this.vertices.length;++P)s.left(E.at(q-1),E.at(q),E.at(P))&&s.rightOn(E.at(q-1),E.at(q),E.at(P-1))&&(p=n(E.at(q-1),E.at(q),E.at(P),E.at(P-1)),s.right(E.at(q+1),E.at(q),p)&&(d>(f=s.sqdist(E.vertices[q],p))&&(d=f,l=p,m=P))),s.left(E.at(q+1),E.at(q),E.at(P+1))&&s.rightOn(E.at(q+1),E.at(q),E.at(P))&&(p=n(E.at(q+1),E.at(q),E.at(P),E.at(P+1)),s.left(E.at(q-1),E.at(q),p)&&(u>(f=s.sqdist(E.vertices[q],p))&&(u=f,h=p,y=P)));if(m==(y+1)%this.vertices.length)p[0]=(l[0]+h[0])/2,p[1]=(l[1]+h[1])/2,o.push(p),y>q?(A.append(E,q,y+1),A.vertices.push(p),b.vertices.push(p),0!=m&&b.append(E,m,E.vertices.length),b.append(E,0,q+1)):(0!=q&&A.append(E,q,E.vertices.length),A.append(E,0,y+1),A.vertices.push(p),b.vertices.push(p),b.append(E,m,q+1));else{if(m>y&&(y+=this.vertices.length),v=Number.MAX_VALUE,m>y)return t;for(P=m;y>=P;++P)s.leftOn(E.at(q-1),E.at(q),E.at(P))&&s.rightOn(E.at(q+1),E.at(q),E.at(P))&&(v>(f=s.sqdist(E.at(q),E.at(P)))&&(v=f,g=P%this.vertices.length));g>q?(A.append(E,q,g+1),0!=g&&b.append(E,g,B.length),b.append(E,0,q+1)):(0!=q&&A.append(E,q,B.length),A.append(E,0,g+1),b.append(E,g,q+1))}return A.vertices.length<b.vertices.length?(A.quickDecomp(t,e,o,r,a,c),b.quickDecomp(t,e,o,r,a,c)):(b.quickDecomp(t,e,o,r,a,c),A.quickDecomp(t,e,o,r,a,c)),t}return t.push(this),t},i.prototype.removeCollinearPoints=function(t){for(var e=0,o=this.vertices.length-1;this.vertices.length>3&&o>=0;--o)s.collinear(this.at(o-1),this.at(o),this.at(o+1),t)&&(this.vertices.splice(o%this.vertices.length,1),o--,e++);return e}},{"./Line":1,"./Point":2,"./Scalar":4}],4:[function(t,e,o){function i(){}e.exports=i,i.eq=function(t,e,o){return o=o||0,Math.abs(t-e)<o}},{}],5:[function(t,e,o){e.exports={Polygon:t("./Polygon"),Point:t("./Point")}},{"./Point":2,"./Polygon":3}],6:[function(t,e,o){e.exports={name:"p2",version:"0.7.1",description:"A JavaScript 2D physics engine.",author:"Stefan Hedman <schteppe@gmail.com> (http://steffe.se)",keywords:["p2.js","p2","physics","engine","2d"],main:"./src/p2.js",engines:{node:"*"},repository:{type:"git",url:"https://github.com/schteppe/p2.js.git"},bugs:{url:"https://github.com/schteppe/p2.js/issues"},licenses:[{type:"MIT"}],devDependencies:{grunt:"^0.4.5","grunt-contrib-jshint":"^0.11.2","grunt-contrib-nodeunit":"^0.4.1","grunt-contrib-uglify":"~0.4.0","grunt-contrib-watch":"~0.5.0","grunt-browserify":"~2.0.1","grunt-contrib-concat":"^0.4.0"},dependencies:{"poly-decomp":"0.1.1"}}},{}],7:[function(t,e,o){function i(t){this.lowerBound=n.create(),t&&t.lowerBound&&n.copy(this.lowerBound,t.lowerBound),this.upperBound=n.create(),t&&t.upperBound&&n.copy(this.upperBound,t.upperBound)}var n=t("../math/vec2");t("../utils/Utils"),e.exports=i;var r=n.create();i.prototype.setFromPoints=function(t,e,o,i){var s=this.lowerBound,a=this.upperBound;"number"!=typeof o&&(o=0),0!==o?n.rotate(s,t[0],o):n.copy(s,t[0]),n.copy(a,s);for(var c=Math.cos(o),h=Math.sin(o),l=1;l<t.length;l++){var p=t[l];if(0!==o){var u=p[0],d=p[1];r[0]=c*u-h*d,r[1]=h*u+c*d,p=r}for(var f=0;2>f;f++)p[f]>a[f]&&(a[f]=p[f]),p[f]<s[f]&&(s[f]=p[f])}e&&(n.add(this.lowerBound,this.lowerBound,e),n.add(this.upperBound,this.upperBound,e)),i&&(this.lowerBound[0]-=i,this.lowerBound[1]-=i,this.upperBound[0]+=i,this.upperBound[1]+=i)},i.prototype.copy=function(t){n.copy(this.lowerBound,t.lowerBound),n.copy(this.upperBound,t.upperBound)},i.prototype.extend=function(t){for(var e=2;e--;){var o=t.lowerBound[e];this.lowerBound[e]>o&&(this.lowerBound[e]=o);var i=t.upperBound[e];this.upperBound[e]<i&&(this.upperBound[e]=i)}},i.prototype.overlaps=function(t){var e=this.lowerBound,o=this.upperBound,i=t.lowerBound,n=t.upperBound;return(i[0]<=o[0]&&o[0]<=n[0]||e[0]<=n[0]&&n[0]<=o[0])&&(i[1]<=o[1]&&o[1]<=n[1]||e[1]<=n[1]&&n[1]<=o[1])},i.prototype.containsPoint=function(t){var e=this.lowerBound,o=this.upperBound;return e[0]<=t[0]&&t[0]<=o[0]&&e[1]<=t[1]&&t[1]<=o[1]},i.prototype.overlapsRay=function(t){var e=1/t.direction[0],o=1/t.direction[1],i=(this.lowerBound[0]-t.from[0])*e,n=(this.upperBound[0]-t.from[0])*e,r=(this.lowerBound[1]-t.from[1])*o,s=(this.upperBound[1]-t.from[1])*o,a=Math.max(Math.max(Math.min(i,n),Math.min(r,s))),c=Math.min(Math.min(Math.max(i,n),Math.max(r,s)));return 0>c?-1:a>c?-1:a}},{"../math/vec2":30,"../utils/Utils":57}],8:[function(t,e,o){function i(t){this.type=t,this.result=[],this.world=null,this.boundingVolumeType=i.AABB}var n=t("../math/vec2"),r=t("../objects/Body");e.exports=i,i.AABB=1,i.BOUNDING_CIRCLE=2,i.prototype.setWorld=function(t){this.world=t},i.prototype.getCollisionPairs=function(t){};var s=n.create();i.boundingRadiusCheck=function(t,e){n.sub(s,t.position,e.position);var o=n.squaredLength(s),i=t.boundingRadius+e.boundingRadius;return i*i>=o},i.aabbCheck=function(t,e){return t.getAABB().overlaps(e.getAABB())},i.prototype.boundingVolumeCheck=function(t,e){var o;switch(this.boundingVolumeType){case i.BOUNDING_CIRCLE:o=i.boundingRadiusCheck(t,e);break;case i.AABB:o=i.aabbCheck(t,e);break;default:throw new Error("Bounding volume type not recognized: "+this.boundingVolumeType)}return o},i.canCollide=function(t,e){var o=r.KINEMATIC,i=r.STATIC;return(t.type!==i||e.type!==i)&&(!(t.type===o&&e.type===i||t.type===i&&e.type===o)&&((t.type!==o||e.type!==o)&&((t.sleepState!==r.SLEEPING||e.sleepState!==r.SLEEPING)&&!(t.sleepState===r.SLEEPING&&e.type===i||e.sleepState===r.SLEEPING&&t.type===i))))},i.NAIVE=1,i.SAP=2},{"../math/vec2":30,"../objects/Body":31}],9:[function(t,e,o){function i(){n.call(this,n.NAIVE)}var n=(t("../shapes/Circle"),t("../shapes/Plane"),t("../shapes/Shape"),t("../shapes/Particle"),t("../collision/Broadphase"));t("../math/vec2"),e.exports=i,i.prototype=new n,i.prototype.constructor=i,i.prototype.getCollisionPairs=function(t){var e=t.bodies,o=this.result;o.length=0;for(var i=0,r=e.length;i!==r;i++)for(var s=e[i],a=0;i>a;a++){var c=e[a];n.canCollide(s,c)&&this.boundingVolumeCheck(s,c)&&o.push(s,c)}return o},i.prototype.aabbQuery=function(t,e,o){o=o||[];for(var i=t.bodies,n=0;n<i.length;n++){var r=i[n];r.aabbNeedsUpdate&&r.updateAABB(),r.aabb.overlaps(e)&&o.push(r)}return o}},{"../collision/Broadphase":8,"../math/vec2":30,"../shapes/Circle":39,"../shapes/Particle":43,"../shapes/Plane":44,"../shapes/Shape":45}],10:[function(t,e,o){function i(){this.contactEquations=[],this.frictionEquations=[],this.enableFriction=!0,this.enabledEquations=!0,this.slipForce=10,this.frictionCoefficient=.3,this.surfaceVelocity=0,this.contactEquationPool=new l({size:32}),this.frictionEquationPool=new p({size:64}),this.restitution=0,this.stiffness=d.DEFAULT_STIFFNESS,this.relaxation=d.DEFAULT_RELAXATION,this.frictionStiffness=d.DEFAULT_STIFFNESS,this.frictionRelaxation=d.DEFAULT_RELAXATION,this.enableFrictionReduction=!0,this.collidingBodiesLastStep=new u,this.contactSkinSize=.01}function n(t,e){s.set(t.vertices[0],.5*-e.length,-e.radius),s.set(t.vertices[1],.5*e.length,-e.radius),s.set(t.vertices[2],.5*e.length,e.radius),s.set(t.vertices[3],.5*-e.length,e.radius)}function r(t,e,o,i){for(var n=X,r=z,h=Y,l=K,p=t,u=e.vertices,d=null,f=0;f!==u.length+1;f++){var v=u[f%u.length],y=u[(f+1)%u.length];s.rotate(n,v,i),s.rotate(r,y,i),c(n,n,o),c(r,r,o),a(h,n,p),a(l,r,p);var m=s.crossLength(h,l);if(null===d&&(d=m),0>=m*d)return!1;d=m}return!0}var s=t("../math/vec2"),a=s.sub,c=s.add,h=s.dot,l=(t("../utils/Utils"),t("../utils/ContactEquationPool")),p=t("../utils/FrictionEquationPool"),u=t("../utils/TupleDictionary"),d=t("../equations/Equation"),f=(t("../equations/ContactEquation"),t("../equations/FrictionEquation"),t("../shapes/Circle")),v=t("../shapes/Convex"),y=t("../shapes/Shape"),m=(t("../objects/Body"),t("../shapes/Box"));e.exports=i;var g=s.fromValues(0,1),A=s.fromValues(0,0),b=s.fromValues(0,0),E=s.fromValues(0,0),B=s.fromValues(0,0),q=s.fromValues(0,0),P=s.fromValues(0,0),w=s.fromValues(0,0),S=s.fromValues(0,0),C=s.fromValues(0,0),L=s.fromValues(0,0),x=s.fromValues(0,0),F=s.fromValues(0,0),M=s.fromValues(0,0),I=s.fromValues(0,0),R=s.fromValues(0,0),V=s.fromValues(0,0),T=s.fromValues(0,0),N=s.fromValues(0,0),G=[],O=s.create(),U=s.create();i.prototype.bodiesOverlap=function(t,e){for(var o=O,i=U,n=0,r=t.shapes.length;n!==r;n++){var s=t.shapes[n];t.toWorldFrame(o,s.position);for(var a=0,c=e.shapes.length;a!==c;a++){var h=e.shapes[a];if(e.toWorldFrame(i,h.position),this[s.type|h.type](t,s,o,s.angle+t.angle,e,h,i,h.angle+e.angle,!0))return!0}}return!1},i.prototype.collidedLastStep=function(t,e){var o=0|t.id,i=0|e.id;return!!this.collidingBodiesLastStep.get(o,i)},i.prototype.reset=function(){this.collidingBodiesLastStep.reset();for(var t=this.contactEquations,e=t.length;e--;){var o=t[e],i=o.bodyA.id,n=o.bodyB.id;this.collidingBodiesLastStep.set(i,n,!0)}for(var r=this.contactEquations,s=this.frictionEquations,a=0;a<r.length;a++)this.contactEquationPool.release(r[a]);for(a=0;a<s.length;a++)this.frictionEquationPool.release(s[a]);this.contactEquations.length=this.frictionEquations.length=0},i.prototype.createContactEquation=function(t,e,o,i){var n=this.contactEquationPool.get();return n.bodyA=t,n.bodyB=e,n.shapeA=o,n.shapeB=i,n.restitution=this.restitution,n.firstImpact=!this.collidedLastStep(t,e),n.stiffness=this.stiffness,n.relaxation=this.relaxation,n.needsUpdate=!0,n.enabled=this.enabledEquations,n.offset=this.contactSkinSize,n},i.prototype.createFrictionEquation=function(t,e,o,i){var n=this.frictionEquationPool.get();return n.bodyA=t,n.bodyB=e,n.shapeA=o,n.shapeB=i,n.setSlipForce(this.slipForce),n.frictionCoefficient=this.frictionCoefficient,n.relativeVelocity=this.surfaceVelocity,n.enabled=this.enabledEquations,n.needsUpdate=!0,n.stiffness=this.frictionStiffness,n.relaxation=this.frictionRelaxation,n.contactEquations.length=0,n},i.prototype.createFrictionFromContact=function(t){var e=this.createFrictionEquation(t.bodyA,t.bodyB,t.shapeA,t.shapeB);return s.copy(e.contactPointA,t.contactPointA),s.copy(e.contactPointB,t.contactPointB),s.rotate90cw(e.t,t.normalA),e.contactEquations.push(t),e},i.prototype.createFrictionFromAverage=function(t){var e=this.contactEquations[this.contactEquations.length-1],o=this.createFrictionEquation(e.bodyA,e.bodyB,e.shapeA,e.shapeB),i=e.bodyA;e.bodyB,s.set(o.contactPointA,0,0),s.set(o.contactPointB,0,0),s.set(o.t,0,0);for(var n=0;n!==t;n++)(e=this.contactEquations[this.contactEquations.length-1-n]).bodyA===i?(s.add(o.t,o.t,e.normalA),s.add(o.contactPointA,o.contactPointA,e.contactPointA),s.add(o.contactPointB,o.contactPointB,e.contactPointB)):(s.sub(o.t,o.t,e.normalA),s.add(o.contactPointA,o.contactPointA,e.contactPointB),s.add(o.contactPointB,o.contactPointB,e.contactPointA)),o.contactEquations.push(e);var r=1/t;return s.scale(o.contactPointA,o.contactPointA,r),s.scale(o.contactPointB,o.contactPointB,r),s.normalize(o.t,o.t),s.rotate90cw(o.t,o.t),o},i.prototype[y.LINE|y.CONVEX]=i.prototype.convexLine=function(t,e,o,i,n,r,s,a,c){return!c&&0},i.prototype[y.LINE|y.BOX]=i.prototype.lineBox=function(t,e,o,i,n,r,s,a,c){return!c&&0};var k=new m({width:1,height:1}),_=s.create();i.prototype[y.CAPSULE|y.CONVEX]=i.prototype[y.CAPSULE|y.BOX]=i.prototype.convexCapsule=function(t,e,o,i,r,a,c,h,l){var p=_;s.set(p,a.length/2,0),s.rotate(p,p,h),s.add(p,p,c);var u=this.circleConvex(r,a,p,h,t,e,o,i,l,a.radius);s.set(p,-a.length/2,0),s.rotate(p,p,h),s.add(p,p,c);var d=this.circleConvex(r,a,p,h,t,e,o,i,l,a.radius);if(l&&(u||d))return!0;var f=k;return n(f,a),this.convexConvex(t,e,o,i,r,f,c,h,l)+u+d},i.prototype[y.CAPSULE|y.LINE]=i.prototype.lineCapsule=function(t,e,o,i,n,r,s,a,c){return!c&&0};var D=s.create(),W=s.create(),j=new m({width:1,height:1});i.prototype[y.CAPSULE|y.CAPSULE]=i.prototype.capsuleCapsule=function(t,e,o,i,r,a,c,h,l){for(var p=D,u=W,d=0,f=0;2>f;f++){s.set(p,(0===f?-1:1)*e.length/2,0),s.rotate(p,p,i),s.add(p,p,o);for(var v=0;2>v;v++){s.set(u,(0===v?-1:1)*a.length/2,0),s.rotate(u,u,h),s.add(u,u,c),this.enableFrictionReduction&&(A=this.enableFriction,this.enableFriction=!1);var y=this.circleCircle(t,e,p,i,r,a,u,h,l,e.radius,a.radius);if(this.enableFrictionReduction&&(this.enableFriction=A),l&&y)return!0;d+=y}}this.enableFrictionReduction&&(A=this.enableFriction,this.enableFriction=!1);var m=j;n(m,e);var g=this.convexCapsule(t,m,o,i,r,a,c,h,l);if(this.enableFrictionReduction&&(this.enableFriction=A),l&&g)return!0;if(d+=g,this.enableFrictionReduction){var A=this.enableFriction;this.enableFriction=!1}n(m,a);var b=this.convexCapsule(r,m,c,h,t,e,o,i,l);return this.enableFrictionReduction&&(this.enableFriction=A),!(!l||!b)||(d+=b,this.enableFrictionReduction&&d&&this.enableFriction&&this.frictionEquations.push(this.createFrictionFromAverage(d)),d)},i.prototype[y.LINE|y.LINE]=i.prototype.lineLine=function(t,e,o,i,n,r,s,a,c){return!c&&0},i.prototype[y.PLANE|y.LINE]=i.prototype.planeLine=function(t,e,o,i,n,r,l,p,u){var d=A,f=b,v=E,y=B,m=q,L=P,x=w,F=S,M=C,I=G,R=0;s.set(d,-r.length/2,0),s.set(f,r.length/2,0),s.rotate(v,d,p),s.rotate(y,f,p),c(v,v,l),c(y,y,l),s.copy(d,v),s.copy(f,y),a(m,f,d),s.normalize(L,m),s.rotate90cw(M,L),s.rotate(F,g,i),I[0]=d,I[1]=f;for(var V=0;V<I.length;V++){var T=I[V];a(x,T,o);var N=h(x,F);if(0>N){if(u)return!0;var O=this.createContactEquation(t,n,e,r);R++,s.copy(O.normalA,F),s.normalize(O.normalA,O.normalA),s.scale(x,F,N),a(O.contactPointA,T,x),a(O.contactPointA,O.contactPointA,t.position),a(O.contactPointB,T,l),c(O.contactPointB,O.contactPointB,l),a(O.contactPointB,O.contactPointB,n.position),this.contactEquations.push(O),this.enableFrictionReduction||this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(O))}}return!u&&(this.enableFrictionReduction||R&&this.enableFriction&&this.frictionEquations.push(this.createFrictionFromAverage(R)),R)},i.prototype[y.PARTICLE|y.CAPSULE]=i.prototype.particleCapsule=function(t,e,o,i,n,r,s,a,c){return this.circleLine(t,e,o,i,n,r,s,a,c,r.radius,0)},i.prototype[y.CIRCLE|y.LINE]=i.prototype.circleLine=function(t,e,o,i,n,r,l,p,u,d,f){d=d||0,f=void 0!==f?f:e.radius;var v=A,y=b,m=E,g=B,R=q,V=P,T=w,N=S,O=C,U=L,k=x,_=F,D=M,W=I,j=G;s.set(N,-r.length/2,0),s.set(O,r.length/2,0),s.rotate(U,N,p),s.rotate(k,O,p),c(U,U,l),c(k,k,l),s.copy(N,U),s.copy(O,k),a(V,O,N),s.normalize(T,V),s.rotate90cw(R,T),a(_,o,N);var X=h(_,R);a(g,N,l),a(D,o,l);var z=f+d;if(Math.abs(X)<z){s.scale(v,R,X),a(m,o,v),s.scale(y,R,h(R,D)),s.normalize(y,y),s.scale(y,y,d),c(m,m,y);var Y=h(T,m),K=h(T,N),H=h(T,O);if(Y>K&&H>Y){if(u)return!0;var Z=this.createContactEquation(t,n,e,r);return s.scale(Z.normalA,v,-1),s.normalize(Z.normalA,Z.normalA),s.scale(Z.contactPointA,Z.normalA,f),c(Z.contactPointA,Z.contactPointA,o),a(Z.contactPointA,Z.contactPointA,t.position),a(Z.contactPointB,m,l),c(Z.contactPointB,Z.contactPointB,l),a(Z.contactPointB,Z.contactPointB,n.position),this.contactEquations.push(Z),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(Z)),1}}j[0]=N,j[1]=O;for(var J=0;J<j.length;J++){var Q=j[J];if(a(_,Q,o),s.squaredLength(_)<Math.pow(z,2)){if(u)return!0;Z=this.createContactEquation(t,n,e,r);return s.copy(Z.normalA,_),s.normalize(Z.normalA,Z.normalA),s.scale(Z.contactPointA,Z.normalA,f),c(Z.contactPointA,Z.contactPointA,o),a(Z.contactPointA,Z.contactPointA,t.position),a(Z.contactPointB,Q,l),s.scale(W,Z.normalA,-d),c(Z.contactPointB,Z.contactPointB,W),c(Z.contactPointB,Z.contactPointB,l),a(Z.contactPointB,Z.contactPointB,n.position),this.contactEquations.push(Z),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(Z)),1}}return 0},i.prototype[y.CIRCLE|y.CAPSULE]=i.prototype.circleCapsule=function(t,e,o,i,n,r,s,a,c){return this.circleLine(t,e,o,i,n,r,s,a,c,r.radius)},i.prototype[y.CIRCLE|y.CONVEX]=i.prototype[y.CIRCLE|y.BOX]=i.prototype.circleConvex=function(t,e,o,i,n,h,l,p,u,d){d="number"==typeof d?d:e.radius;for(var f=A,v=b,y=E,m=B,g=q,P=L,w=x,S=M,C=I,F=R,T=V,N=!1,G=Number.MAX_VALUE,O=h.vertices,U=0;U!==O.length+1;U++){var k=O[U%O.length],_=O[(U+1)%O.length];if(s.rotate(f,k,p),s.rotate(v,_,p),c(f,f,l),c(v,v,l),a(y,v,f),s.normalize(m,y),s.rotate90cw(g,m),s.scale(C,g,-e.radius),c(C,C,o),r(C,h,l,p)){s.sub(F,f,C);var D=Math.abs(s.dot(F,g));G>D&&(s.copy(T,C),G=D,s.scale(S,g,D),s.add(S,S,C),N=!0)}}if(N){if(u)return!0;var W=this.createContactEquation(t,n,e,h);return s.sub(W.normalA,T,o),s.normalize(W.normalA,W.normalA),s.scale(W.contactPointA,W.normalA,d),c(W.contactPointA,W.contactPointA,o),a(W.contactPointA,W.contactPointA,t.position),a(W.contactPointB,S,l),c(W.contactPointB,W.contactPointB,l),a(W.contactPointB,W.contactPointB,n.position),this.contactEquations.push(W),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(W)),1}if(d>0)for(U=0;U<O.length;U++){var j=O[U];if(s.rotate(w,j,p),c(w,w,l),a(P,w,o),s.squaredLength(P)<Math.pow(d,2)){if(u)return!0;W=this.createContactEquation(t,n,e,h);return s.copy(W.normalA,P),s.normalize(W.normalA,W.normalA),s.scale(W.contactPointA,W.normalA,d),c(W.contactPointA,W.contactPointA,o),a(W.contactPointA,W.contactPointA,t.position),a(W.contactPointB,w,l),c(W.contactPointB,W.contactPointB,l),a(W.contactPointB,W.contactPointB,n.position),this.contactEquations.push(W),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(W)),1}}return 0};var X=s.create(),z=s.create(),Y=s.create(),K=s.create();i.prototype[y.PARTICLE|y.CONVEX]=i.prototype[y.PARTICLE|y.BOX]=i.prototype.particleConvex=function(t,e,o,i,n,l,p,u,d){var f=A,v=b,y=E,m=B,g=q,S=P,C=w,x=L,F=M,I=T,R=N,V=Number.MAX_VALUE,G=!1,O=l.vertices;if(!r(o,l,p,u))return 0;if(d)return!0;for(var U=0;U!==O.length+1;U++){var k=O[U%O.length],_=O[(U+1)%O.length];s.rotate(f,k,u),s.rotate(v,_,u),c(f,f,p),c(v,v,p),a(y,v,f),s.normalize(m,y),s.rotate90cw(g,m),a(x,o,f),h(x,g),a(S,f,p),a(C,o,p),s.sub(I,f,o);var D=Math.abs(s.dot(I,g));V>D&&(V=D,s.scale(F,g,D),s.add(F,F,o),s.copy(R,g),G=!0)}if(G){var W=this.createContactEquation(t,n,e,l);return s.scale(W.normalA,R,-1),s.normalize(W.normalA,W.normalA),s.set(W.contactPointA,0,0),c(W.contactPointA,W.contactPointA,o),a(W.contactPointA,W.contactPointA,t.position),a(W.contactPointB,F,p),c(W.contactPointB,W.contactPointB,p),a(W.contactPointB,W.contactPointB,n.position),this.contactEquations.push(W),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(W)),1}return 0},i.prototype[y.CIRCLE]=i.prototype.circleCircle=function(t,e,o,i,n,r,h,l,p,u,d){var f=A;u=u||e.radius,d=d||r.radius;a(f,o,h);var v=u+d;if(s.squaredLength(f)>Math.pow(v,2))return 0;if(p)return!0;var y=this.createContactEquation(t,n,e,r);return a(y.normalA,h,o),s.normalize(y.normalA,y.normalA),s.scale(y.contactPointA,y.normalA,u),s.scale(y.contactPointB,y.normalA,-d),c(y.contactPointA,y.contactPointA,o),a(y.contactPointA,y.contactPointA,t.position),c(y.contactPointB,y.contactPointB,h),a(y.contactPointB,y.contactPointB,n.position),this.contactEquations.push(y),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(y)),1},i.prototype[y.PLANE|y.CONVEX]=i.prototype[y.PLANE|y.BOX]=i.prototype.planeConvex=function(t,e,o,i,n,r,l,p,u){var d=A,f=b,v=E,y=0;s.rotate(f,g,i);for(var m=0;m!==r.vertices.length;m++){var B=r.vertices[m];if(s.rotate(d,B,p),c(d,d,l),a(v,d,o),h(v,f)<=0){if(u)return!0;y++;var q=this.createContactEquation(t,n,e,r);a(v,d,o),s.copy(q.normalA,f);var P=h(v,q.normalA);s.scale(v,q.normalA,P),a(q.contactPointB,d,n.position),a(q.contactPointA,d,v),a(q.contactPointA,q.contactPointA,t.position),this.contactEquations.push(q),this.enableFrictionReduction||this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(q))}}return this.enableFrictionReduction&&this.enableFriction&&y&&this.frictionEquations.push(this.createFrictionFromAverage(y)),y},i.prototype[y.PARTICLE|y.PLANE]=i.prototype.particlePlane=function(t,e,o,i,n,r,c,l,p){var u=A,d=b;l=l||0,a(u,o,c),s.rotate(d,g,l);var f=h(u,d);if(f>0)return 0;if(p)return!0;var v=this.createContactEquation(n,t,r,e);return s.copy(v.normalA,d),s.scale(u,v.normalA,f),a(v.contactPointA,o,u),a(v.contactPointA,v.contactPointA,n.position),a(v.contactPointB,o,t.position),this.contactEquations.push(v),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(v)),1},i.prototype[y.CIRCLE|y.PARTICLE]=i.prototype.circleParticle=function(t,e,o,i,n,r,h,l,p){var u=A;if(a(u,h,o),s.squaredLength(u)>Math.pow(e.radius,2))return 0;if(p)return!0;var d=this.createContactEquation(t,n,e,r);return s.copy(d.normalA,u),s.normalize(d.normalA,d.normalA),s.scale(d.contactPointA,d.normalA,e.radius),c(d.contactPointA,d.contactPointA,o),a(d.contactPointA,d.contactPointA,t.position),a(d.contactPointB,h,n.position),this.contactEquations.push(d),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(d)),1};var H=new f({radius:1}),Z=s.create(),J=s.create();s.create(),i.prototype[y.PLANE|y.CAPSULE]=i.prototype.planeCapsule=function(t,e,o,i,n,r,a,h,l){var p,u=Z,d=J,f=H;s.set(u,-r.length/2,0),s.rotate(u,u,h),c(u,u,a),s.set(d,r.length/2,0),s.rotate(d,d,h),c(d,d,a),f.radius=r.radius,this.enableFrictionReduction&&(p=this.enableFriction,this.enableFriction=!1);var v=this.circlePlane(n,f,u,0,t,e,o,i,l),y=this.circlePlane(n,f,d,0,t,e,o,i,l);if(this.enableFrictionReduction&&(this.enableFriction=p),l)return v||y;var m=v+y;return this.enableFrictionReduction&&m&&this.frictionEquations.push(this.createFrictionFromAverage(m)),m},i.prototype[y.CIRCLE|y.PLANE]=i.prototype.circlePlane=function(t,e,o,i,n,r,l,p,u){var d=t,f=e,v=o,y=n,m=l,B=p;B=B||0;var q=A,P=b,w=E;a(q,v,m),s.rotate(P,g,B);var S=h(P,q);if(S>f.radius)return 0;if(u)return!0;var C=this.createContactEquation(y,d,r,e);return s.copy(C.normalA,P),s.scale(C.contactPointB,C.normalA,-f.radius),c(C.contactPointB,C.contactPointB,v),a(C.contactPointB,C.contactPointB,d.position),s.scale(w,C.normalA,S),a(C.contactPointA,q,w),c(C.contactPointA,C.contactPointA,m),a(C.contactPointA,C.contactPointA,y.position),this.contactEquations.push(C),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(C)),1},i.prototype[y.CONVEX]=i.prototype[y.CONVEX|y.BOX]=i.prototype[y.BOX]=i.prototype.convexConvex=function(t,e,o,n,r,l,p,u,d,f){var v=A,y=b,m=E,g=B,P=q,L=w,x=S,F=C,M=0;f="number"==typeof f?f:0;if(!i.findSeparatingAxis(e,o,n,l,p,u,v))return 0;a(x,p,o),h(v,x)>0&&s.scale(v,v,-1);var I=i.getClosestEdge(e,n,v,!0),R=i.getClosestEdge(l,u,v);if(-1===I||-1===R)return 0;for(var V=0;2>V;V++){var T,N=I,G=R,O=e,U=l,k=o,_=p,D=n,W=u,j=t,X=r;if(0===V)T=N,N=G,G=T,T=O,O=U,U=T,T=k,k=_,_=T,T=D,D=W,W=T,T=j,j=X,X=T;for(var z=G;G+2>z;z++){var Y=U.vertices[(z+U.vertices.length)%U.vertices.length];s.rotate(y,Y,W),c(y,y,_);for(var K=0,H=N-1;N+2>H;H++){var Z=O.vertices[(H+O.vertices.length)%O.vertices.length],J=O.vertices[(H+1+O.vertices.length)%O.vertices.length];s.rotate(m,Z,D),s.rotate(g,J,D),c(m,m,k),c(g,g,k),a(P,g,m),s.rotate90cw(F,P),s.normalize(F,F),a(x,y,m);var Q=h(F,x);(H===N&&f>=Q||H!==N&&0>=Q)&&K++}if(K>=3){if(d)return!0;var $=this.createContactEquation(j,X,O,U);M++;Z=O.vertices[N%O.vertices.length],J=O.vertices[(N+1)%O.vertices.length];s.rotate(m,Z,D),s.rotate(g,J,D),c(m,m,k),c(g,g,k),a(P,g,m),s.rotate90cw($.normalA,P),s.normalize($.normalA,$.normalA),a(x,y,m);Q=h($.normalA,x);s.scale(L,$.normalA,Q),a($.contactPointA,y,k),a($.contactPointA,$.contactPointA,L),c($.contactPointA,$.contactPointA,k),a($.contactPointA,$.contactPointA,j.position),a($.contactPointB,y,_),c($.contactPointB,$.contactPointB,_),a($.contactPointB,$.contactPointB,X.position),this.contactEquations.push($),this.enableFrictionReduction||this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact($))}}}return this.enableFrictionReduction&&this.enableFriction&&M&&this.frictionEquations.push(this.createFrictionFromAverage(M)),M};var Q=s.fromValues(0,0);i.projectConvexOntoAxis=function(t,e,o,i,n){var r,a,c=null,l=null,p=Q;s.rotate(p,i,-o);for(var u=0;u<t.vertices.length;u++)r=t.vertices[u],a=h(r,p),(null===c||a>c)&&(c=a),(null===l||l>a)&&(l=a);if(l>c){var d=l;l=c,c=d}var f=h(e,i);s.set(n,l+f,c+f)};var $=s.fromValues(0,0),tt=s.fromValues(0,0),et=s.fromValues(0,0),ot=s.fromValues(0,0),it=s.fromValues(0,0),nt=s.fromValues(0,0);i.findSeparatingAxis=function(t,e,o,n,r,c,h){var l=null,p=!1,u=!1,d=$,f=tt,v=et,y=ot,g=it,A=nt;if(t instanceof m&&n instanceof m)for(var b=0;2!==b;b++){var E=t,B=o;1===b&&(E=n,B=c);for(var q=0;2!==q;q++){0===q?s.set(y,0,1):1===q&&s.set(y,1,0),0!==B&&s.rotate(y,y,B),i.projectConvexOntoAxis(t,e,o,y,g),i.projectConvexOntoAxis(n,r,c,y,A);var P=g,w=A;g[0]>A[0]&&(w=g,P=A,!0),p=0>=(S=w[0]-P[1]),(null===l||S>l)&&(s.copy(h,y),l=S,u=p)}}else for(b=0;2!==b;b++){E=t,B=o;1===b&&(E=n,B=c);for(q=0;q!==E.vertices.length;q++){s.rotate(f,E.vertices[q],B),s.rotate(v,E.vertices[(q+1)%E.vertices.length],B),a(d,v,f),s.rotate90cw(y,d),s.normalize(y,y),i.projectConvexOntoAxis(t,e,o,y,g),i.projectConvexOntoAxis(n,r,c,y,A);var S;P=g,w=A;g[0]>A[0]&&(w=g,P=A,!0),p=0>=(S=w[0]-P[1]),(null===l||S>l)&&(s.copy(h,y),l=S,u=p)}}return u};var rt=s.fromValues(0,0),st=s.fromValues(0,0),at=s.fromValues(0,0);i.getClosestEdge=function(t,e,o,i){var n=rt,r=st,c=at;s.rotate(n,o,-e),i&&s.scale(n,n,-1);for(var l=-1,p=t.vertices.length,u=-1,d=0;d!==p;d++){a(r,t.vertices[(d+1)%p],t.vertices[d%p]),s.rotate90cw(c,r),s.normalize(c,c);var f=h(c,n);(-1===l||f>u)&&(l=d%p,u=f)}return l};var ct=s.create(),ht=s.create(),lt=s.create(),pt=s.create(),ut=s.create(),dt=s.create(),ft=s.create();i.prototype[y.CIRCLE|y.HEIGHTFIELD]=i.prototype.circleHeightfield=function(t,e,o,i,n,r,h,l,p,u){var d=r.heights,f=(u=u||e.radius,r.elementWidth),v=ht,y=ct,m=ut,g=ft,A=dt,b=lt,E=pt,B=Math.floor((o[0]-u-h[0])/f),q=Math.ceil((o[0]+u-h[0])/f);0>B&&(B=0),q>=d.length&&(q=d.length-1);for(var P=d[B],w=d[q],S=B;q>S;S++)d[S]<w&&(w=d[S]),d[S]>P&&(P=d[S]);if(o[1]-u>P)return!p&&0;var C=!1;for(S=B;q>S;S++){s.set(b,S*f,d[S]),s.set(E,(S+1)*f,d[S+1]),s.add(b,b,h),s.add(E,E,h),s.sub(A,E,b),s.rotate(A,A,Math.PI/2),s.normalize(A,A),s.scale(y,A,-u),s.add(y,y,o),s.sub(v,y,b);var L=s.dot(v,A);if(y[0]>=b[0]&&y[0]<E[0]&&0>=L){if(p)return!0;C=!0,s.scale(v,A,-L),s.add(m,y,v),s.copy(g,A);var x=this.createContactEquation(n,t,r,e);s.copy(x.normalA,g),s.scale(x.contactPointB,x.normalA,-u),c(x.contactPointB,x.contactPointB,o),a(x.contactPointB,x.contactPointB,t.position),s.copy(x.contactPointA,m),s.sub(x.contactPointA,x.contactPointA,n.position),this.contactEquations.push(x),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(x))}}if(C=!1,u>0)for(S=B;q>=S;S++)if(s.set(b,S*f,d[S]),s.add(b,b,h),s.sub(v,o,b),s.squaredLength(v)<Math.pow(u,2)){if(p)return!0;C=!0;x=this.createContactEquation(n,t,r,e);s.copy(x.normalA,v),s.normalize(x.normalA,x.normalA),s.scale(x.contactPointB,x.normalA,-u),c(x.contactPointB,x.contactPointB,o),a(x.contactPointB,x.contactPointB,t.position),a(x.contactPointA,b,h),c(x.contactPointA,x.contactPointA,h),a(x.contactPointA,x.contactPointA,n.position),this.contactEquations.push(x),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(x))}return C?1:0};var vt=s.create(),yt=s.create(),mt=s.create(),gt=new v({vertices:[s.create(),s.create(),s.create(),s.create()]});i.prototype[y.BOX|y.HEIGHTFIELD]=i.prototype[y.CONVEX|y.HEIGHTFIELD]=i.prototype.convexHeightfield=function(t,e,o,i,n,r,a,c,h){var l=r.heights,p=r.elementWidth,u=vt,d=yt,f=mt,v=gt,y=Math.floor((t.aabb.lowerBound[0]-a[0])/p),m=Math.ceil((t.aabb.upperBound[0]-a[0])/p);0>y&&(y=0),m>=l.length&&(m=l.length-1);for(var g=l[y],A=l[m],b=y;m>b;b++)l[b]<A&&(A=l[b]),l[b]>g&&(g=l[b]);if(t.aabb.lowerBound[1]>g)return!h&&0;var E=0;for(b=y;m>b;b++){s.set(u,b*p,l[b]),s.set(d,(b+1)*p,l[b+1]),s.add(u,u,a),s.add(d,d,a);s.set(f,.5*(d[0]+u[0]),.5*(d[1]+u[1]-100)),s.sub(v.vertices[0],d,f),s.sub(v.vertices[1],u,f),s.copy(v.vertices[2],v.vertices[1]),s.copy(v.vertices[3],v.vertices[0]),v.vertices[2][1]-=100,v.vertices[3][1]-=100,E+=this.convexConvex(t,e,o,i,n,v,f,0,h)}return E}},{"../equations/ContactEquation":21,"../equations/Equation":22,"../equations/FrictionEquation":23,"../math/vec2":30,"../objects/Body":31,"../shapes/Box":37,"../shapes/Circle":39,"../shapes/Convex":40,"../shapes/Shape":45,"../utils/ContactEquationPool":48,"../utils/FrictionEquationPool":49,"../utils/TupleDictionary":56,"../utils/Utils":57}],11:[function(t,e,o){function i(t){t=t||{},this.from=t.from?r.fromValues(t.from[0],t.from[1]):r.create(),this.to=t.to?r.fromValues(t.to[0],t.to[1]):r.create(),this.checkCollisionResponse=void 0===t.checkCollisionResponse||t.checkCollisionResponse,this.skipBackfaces=!!t.skipBackfaces,this.collisionMask=void 0!==t.collisionMask?t.collisionMask:-1,this.collisionGroup=void 0!==t.collisionGroup?t.collisionGroup:-1,this.mode=void 0!==t.mode?t.mode:i.ANY,this.callback=t.callback||function(t){},this.direction=r.create(),this.length=1,this.update()}function n(t,e,o){r.sub(a,o,t);var i=r.dot(a,e);return r.scale(c,e,i),r.add(c,c,t),r.squaredDistance(o,c)}e.exports=i;var r=t("../math/vec2");t("../collision/RaycastResult"),t("../shapes/Shape"),t("../collision/AABB"),i.prototype.constructor=i,i.CLOSEST=1,i.ANY=2,i.ALL=4,i.prototype.update=function(){var t=this.direction;r.sub(t,this.to,this.from),this.length=r.length(t),r.normalize(t,t)},i.prototype.intersectBodies=function(t,e){for(var o=0,i=e.length;!t.shouldStop(this)&&i>o;o++){var n=e[o],r=n.getAABB();(r.overlapsRay(this)>=0||r.containsPoint(this.from))&&this.intersectBody(t,n)}};var s=r.create();i.prototype.intersectBody=function(t,e){var o=this.checkCollisionResponse;if(!o||e.collisionResponse)for(var i=s,n=0,a=e.shapes.length;a>n;n++){var c=e.shapes[n];if((!o||c.collisionResponse)&&0!=(this.collisionGroup&c.collisionMask)&&0!=(c.collisionGroup&this.collisionMask)){r.rotate(i,c.position,e.angle),r.add(i,i,e.position);var h=c.angle+e.angle;if(this.intersectShape(t,c,h,i,e),t.shouldStop(this))break}}},i.prototype.intersectShape=function(t,e,o,i,r){n(this.from,this.direction,i)>e.boundingRadius*e.boundingRadius||(this._currentBody=r,this._currentShape=e,e.raycast(t,this,i,o),this._currentBody=this._currentShape=null)},i.prototype.getAABB=function(t){var e=this.to,o=this.from;r.set(t.lowerBound,Math.min(e[0],o[0]),Math.min(e[1],o[1])),r.set(t.upperBound,Math.max(e[0],o[0]),Math.max(e[1],o[1]))},r.create(),i.prototype.reportIntersection=function(t,e,o,n){var s=(this.from,this.to,this._currentShape),a=this._currentBody;if(!(this.skipBackfaces&&r.dot(o,this.direction)>0))switch(this.mode){case i.ALL:t.set(o,s,a,e,n),this.callback(t);break;case i.CLOSEST:(e<t.fraction||!t.hasHit())&&t.set(o,s,a,e,n);break;case i.ANY:t.set(o,s,a,e,n)}};var a=r.create(),c=r.create()},{"../collision/AABB":7,"../collision/RaycastResult":12,"../math/vec2":30,"../shapes/Shape":45}],12:[function(t,e,o){function i(){this.normal=n.create(),this.shape=null,this.body=null,this.faceIndex=-1,this.fraction=-1,this.isStopped=!1}var n=t("../math/vec2"),r=t("../collision/Ray");e.exports=i,i.prototype.reset=function(){n.set(this.normal,0,0),this.shape=null,this.body=null,this.faceIndex=-1,this.fraction=-1,this.isStopped=!1},i.prototype.getHitDistance=function(t){return n.distance(t.from,t.to)*this.fraction},i.prototype.hasHit=function(){return-1!==this.fraction},i.prototype.getHitPoint=function(t,e){n.lerp(t,e.from,e.to,this.fraction)},i.prototype.stop=function(){this.isStopped=!0},i.prototype.shouldStop=function(t){return this.isStopped||-1!==this.fraction&&t.mode===r.ANY},i.prototype.set=function(t,e,o,i,r){n.copy(this.normal,t),this.shape=e,this.body=o,this.fraction=i,this.faceIndex=r}},{"../collision/Ray":11,"../math/vec2":30}],13:[function(t,e,o){function i(){r.call(this,r.SAP),this.axisList=[],this.axisIndex=0;var t=this;this._addBodyHandler=function(e){t.axisList.push(e.body)},this._removeBodyHandler=function(e){var o=t.axisList.indexOf(e.body);-1!==o&&t.axisList.splice(o,1)}}var n=t("../utils/Utils"),r=t("../collision/Broadphase");e.exports=i,i.prototype=new r,i.prototype.constructor=i,i.prototype.setWorld=function(t){this.axisList.length=0,n.appendArray(this.axisList,t.bodies),t.off("addBody",this._addBodyHandler).off("removeBody",this._removeBodyHandler),t.on("addBody",this._addBodyHandler).on("removeBody",this._removeBodyHandler),this.world=t},i.sortAxisList=function(t,e){e|=0;for(var o=1,i=t.length;i>o;o++){for(var n=t[o],r=o-1;r>=0&&!(t[r].aabb.lowerBound[e]<=n.aabb.lowerBound[e]);r--)t[r+1]=t[r];t[r+1]=n}return t},i.prototype.sortList=function(){var t=this.axisList,e=this.axisIndex;i.sortAxisList(t,e)},i.prototype.getCollisionPairs=function(t){var e=this.axisList,o=this.result,i=this.axisIndex;o.length=0;for(var n=e.length;n--;){var s=e[n];s.aabbNeedsUpdate&&s.updateAABB()}this.sortList();for(var a=0,c=0|e.length;a!==c;a++)for(var h=e[a],l=a+1;c>l;l++){var p=e[l];if(!(p.aabb.lowerBound[i]<=h.aabb.upperBound[i]))break;r.canCollide(h,p)&&this.boundingVolumeCheck(h,p)&&o.push(h,p)}return o},i.prototype.aabbQuery=function(t,e,o){o=o||[],this.sortList();var i=this.axisIndex,n="x";1===i&&(n="y"),2===i&&(n="z");for(var r=this.axisList,s=(e.lowerBound[n],e.upperBound[n],0);s<r.length;s++){var a=r[s];a.aabbNeedsUpdate&&a.updateAABB(),a.aabb.overlaps(e)&&o.push(a)}return o}},{"../collision/Broadphase":8,"../utils/Utils":57}],14:[function(t,e,o){function i(t,e,o,i){this.type=o,i=n.defaults(i,{collideConnected:!0,wakeUpBodies:!0}),this.equations=[],this.bodyA=t,this.bodyB=e,this.collideConnected=i.collideConnected,i.wakeUpBodies&&(t&&t.wakeUp(),e&&e.wakeUp())}e.exports=i;var n=t("../utils/Utils");i.prototype.update=function(){throw new Error("method update() not implmemented in this Constraint subclass!")},i.DISTANCE=1,i.GEAR=2,i.LOCK=3,i.PRISMATIC=4,i.REVOLUTE=5,i.prototype.setStiffness=function(t){for(var e=this.equations,o=0;o!==e.length;o++){var i=e[o];i.stiffness=t,i.needsUpdate=!0}},i.prototype.setRelaxation=function(t){for(var e=this.equations,o=0;o!==e.length;o++){var i=e[o];i.relaxation=t,i.needsUpdate=!0}}},{"../utils/Utils":57}],15:[function(t,e,o){function i(t,e,o){o=a.defaults(o,{localAnchorA:[0,0],localAnchorB:[0,0]}),n.call(this,t,e,n.DISTANCE,o),this.localAnchorA=s.fromValues(o.localAnchorA[0],o.localAnchorA[1]),this.localAnchorB=s.fromValues(o.localAnchorB[0],o.localAnchorB[1]);var i,c=this.localAnchorA,h=this.localAnchorB;if(this.distance=0,"number"==typeof o.distance)this.distance=o.distance;else{var l=s.create(),p=s.create(),u=s.create();s.rotate(l,c,t.angle),s.rotate(p,h,e.angle),s.add(u,e.position,p),s.sub(u,u,l),s.sub(u,u,t.position),this.distance=s.length(u)}i=void 0===o.maxForce?Number.MAX_VALUE:o.maxForce;var d=new r(t,e,-i,i);this.equations=[d],this.maxForce=i;u=s.create();var f=s.create(),v=s.create(),y=this;d.computeGq=function(){var t=this.bodyA,e=this.bodyB,o=t.position,i=e.position;return s.rotate(f,c,t.angle),s.rotate(v,h,e.angle),s.add(u,i,v),s.sub(u,u,f),s.sub(u,u,o),s.length(u)-y.distance},this.setMaxForce(i),this.upperLimitEnabled=!1,this.upperLimit=1,this.lowerLimitEnabled=!1,this.lowerLimit=0,this.position=0}var n=t("./Constraint"),r=t("../equations/Equation"),s=t("../math/vec2"),a=t("../utils/Utils");e.exports=i,i.prototype=new n,i.prototype.constructor=i;var c=s.create(),h=s.create(),l=s.create();i.prototype.update=function(){var t=this.equations[0],e=this.bodyA,o=this.bodyB,i=(this.distance,e.position),n=o.position,r=this.equations[0],a=t.G;s.rotate(h,this.localAnchorA,e.angle),s.rotate(l,this.localAnchorB,o.angle),s.add(c,n,l),s.sub(c,c,h),s.sub(c,c,i),this.position=s.length(c);var p=!1;if(this.upperLimitEnabled&&this.position>this.upperLimit&&(r.maxForce=0,r.minForce=-this.maxForce,this.distance=this.upperLimit,p=!0),this.lowerLimitEnabled&&this.position<this.lowerLimit&&(r.maxForce=this.maxForce,r.minForce=0,this.distance=this.lowerLimit,p=!0),!this.lowerLimitEnabled&&!this.upperLimitEnabled||p){r.enabled=!0,s.normalize(c,c);var u=s.crossLength(h,c),d=s.crossLength(l,c);a[0]=-c[0],a[1]=-c[1],a[2]=-u,a[3]=c[0],a[4]=c[1],a[5]=d}else r.enabled=!1},i.prototype.setMaxForce=function(t){var e=this.equations[0];e.minForce=-t,e.maxForce=t},i.prototype.getMaxForce=function(){return this.equations[0].maxForce}},{"../equations/Equation":22,"../math/vec2":30,"../utils/Utils":57,"./Constraint":14}],16:[function(t,e,o){function i(t,e,o){o=o||{},n.call(this,t,e,n.GEAR,o),this.ratio=void 0!==o.ratio?o.ratio:1,this.angle=void 0!==o.angle?o.angle:e.angle-this.ratio*t.angle,o.angle=this.angle,o.ratio=this.ratio,this.equations=[new r(t,e,o)],void 0!==o.maxTorque&&this.setMaxTorque(o.maxTorque)}var n=t("./Constraint"),r=(t("../equations/Equation"),t("../equations/AngleLockEquation"));t("../math/vec2"),e.exports=i,i.prototype=new n,i.prototype.constructor=i,i.prototype.update=function(){var t=this.equations[0];t.ratio!==this.ratio&&t.setRatio(this.ratio),t.angle=this.angle},i.prototype.setMaxTorque=function(t){this.equations[0].setMaxTorque(t)},i.prototype.getMaxTorque=function(t){return this.equations[0].maxForce}},{"../equations/AngleLockEquation":20,"../equations/Equation":22,"../math/vec2":30,"./Constraint":14}],17:[function(t,e,o){function i(t,e,o){o=o||{},n.call(this,t,e,n.LOCK,o);var i=void 0===o.maxForce?Number.MAX_VALUE:o.maxForce,a=(o.localAngleB,new s(t,e,-i,i)),c=new s(t,e,-i,i),h=new s(t,e,-i,i),l=r.create(),p=r.create(),u=this;a.computeGq=function(){return r.rotate(l,u.localOffsetB,t.angle),r.sub(p,e.position,t.position),r.sub(p,p,l),p[0]},c.computeGq=function(){return r.rotate(l,u.localOffsetB,t.angle),r.sub(p,e.position,t.position),r.sub(p,p,l),p[1]};var d=r.create(),f=r.create();h.computeGq=function(){return r.rotate(d,u.localOffsetB,e.angle-u.localAngleB),r.scale(d,d,-1),r.sub(p,t.position,e.position),r.add(p,p,d),r.rotate(f,d,-Math.PI/2),r.normalize(f,f),r.dot(p,f)},this.localOffsetB=r.create(),o.localOffsetB?r.copy(this.localOffsetB,o.localOffsetB):(r.sub(this.localOffsetB,e.position,t.position),r.rotate(this.localOffsetB,this.localOffsetB,-t.angle)),this.localAngleB=0,"number"==typeof o.localAngleB?this.localAngleB=o.localAngleB:this.localAngleB=e.angle-t.angle,this.equations.push(a,c,h),this.setMaxForce(i)}var n=t("./Constraint"),r=t("../math/vec2"),s=t("../equations/Equation");e.exports=i,i.prototype=new n,i.prototype.constructor=i,i.prototype.setMaxForce=function(t){for(var e=this.equations,o=0;o<this.equations.length;o++)e[o].maxForce=t,e[o].minForce=-t},i.prototype.getMaxForce=function(){return this.equations[0].maxForce};var a=r.create(),c=r.create(),h=r.create(),l=r.fromValues(1,0),p=r.fromValues(0,1);i.prototype.update=function(){var t=this.equations[0],e=this.equations[1],o=this.equations[2],i=this.bodyA,n=this.bodyB;r.rotate(a,this.localOffsetB,i.angle),r.rotate(c,this.localOffsetB,n.angle-this.localAngleB),r.scale(c,c,-1),r.rotate(h,c,Math.PI/2),r.normalize(h,h),t.G[0]=-1,t.G[1]=0,t.G[2]=-r.crossLength(a,l),t.G[3]=1,e.G[0]=0,e.G[1]=-1,e.G[2]=-r.crossLength(a,p),e.G[4]=1,o.G[0]=-h[0],o.G[1]=-h[1],o.G[3]=h[0],o.G[4]=h[1],o.G[5]=r.crossLength(c,h)}},{"../equations/Equation":22,"../math/vec2":30,"./Constraint":14}],18:[function(t,e,o){function i(t,e,o){o=o||{},n.call(this,t,e,n.PRISMATIC,o);var i=a.fromValues(0,0),h=a.fromValues(1,0),l=a.fromValues(0,0);o.localAnchorA&&a.copy(i,o.localAnchorA),o.localAxisA&&a.copy(h,o.localAxisA),o.localAnchorB&&a.copy(l,o.localAnchorB),this.localAnchorA=i,this.localAnchorB=l,this.localAxisA=h;var p=this.maxForce=void 0!==o.maxForce?o.maxForce:Number.MAX_VALUE,u=new s(t,e,-p,p),d=new a.create,f=new a.create,v=new a.create,y=new a.create;if(u.computeGq=function(){return a.dot(v,y)},u.updateJacobian=function(){var o=this.G,n=t.position,r=e.position;a.rotate(d,i,t.angle),a.rotate(f,l,e.angle),a.add(v,r,f),a.sub(v,v,n),a.sub(v,v,d),a.rotate(y,h,t.angle+Math.PI/2),o[0]=-y[0],o[1]=-y[1],o[2]=-a.crossLength(d,y)+a.crossLength(y,v),o[3]=y[0],o[4]=y[1],o[5]=a.crossLength(f,y)},this.equations.push(u),!o.disableRotationalLock){var m=new c(t,e,-p,p);this.equations.push(m)}this.position=0,this.velocity=0,this.lowerLimitEnabled=void 0!==o.lowerLimit,this.upperLimitEnabled=void 0!==o.upperLimit,this.lowerLimit=void 0!==o.lowerLimit?o.lowerLimit:0,this.upperLimit=void 0!==o.upperLimit?o.upperLimit:1,this.upperLimitEquation=new r(t,e),this.lowerLimitEquation=new r(t,e),this.upperLimitEquation.minForce=this.lowerLimitEquation.minForce=0,this.upperLimitEquation.maxForce=this.lowerLimitEquation.maxForce=p,this.motorEquation=new s(t,e),this.motorEnabled=!1,this.motorSpeed=0;var g=this,A=this.motorEquation;A.computeGW,A.computeGq=function(){return 0},A.computeGW=function(){var t=this.G,e=this.bodyA,o=this.bodyB,i=e.velocity,n=o.velocity,r=e.angularVelocity,s=o.angularVelocity;return this.gmult(t,i,r,n,s)+g.motorSpeed}}var n=t("./Constraint"),r=t("../equations/ContactEquation"),s=t("../equations/Equation"),a=t("../math/vec2"),c=t("../equations/RotationalLockEquation");e.exports=i,i.prototype=new n,i.prototype.constructor=i;var h=a.create(),l=a.create(),p=a.create(),u=a.create(),d=a.create(),f=a.create();i.prototype.update=function(){var t=this.equations,e=t[0],o=this.upperLimit,i=this.lowerLimit,n=this.upperLimitEquation,r=this.lowerLimitEquation,s=this.bodyA,c=this.bodyB,v=this.localAxisA,y=this.localAnchorA,m=this.localAnchorB;e.updateJacobian(),a.rotate(h,v,s.angle),a.rotate(u,y,s.angle),a.add(l,u,s.position),a.rotate(d,m,c.angle),a.add(p,d,c.position);var g,A=this.position=a.dot(p,h)-a.dot(l,h);if(this.motorEnabled){var b=this.motorEquation.G;b[0]=h[0],b[1]=h[1],b[2]=a.crossLength(h,d),b[3]=-h[0],b[4]=-h[1],b[5]=-a.crossLength(h,u)}this.upperLimitEnabled&&A>o?(a.scale(n.normalA,h,-1),a.sub(n.contactPointA,l,s.position),a.sub(n.contactPointB,p,c.position),a.scale(f,h,o),a.add(n.contactPointA,n.contactPointA,f),-1===t.indexOf(n)&&t.push(n)):-1!==(g=t.indexOf(n))&&t.splice(g,1);this.lowerLimitEnabled&&i>A?(a.scale(r.normalA,h,1),a.sub(r.contactPointA,l,s.position),a.sub(r.contactPointB,p,c.position),a.scale(f,h,i),a.sub(r.contactPointB,r.contactPointB,f),-1===t.indexOf(r)&&t.push(r)):-1!==(g=t.indexOf(r))&&t.splice(g,1)},i.prototype.enableMotor=function(){this.motorEnabled||(this.equations.push(this.motorEquation),this.motorEnabled=!0)},i.prototype.disableMotor=function(){if(this.motorEnabled){var t=this.equations.indexOf(this.motorEquation);this.equations.splice(t,1),this.motorEnabled=!1}},i.prototype.setLimits=function(t,e){"number"==typeof t?(this.lowerLimit=t,this.lowerLimitEnabled=!0):(this.lowerLimit=t,this.lowerLimitEnabled=!1),"number"==typeof e?(this.upperLimit=e,this.upperLimitEnabled=!0):(this.upperLimit=e,this.upperLimitEnabled=!1)}},{"../equations/ContactEquation":21,"../equations/Equation":22,"../equations/RotationalLockEquation":24,"../math/vec2":30,"./Constraint":14}],19:[function(t,e,o){function i(t,e,o){o=o||{},n.call(this,t,e,n.REVOLUTE,o);var i=this.maxForce=void 0!==o.maxForce?o.maxForce:Number.MAX_VALUE;this.pivotA=c.create(),this.pivotB=c.create(),o.worldPivot?(c.sub(this.pivotA,o.worldPivot,t.position),c.sub(this.pivotB,o.worldPivot,e.position),c.rotate(this.pivotA,this.pivotA,-t.angle),c.rotate(this.pivotB,this.pivotB,-e.angle)):(c.copy(this.pivotA,o.localPivotA),c.copy(this.pivotB,o.localPivotB));var f=this.equations=[new r(t,e,-i,i),new r(t,e,-i,i)],v=f[0],y=f[1],m=this;v.computeGq=function(){return c.rotate(h,m.pivotA,t.angle),c.rotate(l,m.pivotB,e.angle),c.add(d,e.position,l),c.sub(d,d,t.position),c.sub(d,d,h),c.dot(d,p)},y.computeGq=function(){return c.rotate(h,m.pivotA,t.angle),c.rotate(l,m.pivotB,e.angle),c.add(d,e.position,l),c.sub(d,d,t.position),c.sub(d,d,h),c.dot(d,u)},y.minForce=v.minForce=-i,y.maxForce=v.maxForce=i,this.motorEquation=new s(t,e),this.motorEnabled=!1,this.angle=0,this.lowerLimitEnabled=!1,this.upperLimitEnabled=!1,this.lowerLimit=0,this.upperLimit=0,this.upperLimitEquation=new a(t,e),this.lowerLimitEquation=new a(t,e),this.upperLimitEquation.minForce=0,this.lowerLimitEquation.maxForce=0}var n=t("./Constraint"),r=t("../equations/Equation"),s=t("../equations/RotationalVelocityEquation"),a=t("../equations/RotationalLockEquation"),c=t("../math/vec2");e.exports=i;var h=c.create(),l=c.create(),p=c.fromValues(1,0),u=c.fromValues(0,1),d=c.create();i.prototype=new n,i.prototype.constructor=i,i.prototype.setLimits=function(t,e){"number"==typeof t?(this.lowerLimit=t,this.lowerLimitEnabled=!0):(this.lowerLimit=t,this.lowerLimitEnabled=!1),"number"==typeof e?(this.upperLimit=e,this.upperLimitEnabled=!0):(this.upperLimit=e,this.upperLimitEnabled=!1)},i.prototype.update=function(){var t,e=this.bodyA,o=this.bodyB,i=this.pivotA,n=this.pivotB,r=this.equations,s=(r[0],r[1],r[0]),a=r[1],d=this.upperLimit,f=this.lowerLimit,v=this.upperLimitEquation,y=this.lowerLimitEquation,m=this.angle=o.angle-e.angle;this.upperLimitEnabled&&m>d?(v.angle=d,-1===r.indexOf(v)&&r.push(v)):-1!==(t=r.indexOf(v))&&r.splice(t,1);this.lowerLimitEnabled&&f>m?(y.angle=f,-1===r.indexOf(y)&&r.push(y)):-1!==(t=r.indexOf(y))&&r.splice(t,1);c.rotate(h,i,e.angle),c.rotate(l,n,o.angle),s.G[0]=-1,s.G[1]=0,s.G[2]=-c.crossLength(h,p),s.G[3]=1,s.G[4]=0,s.G[5]=c.crossLength(l,p),a.G[0]=0,a.G[1]=-1,a.G[2]=-c.crossLength(h,u),a.G[3]=0,a.G[4]=1,a.G[5]=c.crossLength(l,u)},i.prototype.enableMotor=function(){this.motorEnabled||(this.equations.push(this.motorEquation),this.motorEnabled=!0)},i.prototype.disableMotor=function(){if(this.motorEnabled){var t=this.equations.indexOf(this.motorEquation);this.equations.splice(t,1),this.motorEnabled=!1}},i.prototype.motorIsEnabled=function(){return!!this.motorEnabled},i.prototype.setMotorSpeed=function(t){if(this.motorEnabled){var e=this.equations.indexOf(this.motorEquation);this.equations[e].relativeVelocity=t}},i.prototype.getMotorSpeed=function(){return!!this.motorEnabled&&this.motorEquation.relativeVelocity}},{"../equations/Equation":22,"../equations/RotationalLockEquation":24,"../equations/RotationalVelocityEquation":25,"../math/vec2":30,"./Constraint":14}],20:[function(t,e,o){function i(t,e,o){o=o||{},n.call(this,t,e,-Number.MAX_VALUE,Number.MAX_VALUE),this.angle=o.angle||0,this.ratio="number"==typeof o.ratio?o.ratio:1,this.setRatio(this.ratio)}var n=t("./Equation");t("../math/vec2"),e.exports=i,i.prototype=new n,i.prototype.constructor=i,i.prototype.computeGq=function(){return this.ratio*this.bodyA.angle-this.bodyB.angle+this.angle},i.prototype.setRatio=function(t){var e=this.G;e[2]=t,e[5]=-1,this.ratio=t},i.prototype.setMaxTorque=function(t){this.maxForce=t,this.minForce=-t}},{"../math/vec2":30,"./Equation":22}],21:[function(t,e,o){function i(t,e){n.call(this,t,e,0,Number.MAX_VALUE),this.contactPointA=r.create(),this.penetrationVec=r.create(),this.contactPointB=r.create(),this.normalA=r.create(),this.restitution=0,this.firstImpact=!1,this.shapeA=null,this.shapeB=null}var n=t("./Equation"),r=t("../math/vec2");e.exports=i,i.prototype=new n,i.prototype.constructor=i,i.prototype.computeB=function(t,e,o){var i,n,s=this.bodyA,a=this.bodyB,c=this.contactPointA,h=this.contactPointB,l=s.position,p=a.position,u=this.penetrationVec,d=this.normalA,f=this.G,v=r.crossLength(c,d),y=r.crossLength(h,d);return f[0]=-d[0],f[1]=-d[1],f[2]=-v,f[3]=d[0],f[4]=d[1],f[5]=y,r.add(u,p,h),r.sub(u,u,l),r.sub(u,u,c),this.firstImpact&&0!==this.restitution?(n=0,i=1/e*(1+this.restitution)*this.computeGW()):(n=r.dot(d,u)+this.offset,i=this.computeGW()),-n*t-i*e-o*this.computeGiMf()};var s=r.create(),a=r.create(),c=r.create();i.prototype.getVelocityAlongNormal=function(){return this.bodyA.getVelocityAtPoint(s,this.contactPointA),this.bodyB.getVelocityAtPoint(a,this.contactPointB),r.subtract(c,s,a),r.dot(this.normalA,c)}},{"../math/vec2":30,"./Equation":22}],22:[function(t,e,o){function i(t,e,o,n){this.minForce=void 0===o?-Number.MAX_VALUE:o,this.maxForce=void 0===n?Number.MAX_VALUE:n,this.bodyA=t,this.bodyB=e,this.stiffness=i.DEFAULT_STIFFNESS,this.relaxation=i.DEFAULT_RELAXATION,this.G=new r.ARRAY_TYPE(6);for(var s=0;6>s;s++)this.G[s]=0;this.offset=0,this.a=0,this.b=0,this.epsilon=0,this.timeStep=1/60,this.needsUpdate=!0,this.multiplier=0,this.relativeVelocity=0,this.enabled=!0}e.exports=i;var n=t("../math/vec2"),r=t("../utils/Utils");t("../objects/Body"),i.prototype.constructor=i,i.DEFAULT_STIFFNESS=1e6,i.DEFAULT_RELAXATION=4,i.prototype.update=function(){var t=this.stiffness,e=this.relaxation,o=this.timeStep;this.a=4/(o*(1+4*e)),this.b=4*e/(1+4*e),this.epsilon=4/(o*o*t*(1+4*e)),this.needsUpdate=!1},i.prototype.gmult=function(t,e,o,i,n){return t[0]*e[0]+t[1]*e[1]+t[2]*o+t[3]*i[0]+t[4]*i[1]+t[5]*n},i.prototype.computeB=function(t,e,o){var i=this.computeGW();return-this.computeGq()*t-i*e-this.computeGiMf()*o};var s=n.create(),a=n.create();i.prototype.computeGq=function(){var t=this.G,e=this.bodyA,o=this.bodyB,i=(e.position,o.position,e.angle),n=o.angle;return this.gmult(t,s,i,a,n)+this.offset},i.prototype.computeGW=function(){var t=this.G,e=this.bodyA,o=this.bodyB,i=e.velocity,n=o.velocity,r=e.angularVelocity,s=o.angularVelocity;return this.gmult(t,i,r,n,s)+this.relativeVelocity},i.prototype.computeGWlambda=function(){var t=this.G,e=this.bodyA,o=this.bodyB,i=e.vlambda,n=o.vlambda,r=e.wlambda,s=o.wlambda;return this.gmult(t,i,r,n,s)};var c=n.create(),h=n.create();i.prototype.computeGiMf=function(){var t=this.bodyA,e=this.bodyB,o=t.force,i=t.angularForce,r=e.force,s=e.angularForce,a=t.invMassSolve,l=e.invMassSolve,p=t.invInertiaSolve,u=e.invInertiaSolve,d=this.G;return n.scale(c,o,a),n.multiply(c,t.massMultiplier,c),n.scale(h,r,l),n.multiply(h,e.massMultiplier,h),this.gmult(d,c,i*p,h,s*u)},i.prototype.computeGiMGt=function(){var t=this.bodyA,e=this.bodyB,o=t.invMassSolve,i=e.invMassSolve,n=t.invInertiaSolve,r=e.invInertiaSolve,s=this.G;return s[0]*s[0]*o*t.massMultiplier[0]+s[1]*s[1]*o*t.massMultiplier[1]+s[2]*s[2]*n+s[3]*s[3]*i*e.massMultiplier[0]+s[4]*s[4]*i*e.massMultiplier[1]+s[5]*s[5]*r};var l=n.create(),p=n.create(),u=n.create();n.create(),n.create(),n.create(),i.prototype.addToWlambda=function(t){var e=this.bodyA,o=this.bodyB,i=l,r=p,s=u,a=e.invMassSolve,c=o.invMassSolve,h=e.invInertiaSolve,d=o.invInertiaSolve,f=this.G;r[0]=f[0],r[1]=f[1],s[0]=f[3],s[1]=f[4],n.scale(i,r,a*t),n.multiply(i,i,e.massMultiplier),n.add(e.vlambda,e.vlambda,i),e.wlambda+=h*f[2]*t,n.scale(i,s,c*t),n.multiply(i,i,o.massMultiplier),n.add(o.vlambda,o.vlambda,i),o.wlambda+=d*f[5]*t},i.prototype.computeInvC=function(t){return 1/(this.computeGiMGt()+t)}},{"../math/vec2":30,"../objects/Body":31,"../utils/Utils":57}],23:[function(t,e,o){function i(t,e,o){r.call(this,t,e,-o,o),this.contactPointA=n.create(),this.contactPointB=n.create(),this.t=n.create(),this.contactEquations=[],this.shapeA=null,this.shapeB=null,this.frictionCoefficient=.3}var n=t("../math/vec2"),r=t("./Equation");t("../utils/Utils"),e.exports=i,i.prototype=new r,i.prototype.constructor=i,i.prototype.setSlipForce=function(t){this.maxForce=t,this.minForce=-t},i.prototype.getSlipForce=function(){return this.maxForce},i.prototype.computeB=function(t,e,o){var i=(this.bodyA,this.bodyB,this.contactPointA),r=this.contactPointB,s=this.t,a=this.G;return a[0]=-s[0],a[1]=-s[1],a[2]=-n.crossLength(i,s),a[3]=s[0],a[4]=s[1],a[5]=n.crossLength(r,s),-this.computeGW()*e-o*this.computeGiMf()}},{"../math/vec2":30,"../utils/Utils":57,"./Equation":22}],24:[function(t,e,o){function i(t,e,o){o=o||{},n.call(this,t,e,-Number.MAX_VALUE,Number.MAX_VALUE),this.angle=o.angle||0;var i=this.G;i[2]=1,i[5]=-1}var n=t("./Equation"),r=t("../math/vec2");e.exports=i,i.prototype=new n,i.prototype.constructor=i;var s=r.create(),a=r.create(),c=r.fromValues(1,0),h=r.fromValues(0,1);i.prototype.computeGq=function(){return r.rotate(s,c,this.bodyA.angle+this.angle),r.rotate(a,h,this.bodyB.angle),r.dot(s,a)}},{"../math/vec2":30,"./Equation":22}],25:[function(t,e,o){function i(t,e){n.call(this,t,e,-Number.MAX_VALUE,Number.MAX_VALUE),this.relativeVelocity=1,this.ratio=1}var n=t("./Equation");t("../math/vec2"),e.exports=i,i.prototype=new n,i.prototype.constructor=i,i.prototype.computeB=function(t,e,o){var i=this.G;i[2]=-1,i[5]=this.ratio;var n=this.computeGiMf();return-this.computeGW()*e-o*n}},{"../math/vec2":30,"./Equation":22}],26:[function(t,e,o){var i=function(){};e.exports=i,i.prototype={constructor:i,on:function(t,e,o){e.context=o||this,void 0===this._listeners&&(this._listeners={});var i=this._listeners;return void 0===i[t]&&(i[t]=[]),-1===i[t].indexOf(e)&&i[t].push(e),this},has:function(t,e){if(void 0===this._listeners)return!1;var o=this._listeners;if(e){if(void 0!==o[t]&&-1!==o[t].indexOf(e))return!0}else if(void 0!==o[t])return!0;return!1},off:function(t,e){if(void 0===this._listeners)return this;var o=this._listeners,i=o[t].indexOf(e);return-1!==i&&o[t].splice(i,1),this},emit:function(t){if(void 0===this._listeners)return this;var e=this._listeners[t.type];if(void 0!==e){t.target=this;for(var o=0,i=e.length;i>o;o++){var n=e[o];n.call(n.context,t)}}return this}}},{}],27:[function(t,e,o){function i(t,e,o){if(o=o||{},!(t instanceof n&&e instanceof n))throw new Error("First two arguments must be Material instances.");this.id=i.idCounter++,this.materialA=t,this.materialB=e,this.friction=void 0!==o.friction?Number(o.friction):.3,this.restitution=void 0!==o.restitution?Number(o.restitution):0,this.stiffness=void 0!==o.stiffness?Number(o.stiffness):r.DEFAULT_STIFFNESS,this.relaxation=void 0!==o.relaxation?Number(o.relaxation):r.DEFAULT_RELAXATION,this.frictionStiffness=void 0!==o.frictionStiffness?Number(o.frictionStiffness):r.DEFAULT_STIFFNESS,this.frictionRelaxation=void 0!==o.frictionRelaxation?Number(o.frictionRelaxation):r.DEFAULT_RELAXATION,this.surfaceVelocity=void 0!==o.surfaceVelocity?Number(o.surfaceVelocity):0,this.contactSkinSize=.005}var n=t("./Material"),r=t("../equations/Equation");e.exports=i,i.idCounter=0},{"../equations/Equation":22,"./Material":28}],28:[function(t,e,o){function i(t){this.id=t||i.idCounter++}e.exports=i,i.idCounter=0},{}],29:[function(t,e,o){var i={GetArea:function(t){if(t.length<6)return 0;for(var e=t.length-2,o=0,i=0;e>i;i+=2)o+=(t[i+2]-t[i])*(t[i+1]+t[i+3]);return.5*-(o+=(t[0]-t[e])*(t[e+1]+t[1]))},Triangulate:function(t){var e=t.length>>1;if(3>e)return[];for(var o=[],n=[],r=0;e>r;r++)n.push(r);r=0;for(var s=e;s>3;){var a=n[(r+0)%s],c=n[(r+1)%s],h=n[(r+2)%s],l=t[2*a],p=t[2*a+1],u=t[2*c],d=t[2*c+1],f=t[2*h],v=t[2*h+1],y=!1;if(i._convex(l,p,u,d,f,v)){y=!0;for(var m=0;s>m;m++){var g=n[m];if(g!=a&&g!=c&&g!=h&&i._PointInTriangle(t[2*g],t[2*g+1],l,p,u,d,f,v)){y=!1;break}}}if(y)o.push(a,c,h),n.splice((r+1)%s,1),s--,r=0;else if(r++>3*s)break}return o.push(n[0],n[1],n[2]),o},_PointInTriangle:function(t,e,o,i,n,r,s,a){var c=s-o,h=a-i,l=n-o,p=r-i,u=t-o,d=e-i,f=c*c+h*h,v=c*l+h*p,y=c*u+h*d,m=l*l+p*p,g=l*u+p*d,A=1/(f*m-v*v),b=(m*y-v*g)*A,E=(f*g-v*y)*A;return b>=0&&E>=0&&1>b+E},_convex:function(t,e,o,i,n,r){return(e-i)*(n-o)+(o-t)*(r-i)>=0}};e.exports=i},{}],30:[function(t,e,o){var i=e.exports={},n=t("../utils/Utils");i.crossLength=function(t,e){return t[0]*e[1]-t[1]*e[0]},i.crossVZ=function(t,e,o){return i.rotate(t,e,-Math.PI/2),i.scale(t,t,o),t},i.crossZV=function(t,e,o){return i.rotate(t,o,Math.PI/2),i.scale(t,t,e),t},i.rotate=function(t,e,o){if(0!==o){var i=Math.cos(o),n=Math.sin(o),r=e[0],s=e[1];t[0]=i*r-n*s,t[1]=n*r+i*s}else t[0]=e[0],t[1]=e[1]},i.rotate90cw=function(t,e){var o=e[0],i=e[1];t[0]=i,t[1]=-o},i.toLocalFrame=function(t,e,o,n){i.copy(t,e),i.sub(t,t,o),i.rotate(t,t,-n)},i.toGlobalFrame=function(t,e,o,n){i.copy(t,e),i.rotate(t,t,n),i.add(t,t,o)},i.vectorToLocalFrame=function(t,e,o){i.rotate(t,e,-o)},i.vectorToGlobalFrame=function(t,e,o){i.rotate(t,e,o)},i.centroid=function(t,e,o,n){return i.add(t,e,o),i.add(t,t,n),i.scale(t,t,1/3),t},i.create=function(){var t=new n.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t},i.clone=function(t){var e=new n.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e},i.fromValues=function(t,e){var o=new n.ARRAY_TYPE(2);return o[0]=t,o[1]=e,o},i.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t},i.set=function(t,e,o){return t[0]=e,t[1]=o,t},i.add=function(t,e,o){return t[0]=e[0]+o[0],t[1]=e[1]+o[1],t},i.subtract=function(t,e,o){return t[0]=e[0]-o[0],t[1]=e[1]-o[1],t},i.sub=i.subtract,i.multiply=function(t,e,o){return t[0]=e[0]*o[0],t[1]=e[1]*o[1],t},i.mul=i.multiply,i.divide=function(t,e,o){return t[0]=e[0]/o[0],t[1]=e[1]/o[1],t},i.div=i.divide,i.scale=function(t,e,o){return t[0]=e[0]*o,t[1]=e[1]*o,t},i.distance=function(t,e){var o=e[0]-t[0],i=e[1]-t[1];return Math.sqrt(o*o+i*i)},i.dist=i.distance,i.squaredDistance=function(t,e){var o=e[0]-t[0],i=e[1]-t[1];return o*o+i*i},i.sqrDist=i.squaredDistance,i.length=function(t){var e=t[0],o=t[1];return Math.sqrt(e*e+o*o)},i.len=i.length,i.squaredLength=function(t){var e=t[0],o=t[1];return e*e+o*o},i.sqrLen=i.squaredLength,i.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},i.normalize=function(t,e){var o=e[0],i=e[1],n=o*o+i*i;return n>0&&(n=1/Math.sqrt(n),t[0]=e[0]*n,t[1]=e[1]*n),t},i.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},i.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},i.lerp=function(t,e,o,i){var n=e[0],r=e[1];return t[0]=n+i*(o[0]-n),t[1]=r+i*(o[1]-r),t},i.reflect=function(t,e,o){var i=e[0]*o[0]+e[1]*o[1];t[0]=e[0]-2*o[0]*i,t[1]=e[1]-2*o[1]*i},i.getLineSegmentsIntersection=function(t,e,o,n,r){var s=i.getLineSegmentsIntersectionFraction(e,o,n,r);return!(0>s)&&(t[0]=e[0]+s*(o[0]-e[0]),t[1]=e[1]+s*(o[1]-e[1]),!0)},i.getLineSegmentsIntersectionFraction=function(t,e,o,i){var n,r,s=e[0]-t[0],a=e[1]-t[1],c=i[0]-o[0],h=i[1]-o[1];return n=(-a*(t[0]-o[0])+s*(t[1]-o[1]))/(-c*a+s*h),r=(c*(t[1]-o[1])-h*(t[0]-o[0]))/(-c*a+s*h),n>=0&&1>=n&&r>=0&&1>=r?r:-1}},{"../utils/Utils":57}],31:[function(t,e,o){function i(t){t=t||{},l.call(this),this.id=t.id||++i._idCounter,this.world=null,this.shapes=[],this.mass=t.mass||0,this.invMass=0,this.inertia=0,this.invInertia=0,this.invMassSolve=0,this.invInertiaSolve=0,this.fixedRotation=!!t.fixedRotation,this.fixedX=!!t.fixedX,this.fixedY=!!t.fixedY,this.massMultiplier=n.create(),this.position=n.fromValues(0,0),t.position&&n.copy(this.position,t.position),this.interpolatedPosition=n.fromValues(0,0),this.interpolatedAngle=0,this.previousPosition=n.fromValues(0,0),this.previousAngle=0,this.velocity=n.fromValues(0,0),t.velocity&&n.copy(this.velocity,t.velocity),this.vlambda=n.fromValues(0,0),this.wlambda=0,this.angle=t.angle||0,this.angularVelocity=t.angularVelocity||0,this.force=n.create(),t.force&&n.copy(this.force,t.force),this.angularForce=t.angularForce||0,this.damping="number"==typeof t.damping?t.damping:.1,this.angularDamping="number"==typeof t.angularDamping?t.angularDamping:.1,this.type=i.STATIC,void 0!==t.type?this.type=t.type:t.mass?this.type=i.DYNAMIC:this.type=i.STATIC,this.boundingRadius=0,this.aabb=new h,this.aabbNeedsUpdate=!0,this.allowSleep=void 0===t.allowSleep||t.allowSleep,this.wantsToSleep=!1,this.sleepState=i.AWAKE,this.sleepSpeedLimit=void 0!==t.sleepSpeedLimit?t.sleepSpeedLimit:.2,this.sleepTimeLimit=void 0!==t.sleepTimeLimit?t.sleepTimeLimit:1,this.gravityScale=void 0!==t.gravityScale?t.gravityScale:1,this.collisionResponse=void 0===t.collisionResponse||t.collisionResponse,this.idleTime=0,this.timeLastSleepy=0,this.ccdSpeedThreshold=void 0!==t.ccdSpeedThreshold?t.ccdSpeedThreshold:-1,this.ccdIterations=void 0!==t.ccdIterations?t.ccdIterations:10,this.concavePath=null,this._wakeUpAfterNarrowphase=!1,this.updateMassProperties()}var n=t("../math/vec2"),r=t("poly-decomp"),s=t("../shapes/Convex"),a=t("../collision/RaycastResult"),c=t("../collision/Ray"),h=t("../collision/AABB"),l=t("../events/EventEmitter");e.exports=i,i.prototype=new l,i.prototype.constructor=i,i._idCounter=0,i.prototype.updateSolveMassProperties=function(){this.sleepState===i.SLEEPING||this.type===i.KINEMATIC?(this.invMassSolve=0,this.invInertiaSolve=0):(this.invMassSolve=this.invMass,this.invInertiaSolve=this.invInertia)},i.prototype.setDensity=function(t){var e=this.getArea();this.mass=e*t,this.updateMassProperties()},i.prototype.getArea=function(){for(var t=0,e=0;e<this.shapes.length;e++)t+=this.shapes[e].area;return t},i.prototype.getAABB=function(){return this.aabbNeedsUpdate&&this.updateAABB(),this.aabb};var p=new h,u=n.create();i.prototype.updateAABB=function(){for(var t=this.shapes,e=t.length,o=u,i=this.angle,r=0;r!==e;r++){var s=t[r],a=s.angle+i;n.rotate(o,s.position,i),n.add(o,o,this.position),s.computeAABB(p,o,a),0===r?this.aabb.copy(p):this.aabb.extend(p)}this.aabbNeedsUpdate=!1},i.prototype.updateBoundingRadius=function(){for(var t=this.shapes,e=t.length,o=0,i=0;i!==e;i++){var r=t[i],s=n.length(r.position),a=r.boundingRadius;s+a>o&&(o=s+a)}this.boundingRadius=o},i.prototype.addShape=function(t,e,o){if(t.body)throw new Error("A shape can only be added to one body.");t.body=this,e?n.copy(t.position,e):n.set(t.position,0,0),t.angle=o||0,this.shapes.push(t),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0},i.prototype.removeShape=function(t){var e=this.shapes.indexOf(t);return-1!==e&&(this.shapes.splice(e,1),this.aabbNeedsUpdate=!0,t.body=null,!0)},i.prototype.updateMassProperties=function(){if(this.type===i.STATIC||this.type===i.KINEMATIC)this.mass=Number.MAX_VALUE,this.invMass=0,this.inertia=Number.MAX_VALUE,this.invInertia=0;else{var t=this.shapes,e=t.length,o=this.mass/e,r=0;if(this.fixedRotation)this.inertia=Number.MAX_VALUE,this.invInertia=0;else{for(var s=0;e>s;s++){var a=t[s],c=n.squaredLength(a.position);r+=a.computeMomentOfInertia(o)+o*c}this.inertia=r,this.invInertia=r>0?1/r:0}this.invMass=1/this.mass,n.set(this.massMultiplier,this.fixedX?0:1,this.fixedY?0:1)}},n.create(),i.prototype.applyForce=function(t,e){if(n.add(this.force,this.force,t),e){var o=n.crossLength(e,t);this.angularForce+=o}};var d=n.create(),f=n.create(),v=n.create();i.prototype.applyForceLocal=function(t,e){e=e||v;var o=d,i=f;this.vectorToWorldFrame(o,t),this.vectorToWorldFrame(i,e),this.applyForce(o,i)};var y=n.create();i.prototype.applyImpulse=function(t,e){if(this.type===i.DYNAMIC){var o=y;if(n.scale(o,t,this.invMass),n.multiply(o,this.massMultiplier,o),n.add(this.velocity,o,this.velocity),e){var r=n.crossLength(e,t);r*=this.invInertia,this.angularVelocity+=r}}};var m=n.create(),g=n.create(),A=n.create();i.prototype.applyImpulseLocal=function(t,e){e=e||A;var o=m,i=g;this.vectorToWorldFrame(o,t),this.vectorToWorldFrame(i,e),this.applyImpulse(o,i)},i.prototype.toLocalFrame=function(t,e){n.toLocalFrame(t,e,this.position,this.angle)},i.prototype.toWorldFrame=function(t,e){n.toGlobalFrame(t,e,this.position,this.angle)},i.prototype.vectorToLocalFrame=function(t,e){n.vectorToLocalFrame(t,e,this.angle)},i.prototype.vectorToWorldFrame=function(t,e){n.vectorToGlobalFrame(t,e,this.angle)},i.prototype.fromPolygon=function(t,e){e=e||{};for(var o=this.shapes.length;o>=0;--o)this.removeShape(this.shapes[o]);var i,a=new r.Polygon;if(a.vertices=t,a.makeCCW(),"number"==typeof e.removeCollinearPoints&&a.removeCollinearPoints(e.removeCollinearPoints),void 0===e.skipSimpleCheck&&!a.isSimple())return!1;this.concavePath=a.vertices.slice(0);for(o=0;o<this.concavePath.length;o++){var c=[0,0];n.copy(c,this.concavePath[o]),this.concavePath[o]=c}i=e.optimalDecomp?a.decomp():a.quickDecomp();var h=n.create();for(o=0;o!==i.length;o++){for(var l=new s({vertices:i[o].vertices}),p=0;p!==l.vertices.length;p++){c=l.vertices[p];n.sub(c,c,l.centerOfMass)}n.scale(h,l.centerOfMass,1),l.updateTriangles(),l.updateCenterOfMass(),l.updateBoundingRadius(),this.addShape(l,h)}return this.adjustCenterOfMass(),this.aabbNeedsUpdate=!0,!0};var b=(n.fromValues(0,0),n.fromValues(0,0)),E=n.fromValues(0,0),B=n.fromValues(0,0);i.prototype.adjustCenterOfMass=function(){var t=b,e=E,o=B,i=0;n.set(e,0,0);for(var r=0;r!==this.shapes.length;r++){var s=this.shapes[r];n.scale(t,s.position,s.area),n.add(e,e,t),i+=s.area}n.scale(o,e,1/i);for(r=0;r!==this.shapes.length;r++){s=this.shapes[r];n.sub(s.position,s.position,o)}n.add(this.position,this.position,o);for(r=0;this.concavePath&&r<this.concavePath.length;r++)n.sub(this.concavePath[r],this.concavePath[r],o);this.updateMassProperties(),this.updateBoundingRadius()},i.prototype.setZeroForce=function(){n.set(this.force,0,0),this.angularForce=0},i.prototype.resetConstraintVelocity=function(){var t=this.vlambda;n.set(t,0,0),this.wlambda=0},i.prototype.addConstraintVelocity=function(){var t=this,e=t.velocity;n.add(e,e,t.vlambda),t.angularVelocity+=t.wlambda},i.prototype.applyDamping=function(t){if(this.type===i.DYNAMIC){var e=this.velocity;n.scale(e,e,Math.pow(1-this.damping,t)),this.angularVelocity*=Math.pow(1-this.angularDamping,t)}},i.prototype.wakeUp=function(){var t=this.sleepState;this.sleepState=i.AWAKE,this.idleTime=0,t!==i.AWAKE&&this.emit(i.wakeUpEvent)},i.prototype.sleep=function(){this.sleepState=i.SLEEPING,this.angularVelocity=0,this.angularForce=0,n.set(this.velocity,0,0),n.set(this.force,0,0),this.emit(i.sleepEvent)},i.prototype.sleepTick=function(t,e,o){this.allowSleep&&this.type!==i.SLEEPING&&(this.wantsToSleep=!1,(this.sleepState,n.squaredLength(this.velocity)+Math.pow(this.angularVelocity,2))>=Math.pow(this.sleepSpeedLimit,2)?(this.idleTime=0,this.sleepState=i.AWAKE):(this.idleTime+=o,this.sleepState=i.SLEEPY),this.idleTime>this.sleepTimeLimit&&(e?this.wantsToSleep=!0:this.sleep()))},i.prototype.overlaps=function(t){return this.world.overlapKeeper.bodiesAreOverlapping(this,t)};var q=n.create(),P=n.create();i.prototype.integrate=function(t){var e=this.invMass,o=this.force,i=this.position,r=this.velocity;n.copy(this.previousPosition,this.position),this.previousAngle=this.angle,this.fixedRotation||(this.angularVelocity+=this.angularForce*this.invInertia*t),n.scale(q,o,t*e),n.multiply(q,this.massMultiplier,q),n.add(r,q,r),this.integrateToTimeOfImpact(t)||(n.scale(P,r,t),n.add(i,i,P),this.fixedRotation||(this.angle+=this.angularVelocity*t)),this.aabbNeedsUpdate=!0};var w=new a,S=new c({mode:c.ALL}),C=n.create(),L=n.create(),x=n.create(),F=n.create();i.prototype.integrateToTimeOfImpact=function(t){if(this.ccdSpeedThreshold<0||n.squaredLength(this.velocity)<Math.pow(this.ccdSpeedThreshold,2))return!1;n.normalize(C,this.velocity),n.scale(L,this.velocity,t),n.add(L,L,this.position),n.sub(x,L,this.position);var e,o=this.angularVelocity*t,i=n.length(x),r=1,s=this;if(w.reset(),S.callback=function(t){t.body!==s&&(e=t.body,t.getHitPoint(L,S),n.sub(x,L,s.position),r=n.length(x)/i,t.stop())},n.copy(S.from,this.position),n.copy(S.to,L),S.update(),this.world.raycast(w,S),!e)return!1;var a=this.angle;n.copy(F,this.position);for(var c=0,h=0,l=0,p=r;p>=h&&c<this.ccdIterations;){c++,l=(p-h)/2,n.scale(P,x,r),n.add(this.position,F,P),this.angle=a+o*r,this.updateAABB(),this.aabb.overlaps(e.aabb)&&this.world.narrowphase.bodiesOverlap(this,e)?h=l:p=l}return r=l,n.copy(this.position,F),this.angle=a,n.scale(P,x,r),n.add(this.position,this.position,P),this.fixedRotation||(this.angle+=o*r),!0},i.prototype.getVelocityAtPoint=function(t,e){return n.crossVZ(t,e,this.angularVelocity),n.subtract(t,this.velocity,t),t},i.sleepyEvent={type:"sleepy"},i.sleepEvent={type:"sleep"},i.wakeUpEvent={type:"wakeup"},i.DYNAMIC=1,i.STATIC=2,i.KINEMATIC=4,i.AWAKE=0,i.SLEEPY=1,i.SLEEPING=2},{"../collision/AABB":7,"../collision/Ray":11,"../collision/RaycastResult":12,"../events/EventEmitter":26,"../math/vec2":30,"../shapes/Convex":40,"poly-decomp":5}],32:[function(t,e,o){function i(t,e,o){o=o||{},r.call(this,t,e,o),this.localAnchorA=n.fromValues(0,0),this.localAnchorB=n.fromValues(0,0),o.localAnchorA&&n.copy(this.localAnchorA,o.localAnchorA),o.localAnchorB&&n.copy(this.localAnchorB,o.localAnchorB),o.worldAnchorA&&this.setWorldAnchorA(o.worldAnchorA),o.worldAnchorB&&this.setWorldAnchorB(o.worldAnchorB);var i=n.create(),s=n.create();this.getWorldAnchorA(i),this.getWorldAnchorB(s);var a=n.distance(i,s);this.restLength="number"==typeof o.restLength?o.restLength:a}var n=t("../math/vec2"),r=t("./Spring");t("../utils/Utils"),e.exports=i,i.prototype=new r,i.prototype.constructor=i,i.prototype.setWorldAnchorA=function(t){this.bodyA.toLocalFrame(this.localAnchorA,t)},i.prototype.setWorldAnchorB=function(t){this.bodyB.toLocalFrame(this.localAnchorB,t)},i.prototype.getWorldAnchorA=function(t){this.bodyA.toWorldFrame(t,this.localAnchorA)},i.prototype.getWorldAnchorB=function(t){this.bodyB.toWorldFrame(t,this.localAnchorB)};var s=n.create(),a=n.create(),c=n.create(),h=n.create(),l=n.create(),p=n.create(),u=n.create(),d=n.create(),f=n.create();i.prototype.applyForce=function(){var t=this.stiffness,e=this.damping,o=this.restLength,i=this.bodyA,r=this.bodyB,v=s,y=a,m=c,g=h,A=f,b=l,E=p,B=u,q=d;this.getWorldAnchorA(b),this.getWorldAnchorB(E),n.sub(B,b,i.position),n.sub(q,E,r.position),n.sub(v,E,b);var P=n.len(v);n.normalize(y,v),n.sub(m,r.velocity,i.velocity),n.crossZV(A,r.angularVelocity,q),n.add(m,m,A),n.crossZV(A,i.angularVelocity,B),n.sub(m,m,A),n.scale(g,y,-t*(P-o)-e*n.dot(m,y)),n.sub(i.force,i.force,g),n.add(r.force,r.force,g);var w=n.crossLength(B,g),S=n.crossLength(q,g);i.angularForce-=w,r.angularForce+=S}},{"../math/vec2":30,"../utils/Utils":57,"./Spring":34}],33:[function(t,e,o){function i(t,e,o){o=o||{},n.call(this,t,e,o),this.restAngle="number"==typeof o.restAngle?o.restAngle:e.angle-t.angle}var n=(t("../math/vec2"),t("./Spring"));e.exports=i,i.prototype=new n,i.prototype.constructor=i,i.prototype.applyForce=function(){var t=this.stiffness,e=this.damping,o=this.restAngle,i=this.bodyA,n=this.bodyB,r=-t*(n.angle-i.angle-o)-e*(n.angularVelocity-i.angularVelocity)*0;i.angularForce-=r,n.angularForce+=r}},{"../math/vec2":30,"./Spring":34}],34:[function(t,e,o){function i(t,e,o){o=n.defaults(o,{stiffness:100,damping:1}),this.stiffness=o.stiffness,this.damping=o.damping,this.bodyA=t,this.bodyB=e}var n=(t("../math/vec2"),t("../utils/Utils"));e.exports=i,i.prototype.applyForce=function(){}},{"../math/vec2":30,"../utils/Utils":57}],35:[function(t,e,o){function i(t,e){e=e||{},this.chassisBody=t,this.wheels=[],this.groundBody=new c({mass:0}),this.world=null;var o=this;this.preStepCallback=function(){o.update()}}function n(t,e){e=e||{},this.vehicle=t,this.forwardEquation=new a(t.chassisBody,t.groundBody),this.sideEquation=new a(t.chassisBody,t.groundBody),this.steerValue=0,this.engineForce=0,this.setSideFriction(void 0!==e.sideFriction?e.sideFriction:5),this.localForwardVector=r.fromValues(0,1),e.localForwardVector&&r.copy(this.localForwardVector,e.localForwardVector),this.localPosition=r.fromValues(0,0),e.localPosition&&r.copy(this.localPosition,e.localPosition),s.apply(this,t.chassisBody,t.groundBody),this.equations.push(this.forwardEquation,this.sideEquation),this.setBrakeForce(0)}var r=t("../math/vec2"),s=(t("../utils/Utils"),t("../constraints/Constraint")),a=t("../equations/FrictionEquation"),c=t("../objects/Body");e.exports=i,i.prototype.addToWorld=function(t){this.world=t,t.addBody(this.groundBody),t.on("preStep",this.preStepCallback);for(var e=0;e<this.wheels.length;e++){var o=this.wheels[e];t.addConstraint(o)}},i.prototype.removeFromWorld=function(){var t=this.world;t.removeBody(this.groundBody),t.off("preStep",this.preStepCallback);for(var e=0;e<this.wheels.length;e++){var o=this.wheels[e];t.removeConstraint(o)}this.world=null},i.prototype.addWheel=function(t){var e=new n(this,t);return this.wheels.push(e),e},i.prototype.update=function(){for(var t=0;t<this.wheels.length;t++)this.wheels[t].update()},n.prototype=new s,n.prototype.setBrakeForce=function(t){this.forwardEquation.setSlipForce(t)},n.prototype.setSideFriction=function(t){this.sideEquation.setSlipForce(t)};var h=r.create(),l=r.create();n.prototype.getSpeed=function(){return this.vehicle.chassisBody.vectorToWorldFrame(l,this.localForwardVector),this.vehicle.chassisBody.getVelocityAtPoint(h,l),r.dot(h,l)};var p=r.create();n.prototype.update=function(){this.vehicle.chassisBody.vectorToWorldFrame(this.forwardEquation.t,this.localForwardVector),r.rotate(this.sideEquation.t,this.localForwardVector,Math.PI/2),this.vehicle.chassisBody.vectorToWorldFrame(this.sideEquation.t,this.sideEquation.t),r.rotate(this.forwardEquation.t,this.forwardEquation.t,this.steerValue),r.rotate(this.sideEquation.t,this.sideEquation.t,this.steerValue),this.vehicle.chassisBody.toWorldFrame(this.forwardEquation.contactPointB,this.localPosition),r.copy(this.sideEquation.contactPointB,this.forwardEquation.contactPointB),this.vehicle.chassisBody.vectorToWorldFrame(this.forwardEquation.contactPointA,this.localPosition),r.copy(this.sideEquation.contactPointA,this.forwardEquation.contactPointA),r.normalize(p,this.forwardEquation.t),r.scale(p,p,this.engineForce),this.vehicle.chassisBody.applyForce(p,this.forwardEquation.contactPointA)}},{"../constraints/Constraint":14,"../equations/FrictionEquation":23,"../math/vec2":30,"../objects/Body":31,"../utils/Utils":57}],36:[function(t,e,o){var i=e.exports={AABB:t("./collision/AABB"),AngleLockEquation:t("./equations/AngleLockEquation"),Body:t("./objects/Body"),Broadphase:t("./collision/Broadphase"),Capsule:t("./shapes/Capsule"),Circle:t("./shapes/Circle"),Constraint:t("./constraints/Constraint"),ContactEquation:t("./equations/ContactEquation"),ContactEquationPool:t("./utils/ContactEquationPool"),ContactMaterial:t("./material/ContactMaterial"),Convex:t("./shapes/Convex"),DistanceConstraint:t("./constraints/DistanceConstraint"),Equation:t("./equations/Equation"),EventEmitter:t("./events/EventEmitter"),FrictionEquation:t("./equations/FrictionEquation"),FrictionEquationPool:t("./utils/FrictionEquationPool"),GearConstraint:t("./constraints/GearConstraint"),GSSolver:t("./solver/GSSolver"),Heightfield:t("./shapes/Heightfield"),Line:t("./shapes/Line"),LockConstraint:t("./constraints/LockConstraint"),Material:t("./material/Material"),Narrowphase:t("./collision/Narrowphase"),NaiveBroadphase:t("./collision/NaiveBroadphase"),Particle:t("./shapes/Particle"),Plane:t("./shapes/Plane"),Pool:t("./utils/Pool"),RevoluteConstraint:t("./constraints/RevoluteConstraint"),PrismaticConstraint:t("./constraints/PrismaticConstraint"),Ray:t("./collision/Ray"),RaycastResult:t("./collision/RaycastResult"),Box:t("./shapes/Box"),RotationalVelocityEquation:t("./equations/RotationalVelocityEquation"),SAPBroadphase:t("./collision/SAPBroadphase"),Shape:t("./shapes/Shape"),Solver:t("./solver/Solver"),Spring:t("./objects/Spring"),TopDownVehicle:t("./objects/TopDownVehicle"),LinearSpring:t("./objects/LinearSpring"),RotationalSpring:t("./objects/RotationalSpring"),Utils:t("./utils/Utils"),World:t("./world/World"),vec2:t("./math/vec2"),version:t("../package.json").version};Object.defineProperty(i,"Rectangle",{get:function(){return console.warn("The Rectangle class has been renamed to Box."),this.Box}})},{"../package.json":6,"./collision/AABB":7,"./collision/Broadphase":8,"./collision/NaiveBroadphase":9,"./collision/Narrowphase":10,"./collision/Ray":11,"./collision/RaycastResult":12,"./collision/SAPBroadphase":13,"./constraints/Constraint":14,"./constraints/DistanceConstraint":15,"./constraints/GearConstraint":16,"./constraints/LockConstraint":17,"./constraints/PrismaticConstraint":18,"./constraints/RevoluteConstraint":19,"./equations/AngleLockEquation":20,"./equations/ContactEquation":21,"./equations/Equation":22,"./equations/FrictionEquation":23,"./equations/RotationalVelocityEquation":25,"./events/EventEmitter":26,"./material/ContactMaterial":27,"./material/Material":28,"./math/vec2":30,"./objects/Body":31,"./objects/LinearSpring":32,"./objects/RotationalSpring":33,"./objects/Spring":34,"./objects/TopDownVehicle":35,"./shapes/Box":37,"./shapes/Capsule":38,"./shapes/Circle":39,"./shapes/Convex":40,"./shapes/Heightfield":41,"./shapes/Line":42,"./shapes/Particle":43,"./shapes/Plane":44,"./shapes/Shape":45,"./solver/GSSolver":46,"./solver/Solver":47,"./utils/ContactEquationPool":48,"./utils/FrictionEquationPool":49,"./utils/Pool":55,"./utils/Utils":57,"./world/World":61}],37:[function(t,e,o){function i(t){"number"==typeof arguments[0]&&"number"==typeof arguments[1]&&(t={width:arguments[0],height:arguments[1]},console.warn("The Rectangle has been renamed to Box and its constructor signature has changed. Please use the following format: new Box({ width: 1, height: 1, ... })")),t=t||{};var e=this.width=t.width||1,o=this.height=t.height||1,i=[n.fromValues(-e/2,-o/2),n.fromValues(e/2,-o/2),n.fromValues(e/2,o/2),n.fromValues(-e/2,o/2)],a=[n.fromValues(1,0),n.fromValues(0,1)];t.vertices=i,t.axes=a,t.type=r.BOX,s.call(this,t)}var n=t("../math/vec2"),r=t("./Shape"),s=t("./Convex");e.exports=i,i.prototype=new s,i.prototype.constructor=i,i.prototype.computeMomentOfInertia=function(t){var e=this.width,o=this.height;return t*(o*o+e*e)/12},i.prototype.updateBoundingRadius=function(){var t=this.width,e=this.height;this.boundingRadius=Math.sqrt(t*t+e*e)/2},n.create(),n.create(),n.create(),n.create(),i.prototype.computeAABB=function(t,e,o){t.setFromPoints(this.vertices,e,o,0)},i.prototype.updateArea=function(){this.area=this.width*this.height}},{"../math/vec2":30,"./Convex":40,"./Shape":45}],38:[function(t,e,o){function i(t){"number"==typeof arguments[0]&&"number"==typeof arguments[1]&&(t={length:arguments[0],radius:arguments[1]},console.warn("The Capsule constructor signature has changed. Please use the following format: new Capsule({ radius: 1, length: 1 })")),t=t||{},this.length=t.length||1,this.radius=t.radius||1,t.type=n.CAPSULE,n.call(this,t)}var n=t("./Shape"),r=t("../math/vec2");e.exports=i,i.prototype=new n,i.prototype.constructor=i,i.prototype.computeMomentOfInertia=function(t){var e=this.radius,o=this.length+e,i=2*e;return t*(i*i+o*o)/12},i.prototype.updateBoundingRadius=function(){this.boundingRadius=this.radius+this.length/2},i.prototype.updateArea=function(){this.area=Math.PI*this.radius*this.radius+2*this.radius*this.length};var s=r.create();i.prototype.computeAABB=function(t,e,o){var i=this.radius;r.set(s,this.length/2,0),0!==o&&r.rotate(s,s,o),r.set(t.upperBound,Math.max(s[0]+i,-s[0]+i),Math.max(s[1]+i,-s[1]+i)),r.set(t.lowerBound,Math.min(s[0]-i,-s[0]-i),Math.min(s[1]-i,-s[1]-i)),r.add(t.lowerBound,t.lowerBound,e),r.add(t.upperBound,t.upperBound,e)};var a=r.create(),c=r.create(),h=r.create(),l=r.create(),p=r.fromValues(0,1);i.prototype.raycast=function(t,e,o,i){for(var n=e.from,s=e.to,u=(e.direction,a),d=c,f=h,v=l,y=this.length/2,m=0;2>m;m++){var g=this.radius*(2*m-1);if(r.set(f,-y,g),r.set(v,y,g),r.toGlobalFrame(f,f,o,i),r.toGlobalFrame(v,v,o,i),(b=r.getLineSegmentsIntersectionFraction(n,s,f,v))>=0&&(r.rotate(d,p,i),r.scale(d,d,2*m-1),e.reportIntersection(t,b,d,-1),t.shouldStop(e)))return}var A=Math.pow(this.radius,2)+Math.pow(y,2);for(m=0;2>m;m++){r.set(f,y*(2*m-1),0),r.toGlobalFrame(f,f,o,i);var b,E=Math.pow(s[0]-n[0],2)+Math.pow(s[1]-n[1],2),B=2*((s[0]-n[0])*(n[0]-f[0])+(s[1]-n[1])*(n[1]-f[1])),q=Math.pow(n[0]-f[0],2)+Math.pow(n[1]-f[1],2)-Math.pow(this.radius,2);if(!(0>(b=Math.pow(B,2)-4*E*q)))if(0===b){if(r.lerp(u,n,s,b),r.squaredDistance(u,o)>A&&(r.sub(d,u,f),r.normalize(d,d),e.reportIntersection(t,b,d,-1),t.shouldStop(e)))return}else{var P=Math.sqrt(b),w=1/(2*E),S=(-B-P)*w,C=(-B+P)*w;if(S>=0&&1>=S&&(r.lerp(u,n,s,S),r.squaredDistance(u,o)>A&&(r.sub(d,u,f),r.normalize(d,d),e.reportIntersection(t,S,d,-1),t.shouldStop(e))))return;if(C>=0&&1>=C&&(r.lerp(u,n,s,C),r.squaredDistance(u,o)>A&&(r.sub(d,u,f),r.normalize(d,d),e.reportIntersection(t,C,d,-1),t.shouldStop(e))))return}}}},{"../math/vec2":30,"./Shape":45}],39:[function(t,e,o){function i(t){"number"==typeof arguments[0]&&(t={radius:arguments[0]},console.warn("The Circle constructor signature has changed. Please use the following format: new Circle({ radius: 1 })")),t=t||{},this.radius=t.radius||1,t.type=n.CIRCLE,n.call(this,t)}var n=t("./Shape"),r=t("../math/vec2");e.exports=i,i.prototype=new n,i.prototype.constructor=i,i.prototype.computeMomentOfInertia=function(t){var e=this.radius;return t*e*e/2},i.prototype.updateBoundingRadius=function(){this.boundingRadius=this.radius},i.prototype.updateArea=function(){this.area=Math.PI*this.radius*this.radius},i.prototype.computeAABB=function(t,e,o){var i=this.radius;r.set(t.upperBound,i,i),r.set(t.lowerBound,-i,-i),e&&(r.add(t.lowerBound,t.lowerBound,e),r.add(t.upperBound,t.upperBound,e))};var s=r.create(),a=r.create();i.prototype.raycast=function(t,e,o,i){var n=e.from,c=e.to,h=this.radius,l=Math.pow(c[0]-n[0],2)+Math.pow(c[1]-n[1],2),p=2*((c[0]-n[0])*(n[0]-o[0])+(c[1]-n[1])*(n[1]-o[1])),u=Math.pow(n[0]-o[0],2)+Math.pow(n[1]-o[1],2)-Math.pow(h,2),d=Math.pow(p,2)-4*l*u,f=s,v=a;if(!(0>d))if(0===d)r.lerp(f,n,c,d),r.sub(v,f,o),r.normalize(v,v),e.reportIntersection(t,d,v,-1);else{var y=Math.sqrt(d),m=1/(2*l),g=(-p-y)*m,A=(-p+y)*m;if(g>=0&&1>=g&&(r.lerp(f,n,c,g),r.sub(v,f,o),r.normalize(v,v),e.reportIntersection(t,g,v,-1),t.shouldStop(e)))return;A>=0&&1>=A&&(r.lerp(f,n,c,A),r.sub(v,f,o),r.normalize(v,v),e.reportIntersection(t,A,v,-1))}}},{"../math/vec2":30,"./Shape":45}],40:[function(t,e,o){function i(t){Array.isArray(arguments[0])&&(t={vertices:arguments[0],axes:arguments[1]},console.warn("The Convex constructor signature has changed. Please use the following format: new Convex({ vertices: [...], ... })")),t=t||{},this.vertices=[];for(var e=void 0!==t.vertices?t.vertices:[],o=0;o<e.length;o++){var i=r.create();r.copy(i,e[o]),this.vertices.push(i)}if(this.axes=[],t.axes)for(o=0;o<t.axes.length;o++){var s=r.create();r.copy(s,t.axes[o]),this.axes.push(s)}else for(o=0;o<this.vertices.length;o++){var a=this.vertices[o],c=this.vertices[(o+1)%this.vertices.length],h=r.create();r.sub(h,c,a),r.rotate90cw(h,h),r.normalize(h,h),this.axes.push(h)}if(this.centerOfMass=r.fromValues(0,0),this.triangles=[],this.vertices.length&&(this.updateTriangles(),this.updateCenterOfMass()),this.boundingRadius=0,t.type=n.CONVEX,n.call(this,t),this.updateBoundingRadius(),this.updateArea(),this.area<0)throw new Error("Convex vertices must be given in conter-clockwise winding.")}var n=t("./Shape"),r=t("../math/vec2"),s=t("../math/polyk");t("poly-decomp"),e.exports=i,i.prototype=new n,i.prototype.constructor=i;var a=r.create(),c=r.create();i.prototype.projectOntoLocalAxis=function(t,e){for(var o,i,n=null,s=null,c=(t=a,0);c<this.vertices.length;c++)o=this.vertices[c],i=r.dot(o,t),(null===n||i>n)&&(n=i),(null===s||s>i)&&(s=i);if(s>n){var h=s;s=n,n=h}r.set(e,s,n)},i.prototype.projectOntoWorldAxis=function(t,e,o,i){var n=c;this.projectOntoLocalAxis(t,i),0!==o?r.rotate(n,t,o):n=t;var s=r.dot(e,n);r.set(i,i[0]+s,i[1]+s)},i.prototype.updateTriangles=function(){this.triangles.length=0;for(var t=[],e=0;e<this.vertices.length;e++){var o=this.vertices[e];t.push(o[0],o[1])}var i=s.Triangulate(t);for(e=0;e<i.length;e+=3){var n=i[e],r=i[e+1],a=i[e+2];this.triangles.push([n,r,a])}};var h=r.create(),l=r.create(),p=r.create(),u=r.create(),d=r.create();r.create(),r.create(),r.create(),r.create(),i.prototype.updateCenterOfMass=function(){var t=this.triangles,e=this.vertices,o=this.centerOfMass,n=h,s=p,a=u,c=d,f=l;r.set(o,0,0);for(var v=0,y=0;y!==t.length;y++){var m=t[y];s=e[m[0]],a=e[m[1]],c=e[m[2]];r.centroid(n,s,a,c);var g=i.triangleArea(s,a,c);v+=g,r.scale(f,n,g),r.add(o,o,f)}r.scale(o,o,1/v)},i.prototype.computeMomentOfInertia=function(t){for(var e=0,o=0,i=this.vertices.length,n=i-1,s=0;i>s;n=s,s++){var a=this.vertices[n],c=this.vertices[s],h=Math.abs(r.crossLength(a,c));e+=h*(r.dot(c,c)+r.dot(c,a)+r.dot(a,a)),o+=h}return t/6*(e/o)},i.prototype.updateBoundingRadius=function(){for(var t=this.vertices,e=0,o=0;o!==t.length;o++){var i=r.squaredLength(t[o]);i>e&&(e=i)}this.boundingRadius=Math.sqrt(e)},i.triangleArea=function(t,e,o){return.5*((e[0]-t[0])*(o[1]-t[1])-(o[0]-t[0])*(e[1]-t[1]))},i.prototype.updateArea=function(){this.updateTriangles(),this.area=0;for(var t=this.triangles,e=this.vertices,o=0;o!==t.length;o++){var n=t[o],r=e[n[0]],s=e[n[1]],a=e[n[2]],c=i.triangleArea(r,s,a);this.area+=c}},i.prototype.computeAABB=function(t,e,o){t.setFromPoints(this.vertices,e,o,0)};var f=r.create(),v=r.create(),y=r.create();i.prototype.raycast=function(t,e,o,i){var n=f,s=v,a=y,c=this.vertices;r.toLocalFrame(n,e.from,o,i),r.toLocalFrame(s,e.to,o,i);for(var h=c.length,l=0;h>l&&!t.shouldStop(e);l++){var p=c[l],u=c[(l+1)%h],d=r.getLineSegmentsIntersectionFraction(n,s,p,u);d>=0&&(r.sub(a,u,p),r.rotate(a,a,-Math.PI/2+i),r.normalize(a,a),e.reportIntersection(t,d,a,l))}}},{"../math/polyk":29,"../math/vec2":30,"./Shape":45,"poly-decomp":5}],41:[function(t,e,o){function i(t){if(Array.isArray(arguments[0])){if(t={heights:arguments[0]},"object"==typeof arguments[1])for(var e in arguments[1])t[e]=arguments[1][e];console.warn("The Heightfield constructor signature has changed. Please use the following format: new Heightfield({ heights: [...], ... })")}t=t||{},this.heights=t.heights?t.heights.slice(0):[],this.maxValue=t.maxValue||null,this.minValue=t.minValue||null,this.elementWidth=t.elementWidth||.1,(void 0===t.maxValue||void 0===t.minValue)&&this.updateMaxMinValues(),t.type=n.HEIGHTFIELD,n.call(this,t)}var n=t("./Shape"),r=t("../math/vec2");t("../utils/Utils"),e.exports=i,i.prototype=new n,i.prototype.constructor=i,i.prototype.updateMaxMinValues=function(){for(var t=this.heights,e=t[0],o=t[0],i=0;i!==t.length;i++){var n=t[i];n>e&&(e=n),o>n&&(o=n)}this.maxValue=e,this.minValue=o},i.prototype.computeMomentOfInertia=function(t){return Number.MAX_VALUE},i.prototype.updateBoundingRadius=function(){this.boundingRadius=Number.MAX_VALUE},i.prototype.updateArea=function(){for(var t=this.heights,e=0,o=0;o<t.length-1;o++)e+=(t[o]+t[o+1])/2*this.elementWidth;this.area=e};var s=[r.create(),r.create(),r.create(),r.create()];i.prototype.computeAABB=function(t,e,o){r.set(s[0],0,this.maxValue),r.set(s[1],this.elementWidth*this.heights.length,this.maxValue),r.set(s[2],this.elementWidth*this.heights.length,this.minValue),r.set(s[3],0,this.minValue),t.setFromPoints(s,e,o)},i.prototype.getLineSegment=function(t,e,o){var i=this.heights,n=this.elementWidth;r.set(t,o*n,i[o]),r.set(e,(o+1)*n,i[o+1])},i.prototype.getSegmentIndex=function(t){return Math.floor(t[0]/this.elementWidth)},i.prototype.getClampedSegmentIndex=function(t){var e=this.getSegmentIndex(t);return Math.min(this.heights.length,Math.max(e,0))};var a=(r.create(),r.create()),c=r.create(),h=r.create(),l=r.create(),p=r.create();r.fromValues(0,1),i.prototype.raycast=function(t,e,o,i){var n=e.from,s=e.to,u=(e.direction,a),d=c,f=h,v=l,y=p;r.toLocalFrame(v,n,o,i),r.toLocalFrame(y,s,o,i);var m=this.getClampedSegmentIndex(v),g=this.getClampedSegmentIndex(y);if(m>g){var A=m;m=g,g=A}for(var b=0;b<this.heights.length-1;b++){this.getLineSegment(d,f,b);var E=r.getLineSegmentsIntersectionFraction(v,y,d,f);if(E>=0&&(r.sub(u,f,d),r.rotate(u,u,i+Math.PI/2),r.normalize(u,u),e.reportIntersection(t,E,u,-1),t.shouldStop(e)))return}}},{"../math/vec2":30,"../utils/Utils":57,"./Shape":45}],42:[function(t,e,o){function i(t){"number"==typeof arguments[0]&&(t={length:arguments[0]},console.warn("The Line constructor signature has changed. Please use the following format: new Line({ length: 1, ... })")),t=t||{},this.length=t.length||1,t.type=n.LINE,n.call(this,t)}var n=t("./Shape"),r=t("../math/vec2");e.exports=i,i.prototype=new n,i.prototype.constructor=i,i.prototype.computeMomentOfInertia=function(t){return t*Math.pow(this.length,2)/12},i.prototype.updateBoundingRadius=function(){this.boundingRadius=this.length/2};var s=[r.create(),r.create()];i.prototype.computeAABB=function(t,e,o){var i=this.length/2;r.set(s[0],-i,0),r.set(s[1],i,0),t.setFromPoints(s,e,o,0)};var a=(r.create(),r.create()),c=r.create(),h=r.create(),l=r.fromValues(0,1);i.prototype.raycast=function(t,e,o,i){var n=e.from,s=e.to,p=c,u=h,d=this.length/2;r.set(p,-d,0),r.set(u,d,0),r.toGlobalFrame(p,p,o,i),r.toGlobalFrame(u,u,o,i);var f=r.getLineSegmentsIntersectionFraction(p,u,n,s);if(f>=0){var v=a;r.rotate(v,l,i),e.reportIntersection(t,f,v,-1)}}},{"../math/vec2":30,"./Shape":45}],43:[function(t,e,o){function i(t){(t=t||{}).type=n.PARTICLE,n.call(this,t)}var n=t("./Shape"),r=t("../math/vec2");e.exports=i,i.prototype=new n,i.prototype.constructor=i,i.prototype.computeMomentOfInertia=function(t){return 0},i.prototype.updateBoundingRadius=function(){this.boundingRadius=0},i.prototype.computeAABB=function(t,e,o){r.copy(t.lowerBound,e),r.copy(t.upperBound,e)}},{"../math/vec2":30,"./Shape":45}],44:[function(t,e,o){function i(t){(t=t||{}).type=n.PLANE,n.call(this,t)}var n=t("./Shape"),r=t("../math/vec2");t("../utils/Utils"),e.exports=i,i.prototype=new n,i.prototype.constructor=i,i.prototype.computeMomentOfInertia=function(t){return 0},i.prototype.updateBoundingRadius=function(){this.boundingRadius=Number.MAX_VALUE},i.prototype.computeAABB=function(t,e,o){var i=o%(2*Math.PI),n=r.set,s=1e7,a=t.lowerBound,c=t.upperBound;n(a,-s,-s),n(c,s,s),0===i?c[1]=0:i===Math.PI/2?a[0]=0:i===Math.PI?a[1]=0:i===3*Math.PI/2&&(c[0]=0)},i.prototype.updateArea=function(){this.area=Number.MAX_VALUE};var s=r.create(),a=(r.create(),r.create(),r.create()),c=r.create();i.prototype.raycast=function(t,e,o,i){var n=e.from,h=e.to,l=e.direction,p=s,u=a,d=c;r.set(u,0,1),r.rotate(u,u,i),r.sub(d,n,o);var f=r.dot(d,u);if(r.sub(d,h,o),!(f*r.dot(d,u)>0||r.squaredDistance(n,h)<f*f)){var v=r.dot(u,l);r.sub(p,n,o);var y=-r.dot(u,p)/v/e.length;e.reportIntersection(t,y,u,-1)}}},{"../math/vec2":30,"../utils/Utils":57,"./Shape":45}],45:[function(t,e,o){function i(t){t=t||{},this.body=null,this.position=n.fromValues(0,0),t.position&&n.copy(this.position,t.position),this.angle=t.angle||0,this.type=t.type||0,this.id=i.idCounter++,this.boundingRadius=0,this.collisionGroup=void 0!==t.collisionGroup?t.collisionGroup:1,this.collisionResponse=void 0===t.collisionResponse||t.collisionResponse,this.collisionMask=void 0!==t.collisionMask?t.collisionMask:1,this.material=t.material||null,this.area=0,this.sensor=void 0!==t.sensor&&t.sensor,this.type&&this.updateBoundingRadius(),this.updateArea()}e.exports=i;var n=t("../math/vec2");i.idCounter=0,i.CIRCLE=1,i.PARTICLE=2,i.PLANE=4,i.CONVEX=8,i.LINE=16,i.BOX=32,Object.defineProperty(i,"RECTANGLE",{get:function(){return console.warn("Shape.RECTANGLE is deprecated, use Shape.BOX instead."),i.BOX}}),i.CAPSULE=64,i.HEIGHTFIELD=128,i.prototype.computeMomentOfInertia=function(t){},i.prototype.updateBoundingRadius=function(){},i.prototype.updateArea=function(){},i.prototype.computeAABB=function(t,e,o){},i.prototype.raycast=function(t,e,o,i){}},{"../math/vec2":30}],46:[function(t,e,o){function i(t){r.call(this,t,r.GS),t=t||{},this.iterations=t.iterations||10,this.tolerance=t.tolerance||1e-7,this.arrayStep=30,this.lambda=new s.ARRAY_TYPE(this.arrayStep),this.Bs=new s.ARRAY_TYPE(this.arrayStep),this.invCs=new s.ARRAY_TYPE(this.arrayStep),this.useZeroRHS=!1,this.frictionIterations=void 0!==t.frictionIterations?0:t.frictionIterations,this.usedIterations=0}var n=t("../math/vec2"),r=t("./Solver"),s=t("../utils/Utils"),a=t("../equations/FrictionEquation");e.exports=i,i.prototype=new r,i.prototype.constructor=i,i.prototype.solve=function(t,e){this.sortEquations();var o,r,c=0,h=this.iterations,l=this.frictionIterations,p=this.equations,u=p.length,d=Math.pow(this.tolerance*u,2),f=e.bodies,v=e.bodies.length,y=(n.add,n.set,this.useZeroRHS),m=this.lambda;if(this.usedIterations=0,u)for(var g=0;g!==v;g++){f[g].updateSolveMassProperties()}m.length<u&&(m=this.lambda=new s.ARRAY_TYPE(u+this.arrayStep),this.Bs=new s.ARRAY_TYPE(u+this.arrayStep),this.invCs=new s.ARRAY_TYPE(u+this.arrayStep)),function(t){for(var e=t.length;e--;)t[e]=0}(m);for(var A=this.invCs,b=this.Bs,g=(m=this.lambda,0);g!==p.length;g++){var E;((E=p[g]).timeStep!==t||E.needsUpdate)&&(E.timeStep=t,E.update()),b[g]=E.computeB(E.a,E.b,t),A[g]=E.computeInvC(E.epsilon)}if(0!==u){for(g=0;g!==v;g++){f[g].resetConstraintVelocity()}if(l){for(c=0;c!==l;c++){for(o=0,r=0;r!==u;r++){E=p[r];var B=i.iterateEquation(r,E,E.epsilon,b,A,m,y,t,c);o+=Math.abs(B)}if(this.usedIterations++,d>=o*o)break}for(i.updateMultipliers(p,m,1/t),r=0;r!==u;r++){var q=p[r];if(q instanceof a){for(var P=0,w=0;w!==q.contactEquations.length;w++)P+=q.contactEquations[w].multiplier;P*=q.frictionCoefficient/q.contactEquations.length,q.maxForce=P,q.minForce=-P}}}for(c=0;c!==h;c++){for(o=0,r=0;r!==u;r++){E=p[r];B=i.iterateEquation(r,E,E.epsilon,b,A,m,y,t,c);o+=Math.abs(B)}if(this.usedIterations++,d>=o*o)break}for(g=0;g!==v;g++)f[g].addConstraintVelocity();i.updateMultipliers(p,m,1/t)}},i.updateMultipliers=function(t,e,o){for(var i=t.length;i--;)t[i].multiplier=e[i]*o},i.iterateEquation=function(t,e,o,i,n,r,s,a,c){var h=i[t],l=n[t],p=r[t],u=e.computeGWlambda(),d=e.maxForce,f=e.minForce;s&&(h=0);var v=l*(h-u-o*p),y=p+v;return f*a>y?v=f*a-p:y>d*a&&(v=d*a-p),r[t]+=v,e.addToWlambda(v),v}},{"../equations/FrictionEquation":23,"../math/vec2":30,"../utils/Utils":57,"./Solver":47}],47:[function(t,e,o){function i(t,e){t=t||{},n.call(this),this.type=e,this.equations=[],this.equationSortFunction=t.equationSortFunction||!1}var n=(t("../utils/Utils"),t("../events/EventEmitter"));e.exports=i,i.prototype=new n,i.prototype.constructor=i,i.prototype.solve=function(t,e){throw new Error("Solver.solve should be implemented by subclasses!")};var r={bodies:[]};i.prototype.solveIsland=function(t,e){this.removeAllEquations(),e.equations.length&&(this.addEquations(e.equations),r.bodies.length=0,e.getBodies(r.bodies),r.bodies.length&&this.solve(t,r))},i.prototype.sortEquations=function(){this.equationSortFunction&&this.equations.sort(this.equationSortFunction)},i.prototype.addEquation=function(t){t.enabled&&this.equations.push(t)},i.prototype.addEquations=function(t){for(var e=0,o=t.length;e!==o;e++){var i=t[e];i.enabled&&this.equations.push(i)}},i.prototype.removeEquation=function(t){var e=this.equations.indexOf(t);-1!==e&&this.equations.splice(e,1)},i.prototype.removeAllEquations=function(){this.equations.length=0},i.GS=1,i.ISLAND=2},{"../events/EventEmitter":26,"../utils/Utils":57}],48:[function(t,e,o){function i(){r.apply(this,arguments)}var n=t("../equations/ContactEquation"),r=t("./Pool");e.exports=i,i.prototype=new r,i.prototype.constructor=i,i.prototype.create=function(){return new n},i.prototype.destroy=function(t){return t.bodyA=t.bodyB=null,this}},{"../equations/ContactEquation":21,"./Pool":55}],49:[function(t,e,o){function i(){r.apply(this,arguments)}var n=t("../equations/FrictionEquation"),r=t("./Pool");e.exports=i,i.prototype=new r,i.prototype.constructor=i,i.prototype.create=function(){return new n},i.prototype.destroy=function(t){return t.bodyA=t.bodyB=null,this}},{"../equations/FrictionEquation":23,"./Pool":55}],50:[function(t,e,o){function i(){r.apply(this,arguments)}var n=t("../world/IslandNode"),r=t("./Pool");e.exports=i,i.prototype=new r,i.prototype.constructor=i,i.prototype.create=function(){return new n},i.prototype.destroy=function(t){return t.reset(),this}},{"../world/IslandNode":60,"./Pool":55}],51:[function(t,e,o){function i(){r.apply(this,arguments)}var n=t("../world/Island"),r=t("./Pool");e.exports=i,i.prototype=new r,i.prototype.constructor=i,i.prototype.create=function(){return new n},i.prototype.destroy=function(t){return t.reset(),this}},{"../world/Island":58,"./Pool":55}],52:[function(t,e,o){function i(){this.overlappingShapesLastState=new n,this.overlappingShapesCurrentState=new n,this.recordPool=new r({size:16}),this.tmpDict=new n,this.tmpArray1=[]}var n=t("./TupleDictionary"),r=(t("./OverlapKeeperRecord"),t("./OverlapKeeperRecordPool"));t("./Utils"),e.exports=i,i.prototype.tick=function(){for(var t=this.overlappingShapesLastState,e=this.overlappingShapesCurrentState,o=t.keys.length;o--;){var i=t.keys[o],n=t.getByKey(i);e.getByKey(i),n&&this.recordPool.release(n)}t.reset(),t.copy(e),e.reset()},i.prototype.setOverlapping=function(t,e,o,i){var n=(this.overlappingShapesLastState,this.overlappingShapesCurrentState);if(!n.get(e.id,i.id)){var r=this.recordPool.get();r.set(t,e,o,i),n.set(e.id,i.id,r)}},i.prototype.getNewOverlaps=function(t){return this.getDiff(this.overlappingShapesLastState,this.overlappingShapesCurrentState,t)},i.prototype.getEndOverlaps=function(t){return this.getDiff(this.overlappingShapesCurrentState,this.overlappingShapesLastState,t)},i.prototype.bodiesAreOverlapping=function(t,e){for(var o=this.overlappingShapesCurrentState,i=o.keys.length;i--;){var n=o.keys[i],r=o.data[n];if(r.bodyA===t&&r.bodyB===e||r.bodyA===e&&r.bodyB===t)return!0}return!1},i.prototype.getDiff=function(t,e,o){var i=t,n=e;(o=o||[]).length=0;for(var r=n.keys.length;r--;){var s=n.keys[r],a=n.data[s];if(!a)throw new Error("Key "+s+" had no data!");i.data[s]||o.push(a)}return o},i.prototype.isNewOverlap=function(t,e){var o=0|t.id,i=0|e.id,n=this.overlappingShapesLastState,r=this.overlappingShapesCurrentState;return!n.get(o,i)&&!!r.get(o,i)},i.prototype.getNewBodyOverlaps=function(t){this.tmpArray1.length=0;var e=this.getNewOverlaps(this.tmpArray1);return this.getBodyDiff(e,t)},i.prototype.getEndBodyOverlaps=function(t){this.tmpArray1.length=0;var e=this.getEndOverlaps(this.tmpArray1);return this.getBodyDiff(e,t)},i.prototype.getBodyDiff=function(t,e){e=e||[];for(var o=this.tmpDict,i=t.length;i--;){var n=t[i];o.set(0|n.bodyA.id,0|n.bodyB.id,n)}for(i=o.keys.length;i--;){(n=o.getByKey(o.keys[i]))&&e.push(n.bodyA,n.bodyB)}return o.reset(),e}},{"./OverlapKeeperRecord":53,"./OverlapKeeperRecordPool":54,"./TupleDictionary":56,"./Utils":57}],53:[function(t,e,o){function i(t,e,o,i){this.shapeA=e,this.shapeB=i,this.bodyA=t,this.bodyB=o}e.exports=i,i.prototype.set=function(t,e,o,n){i.call(this,t,e,o,n)}},{}],54:[function(t,e,o){function i(){r.apply(this,arguments)}var n=t("./OverlapKeeperRecord"),r=t("./Pool");e.exports=i,i.prototype=new r,i.prototype.constructor=i,i.prototype.create=function(){return new n},i.prototype.destroy=function(t){return t.bodyA=t.bodyB=t.shapeA=t.shapeB=null,this}},{"./OverlapKeeperRecord":53,"./Pool":55}],55:[function(t,e,o){function i(t){t=t||{},this.objects=[],void 0!==t.size&&this.resize(t.size)}e.exports=i,i.prototype.resize=function(t){for(var e=this.objects;e.length>t;)e.pop();for(;e.length<t;)e.push(this.create());return this},i.prototype.get=function(){var t=this.objects;return t.length?t.pop():this.create()},i.prototype.release=function(t){return this.destroy(t),this.objects.push(t),this}},{}],56:[function(t,e,o){function i(){this.data={},this.keys=[]}var n=t("./Utils");e.exports=i,i.prototype.getKey=function(t,e){return(0|(t|=0))==(0|(e|=0))?-1:0|((0|t)>(0|e)?t<<16|65535&e:e<<16|65535&t)},i.prototype.getByKey=function(t){return t|=0,this.data[t]},i.prototype.get=function(t,e){return this.data[this.getKey(t,e)]},i.prototype.set=function(t,e,o){if(!o)throw new Error("No data!");var i=this.getKey(t,e);return this.data[i]||this.keys.push(i),this.data[i]=o,i},i.prototype.reset=function(){for(var t=this.data,e=this.keys,o=e.length;o--;)delete t[e[o]];e.length=0},i.prototype.copy=function(t){this.reset(),n.appendArray(this.keys,t.keys);for(var e=t.keys.length;e--;){var o=t.keys[e];this.data[o]=t.data[o]}}},{"./Utils":57}],57:[function(t,e,o){function i(){}e.exports=i,i.appendArray=function(t,e){if(e.length<15e4)t.push.apply(t,e);else for(var o=0,i=e.length;o!==i;++o)t.push(e[o])},i.splice=function(t,e,o){o=o||1;for(var i=e,n=t.length-o;n>i;i++)t[i]=t[i+o];t.length=n},"undefined"!=typeof P2_ARRAY_TYPE?i.ARRAY_TYPE=P2_ARRAY_TYPE:"undefined"!=typeof Float32Array?i.ARRAY_TYPE=Float32Array:i.ARRAY_TYPE=Array,i.extend=function(t,e){for(var o in e)t[o]=e[o]},i.defaults=function(t,e){for(var o in t=t||{},e)o in t||(t[o]=e[o]);return t}},{}],58:[function(t,e,o){function i(){this.equations=[],this.bodies=[]}var n=t("../objects/Body");e.exports=i,i.prototype.reset=function(){this.equations.length=this.bodies.length=0};var r=[];i.prototype.getBodies=function(t){var e=t||[],o=this.equations;r.length=0;for(var i=0;i!==o.length;i++){var n=o[i];-1===r.indexOf(n.bodyA.id)&&(e.push(n.bodyA),r.push(n.bodyA.id)),-1===r.indexOf(n.bodyB.id)&&(e.push(n.bodyB),r.push(n.bodyB.id))}return e},i.prototype.wantsToSleep=function(){for(var t=0;t<this.bodies.length;t++){var e=this.bodies[t];if(e.type===n.DYNAMIC&&!e.wantsToSleep)return!1}return!0},i.prototype.sleep=function(){for(var t=0;t<this.bodies.length;t++){this.bodies[t].sleep()}return!0}},{"../objects/Body":31}],59:[function(t,e,o){function i(t){this.nodePool=new n({size:16}),this.islandPool=new r({size:8}),this.equations=[],this.islands=[],this.nodes=[],this.queue=[]}var n=(t("../math/vec2"),t("./Island"),t("./IslandNode"),t("./../utils/IslandNodePool")),r=t("./../utils/IslandPool"),s=t("../objects/Body");e.exports=i,i.getUnvisitedNode=function(t){for(var e=t.length,o=0;o!==e;o++){var i=t[o];if(!i.visited&&i.body.type===s.DYNAMIC)return i}return!1},i.prototype.visit=function(t,e,o){e.push(t.body);for(var i=t.equations.length,n=0;n!==i;n++){var r=t.equations[n];-1===o.indexOf(r)&&o.push(r)}},i.prototype.bfs=function(t,e,o){var n=this.queue;for(n.length=0,n.push(t),t.visited=!0,this.visit(t,e,o);n.length;)for(var r,a=n.pop();r=i.getUnvisitedNode(a.neighbors);)r.visited=!0,this.visit(r,e,o),r.body.type===s.DYNAMIC&&n.push(r)},i.prototype.split=function(t){for(var e=t.bodies,o=this.nodes,n=this.equations;o.length;)this.nodePool.release(o.pop());for(var r=0;r!==e.length;r++){var s=this.nodePool.get();s.body=e[r],o.push(s)}for(var a=0;a!==n.length;a++){var c=n[a],h=(r=e.indexOf(c.bodyA),e.indexOf(c.bodyB)),l=o[r],p=o[h];l.neighbors.push(p),p.neighbors.push(l),l.equations.push(c),p.equations.push(c)}var u=this.islands;for(r=0;r<u.length;r++)this.islandPool.release(u[r]);u.length=0;for(var d;d=i.getUnvisitedNode(o);){var f=this.islandPool.get();this.bfs(d,f.bodies,f.equations),u.push(f)}return u}},{"../math/vec2":30,"../objects/Body":31,"./../utils/IslandNodePool":50,"./../utils/IslandPool":51,"./Island":58,"./IslandNode":60}],60:[function(t,e,o){function i(t){this.body=t,this.neighbors=[],this.equations=[],this.visited=!1}e.exports=i,i.prototype.reset=function(){this.equations.length=0,this.neighbors.length=0,this.visited=!1,this.body=null}},{}],61:[function(t,e,o){function i(t){p.apply(this),t=t||{},this.springs=[],this.bodies=[],this.disabledBodyCollisionPairs=[],this.solver=t.solver||new n,this.narrowphase=new m(this),this.islandManager=new b,this.gravity=r.fromValues(0,-9.78),t.gravity&&r.copy(this.gravity,t.gravity),this.frictionGravity=r.length(this.gravity)||10,this.useWorldGravityAsFrictionGravity=!0,this.useFrictionGravityOnZeroGravity=!0,this.broadphase=t.broadphase||new y,this.broadphase.setWorld(this),this.constraints=[],this.defaultMaterial=new d,this.defaultContactMaterial=new f(this.defaultMaterial,this.defaultMaterial),this.lastTimeStep=1/60,this.applySpringForces=!0,this.applyDamping=!0,this.applyGravity=!0,this.solveConstraints=!0,this.contactMaterials=[],this.time=0,this.accumulator=0,this.stepping=!1,this.bodiesToBeRemoved=[],this.islandSplit=void 0===t.islandSplit||!!t.islandSplit,this.emitImpactEvent=!0,this._constraintIdCounter=0,this._bodyIdCounter=0,this.postStepEvent={type:"postStep"},this.addBodyEvent={type:"addBody",body:null},this.removeBodyEvent={type:"removeBody",body:null},this.addSpringEvent={type:"addSpring",spring:null},this.impactEvent={type:"impact",bodyA:null,bodyB:null,shapeA:null,shapeB:null,contactEquation:null},this.postBroadphaseEvent={type:"postBroadphase",pairs:null},this.sleepMode=i.NO_SLEEPING,this.beginContactEvent={type:"beginContact",shapeA:null,shapeB:null,bodyA:null,bodyB:null,contactEquations:[]},this.endContactEvent={type:"endContact",shapeA:null,shapeB:null,bodyA:null,bodyB:null},this.preSolveEvent={type:"preSolve",contactEquations:null,frictionEquations:null},this.overlappingShapesLastState={keys:[]},this.overlappingShapesCurrentState={keys:[]},this.overlapKeeper=new A}var n=t("../solver/GSSolver"),r=(t("../solver/Solver"),t("../collision/Ray"),t("../math/vec2")),s=t("../shapes/Circle"),a=t("../shapes/Convex"),c=(t("../shapes/Line"),t("../shapes/Plane")),h=t("../shapes/Capsule"),l=t("../shapes/Particle"),p=t("../events/EventEmitter"),u=t("../objects/Body"),d=(t("../shapes/Shape"),t("../objects/LinearSpring"),t("../material/Material")),f=t("../material/ContactMaterial"),v=(t("../constraints/DistanceConstraint"),t("../constraints/Constraint"),t("../constraints/LockConstraint"),t("../constraints/RevoluteConstraint"),t("../constraints/PrismaticConstraint"),t("../constraints/GearConstraint"),t("../../package.json"),t("../collision/Broadphase"),t("../collision/AABB")),y=t("../collision/SAPBroadphase"),m=t("../collision/Narrowphase"),g=t("../utils/Utils"),A=t("../utils/OverlapKeeper"),b=t("./IslandManager");t("../objects/RotationalSpring"),e.exports=i,i.prototype=new Object(p.prototype),i.prototype.constructor=i,i.NO_SLEEPING=1,i.BODY_SLEEPING=2,i.ISLAND_SLEEPING=4,i.prototype.addConstraint=function(t){this.constraints.push(t)},i.prototype.addContactMaterial=function(t){this.contactMaterials.push(t)},i.prototype.removeContactMaterial=function(t){var e=this.contactMaterials.indexOf(t);-1!==e&&g.splice(this.contactMaterials,e,1)},i.prototype.getContactMaterial=function(t,e){for(var o=this.contactMaterials,i=0,n=o.length;i!==n;i++){var r=o[i];if(r.materialA.id===t.id&&r.materialB.id===e.id||r.materialA.id===e.id&&r.materialB.id===t.id)return r}return!1},i.prototype.removeConstraint=function(t){var e=this.constraints.indexOf(t);-1!==e&&g.splice(this.constraints,e,1)};var E=(r.create(),r.create(),r.create(),r.create(),r.create(),r.create(),r.create()),B=r.fromValues(0,0),q=r.fromValues(0,0);r.fromValues(0,0),r.fromValues(0,0),i.prototype.step=function(t,e,o){if(o=o||10,0===(e=e||0))this.internalStep(t),this.time+=t;else{this.accumulator+=e;for(var i=0;this.accumulator>=t&&o>i;)this.internalStep(t),this.time+=t,this.accumulator-=t,i++;for(var n=this.accumulator%t/t,s=0;s!==this.bodies.length;s++){var a=this.bodies[s];r.lerp(a.interpolatedPosition,a.previousPosition,a.position,n),a.interpolatedAngle=a.previousAngle+n*(a.angle-a.previousAngle)}}};var P=[];i.prototype.internalStep=function(t){this.stepping=!0;var e=this.springs.length,o=this.springs,n=this.bodies,s=this.gravity,a=this.solver,c=this.bodies.length,h=this.broadphase,l=this.narrowphase,p=this.constraints,d=E,f=(r.scale,r.add),v=(r.rotate,this.islandManager);if(this.overlapKeeper.tick(),this.lastTimeStep=t,this.useWorldGravityAsFrictionGravity){var y=r.length(this.gravity);0===y&&this.useFrictionGravityOnZeroGravity||(this.frictionGravity=y)}if(this.applyGravity)for(var m=0;m!==c;m++){var A=(b=n[m]).force;b.type===u.DYNAMIC&&b.sleepState!==u.SLEEPING&&(r.scale(d,s,b.mass*b.gravityScale),f(A,A,d))}if(this.applySpringForces)for(m=0;m!==e;m++){o[m].applyForce()}if(this.applyDamping)for(m=0;m!==c;m++){var b;(b=n[m]).type===u.DYNAMIC&&b.applyDamping(t)}var B=h.getCollisionPairs(this),q=this.disabledBodyCollisionPairs;for(m=q.length-2;m>=0;m-=2)for(var w=B.length-2;w>=0;w-=2)(q[m]===B[w]&&q[m+1]===B[w+1]||q[m+1]===B[w]&&q[m]===B[w+1])&&B.splice(w,2);var S=p.length;for(m=0;m!==S;m++){var C=p[m];if(!C.collideConnected)for(w=B.length-2;w>=0;w-=2)(C.bodyA===B[w]&&C.bodyB===B[w+1]||C.bodyB===B[w]&&C.bodyA===B[w+1])&&B.splice(w,2)}this.postBroadphaseEvent.pairs=B,this.emit(this.postBroadphaseEvent),this.postBroadphaseEvent.pairs=null,l.reset(this);m=0;for(var L=B.length;m!==L;m+=2)for(var x=B[m],F=B[m+1],M=0,I=x.shapes.length;M!==I;M++)for(var R=x.shapes[M],V=R.position,T=R.angle,N=0,G=F.shapes.length;N!==G;N++){var O=F.shapes[N],U=O.position,k=O.angle,_=this.defaultContactMaterial;if(R.material&&O.material){var D=this.getContactMaterial(R.material,O.material);D&&(_=D)}this.runNarrowphase(l,x,R,V,T,F,O,U,k,_,this.frictionGravity)}for(m=0;m!==c;m++){(z=n[m])._wakeUpAfterNarrowphase&&(z.wakeUp(),z._wakeUpAfterNarrowphase=!1)}if(this.has("endContact")){this.overlapKeeper.getEndOverlaps(P);var W=this.endContactEvent;for(N=P.length;N--;){var j=P[N];W.shapeA=j.shapeA,W.shapeB=j.shapeB,W.bodyA=j.bodyA,W.bodyB=j.bodyB,this.emit(W)}P.length=0}var X=this.preSolveEvent;X.contactEquations=l.contactEquations,X.frictionEquations=l.frictionEquations,this.emit(X),X.contactEquations=X.frictionEquations=null;S=p.length;for(m=0;m!==S;m++)p[m].update();if(l.contactEquations.length||l.frictionEquations.length||S)if(this.islandSplit){for(v.equations.length=0,g.appendArray(v.equations,l.contactEquations),g.appendArray(v.equations,l.frictionEquations),m=0;m!==S;m++)g.appendArray(v.equations,p[m].equations);v.split(this);for(m=0;m!==v.islands.length;m++){(H=v.islands[m]).equations.length&&a.solveIsland(t,H)}}else{for(a.addEquations(l.contactEquations),a.addEquations(l.frictionEquations),m=0;m!==S;m++)a.addEquations(p[m].equations);this.solveConstraints&&a.solve(t,this),a.removeAllEquations()}for(m=0;m!==c;m++){var z;(z=n[m]).integrate(t)}for(m=0;m!==c;m++)n[m].setZeroForce();if(this.emitImpactEvent&&this.has("impact")){var Y=this.impactEvent;for(m=0;m!==l.contactEquations.length;m++){var K=l.contactEquations[m];K.firstImpact&&(Y.bodyA=K.bodyA,Y.bodyB=K.bodyB,Y.shapeA=K.shapeA,Y.shapeB=K.shapeB,Y.contactEquation=K,this.emit(Y))}}if(this.sleepMode===i.BODY_SLEEPING)for(m=0;m!==c;m++)n[m].sleepTick(this.time,!1,t);else if(this.sleepMode===i.ISLAND_SLEEPING&&this.islandSplit){for(m=0;m!==c;m++)n[m].sleepTick(this.time,!0,t);for(m=0;m<this.islandManager.islands.length;m++){var H;(H=this.islandManager.islands[m]).wantsToSleep()&&H.sleep()}}this.stepping=!1;var Z=this.bodiesToBeRemoved;for(m=0;m!==Z.length;m++)this.removeBody(Z[m]);Z.length=0,this.emit(this.postStepEvent)},i.prototype.runNarrowphase=function(t,e,o,i,n,s,a,c,h,l,p){if(0!=(o.collisionGroup&a.collisionMask)&&0!=(a.collisionGroup&o.collisionMask)){r.rotate(B,i,e.angle),r.rotate(q,c,s.angle),r.add(B,B,e.position),r.add(q,q,s.position);var d,f=n+e.angle,v=h+s.angle;t.enableFriction=l.friction>0,t.frictionCoefficient=l.friction,d=e.type===u.STATIC||e.type===u.KINEMATIC?s.mass:s.type===u.STATIC||s.type===u.KINEMATIC?e.mass:e.mass*s.mass/(e.mass+s.mass),t.slipForce=l.friction*p*d,t.restitution=l.restitution,t.surfaceVelocity=l.surfaceVelocity,t.frictionStiffness=l.frictionStiffness,t.frictionRelaxation=l.frictionRelaxation,t.stiffness=l.stiffness,t.relaxation=l.relaxation,t.contactSkinSize=l.contactSkinSize,t.enabledEquations=e.collisionResponse&&s.collisionResponse&&o.collisionResponse&&a.collisionResponse;var y=t[o.type|a.type],m=0;if(y){var g=o.sensor||a.sensor,A=t.frictionEquations.length;m=o.type<a.type?y.call(t,e,o,B,f,s,a,q,v,g):y.call(t,s,a,q,v,e,o,B,f,g);var b=t.frictionEquations.length-A;if(m){if(e.allowSleep&&e.type===u.DYNAMIC&&e.sleepState===u.SLEEPING&&s.sleepState===u.AWAKE&&s.type!==u.STATIC)r.squaredLength(s.velocity)+Math.pow(s.angularVelocity,2)>=2*Math.pow(s.sleepSpeedLimit,2)&&(e._wakeUpAfterNarrowphase=!0);if(s.allowSleep&&s.type===u.DYNAMIC&&s.sleepState===u.SLEEPING&&e.sleepState===u.AWAKE&&e.type!==u.STATIC)r.squaredLength(e.velocity)+Math.pow(e.angularVelocity,2)>=2*Math.pow(e.sleepSpeedLimit,2)&&(s._wakeUpAfterNarrowphase=!0);if(this.overlapKeeper.setOverlapping(e,o,s,a),this.has("beginContact")&&this.overlapKeeper.isNewOverlap(o,a)){var E=this.beginContactEvent;if(E.shapeA=o,E.shapeB=a,E.bodyA=e,E.bodyB=s,E.contactEquations.length=0,"number"==typeof m)for(var P=t.contactEquations.length-m;P<t.contactEquations.length;P++)E.contactEquations.push(t.contactEquations[P]);this.emit(E)}if("number"==typeof m&&b>1)for(P=t.frictionEquations.length-b;P<t.frictionEquations.length;P++){var w=t.frictionEquations[P];w.setSlipForce(w.getSlipForce()/b)}}}}},i.prototype.addSpring=function(t){this.springs.push(t);var e=this.addSpringEvent;e.spring=t,this.emit(e),e.spring=null},i.prototype.removeSpring=function(t){var e=this.springs.indexOf(t);-1!==e&&g.splice(this.springs,e,1)},i.prototype.addBody=function(t){if(-1===this.bodies.indexOf(t)){this.bodies.push(t),t.world=this;var e=this.addBodyEvent;e.body=t,this.emit(e),e.body=null}},i.prototype.removeBody=function(t){if(this.stepping)this.bodiesToBeRemoved.push(t);else{t.world=null;var e=this.bodies.indexOf(t);-1!==e&&(g.splice(this.bodies,e,1),this.removeBodyEvent.body=t,t.resetConstraintVelocity(),this.emit(this.removeBodyEvent),this.removeBodyEvent.body=null)}},i.prototype.getBodyById=function(t){for(var e=this.bodies,o=0;o<e.length;o++){var i=e[o];if(i.id===t)return i}return!1},i.prototype.disableBodyCollision=function(t,e){this.disabledBodyCollisionPairs.push(t,e)},i.prototype.enableBodyCollision=function(t,e){for(var o=this.disabledBodyCollisionPairs,i=0;i<o.length;i+=2)if(o[i]===t&&o[i+1]===e||o[i+1]===t&&o[i]===e)return void o.splice(i,2)},i.prototype.clear=function(){this.time=0,this.solver&&this.solver.equations.length&&this.solver.removeAllEquations();for(var t=this.constraints,e=t.length-1;e>=0;e--)this.removeConstraint(t[e]);var o=this.bodies;for(e=o.length-1;e>=0;e--)this.removeBody(o[e]);var n=this.springs;for(e=n.length-1;e>=0;e--)this.removeSpring(n[e]);var r=this.contactMaterials;for(e=r.length-1;e>=0;e--)this.removeContactMaterial(r[e]);i.apply(this)};var w=r.create(),S=(r.fromValues(0,0),r.fromValues(0,0));i.prototype.hitTest=function(t,e,o){o=o||0;var i=new u({position:t}),n=new l,p=t,d=w,f=S;i.addShape(n);for(var v=this.narrowphase,y=[],m=0,g=e.length;m!==g;m++)for(var A=e[m],b=0,E=A.shapes.length;b!==E;b++){var B=A.shapes[b];r.rotate(d,B.position,A.angle),r.add(d,d,A.position);var q=B.angle+A.angle;(B instanceof s&&v.circleParticle(A,B,d,q,i,n,p,0,!0)||B instanceof a&&v.particleConvex(i,n,p,0,A,B,d,q,!0)||B instanceof c&&v.particlePlane(i,n,p,0,A,B,d,q,!0)||B instanceof h&&v.particleCapsule(i,n,p,0,A,B,d,q,!0)||B instanceof l&&r.squaredLength(r.sub(f,d,t))<o*o)&&y.push(A)}return y},i.prototype.setGlobalStiffness=function(t){for(var e=this.constraints,o=0;o!==e.length;o++)for(var i=e[o],n=0;n!==i.equations.length;n++){var r=i.equations[n];r.stiffness=t,r.needsUpdate=!0}var s=this.contactMaterials;for(o=0;o!==s.length;o++){(i=s[o]).stiffness=i.frictionStiffness=t}(i=this.defaultContactMaterial).stiffness=i.frictionStiffness=t},i.prototype.setGlobalRelaxation=function(t){for(var e=0;e!==this.constraints.length;e++)for(var o=this.constraints[e],i=0;i!==o.equations.length;i++){var n=o.equations[i];n.relaxation=t,n.needsUpdate=!0}for(e=0;e!==this.contactMaterials.length;e++){(o=this.contactMaterials[e]).relaxation=o.frictionRelaxation=t}(o=this.defaultContactMaterial).relaxation=o.frictionRelaxation=t};var C=new v,L=[];i.prototype.raycast=function(t,e){return e.getAABB(C),this.broadphase.aabbQuery(this,C,L),e.intersectBodies(t,L),L.length=0,t.hasHit()}},{"../../package.json":6,"../collision/AABB":7,"../collision/Broadphase":8,"../collision/Narrowphase":10,"../collision/Ray":11,"../collision/SAPBroadphase":13,"../constraints/Constraint":14,"../constraints/DistanceConstraint":15,"../constraints/GearConstraint":16,"../constraints/LockConstraint":17,"../constraints/PrismaticConstraint":18,"../constraints/RevoluteConstraint":19,"../events/EventEmitter":26,"../material/ContactMaterial":27,"../material/Material":28,"../math/vec2":30,"../objects/Body":31,"../objects/LinearSpring":32,"../objects/RotationalSpring":33,"../shapes/Capsule":38,"../shapes/Circle":39,"../shapes/Convex":40,"../shapes/Line":42,"../shapes/Particle":43,"../shapes/Plane":44,"../shapes/Shape":45,"../solver/GSSolver":46,"../solver/Solver":47,"../utils/OverlapKeeper":52,"../utils/Utils":57,"./IslandManager":59}]},{},[36])(36)});
function famobi_LevelStars(e,o){console.log("Level "+e+" Done, "+o+" Stars Won")}function famobi_InUse(){"undefined"!=typeof window&&window.famobi&&(Monetisation_IsFamobi=1,Monetisation_PHPpath="https://formulafever.famobi.com/php/"+Game_ID_String+"_")}function famobi_getMoreGamesButtonImage(){return famobi.getMoreGamesButtonImage()}function famobi_moreGamesLink(){famobi.moreGamesLink()}!function(e,o){this.famobi_score={levelScores:{},currentScore:0,storageItemName:"levelScores",init:function(){this.levelScores=(scores=window.famobi.localStorage.getItem(this.storageItemName))?JSON.parse(scores):{},famobi.log("init",this.levelScores)},getTotalScore:function(e){var o=0;for(level in this.levelScores)e&&level==e||(o+=parseInt(this.levelScores[level]||0));return o},getLevelScore:function(e){return this.levelScores[e]||0},setLevelScore:function(e,o){e&&(this.levelScores[e]=Math.max(parseInt(this.levelScores[e]||0),parseInt(o||0)),window.famobi.localStorage.setItem(this.storageItemName,JSON.stringify(this.levelScores)))},setCurrentScore:function(e){this.currentScore=e||0},getCurrentScore:function(){return this.currentScore},clean:function(){this.levelScores={},window.famobi.localStorage.removeItem(this.storageItemName)}}}(0,window),window.famobi_score.init();
var lastLevelPlayed=0,CompString=["TWljcm9zb2Z0LlhNTEhUVFA=","c3RhcnRfcG9zOiA=","ZGF0YXMvbG9jYWxpc2F0aW9uLw==","TmF2aWdhdG9yIExhbmd1YWdlOiA=","bG9jYWxlPQ==","TG9jYWxQb3M6IA==","TmF2aWdhdG9yIEZvcmNlZCBMYW5ndWFnZTogJw==","dW5kZWZpbmVk","VW5tYXRjaGVkIHRyYWlsIHN1cnJvZ2F0ZSBhdCA=","VW5tYXRjaGVkIGxlYWQgc3Vycm9nYXRlIGF0IA==","S2V2aW4gdmFuIFpvbm5ldmVsZA==","NmU2NThkNGJmY2I1OWNjMTNmOTZjMTQ0NTBhYzQwYjk=","PiBzZWdtZW50czog","UG9seUVuZA==","c2VnbWVudHMgbG9hZGVk","ZGF0YXMvbGV2ZWxzLw==","LmM0ZC50eHQ=","TmVhcmVzdFBvaW50WA==","Q2hlY2tJbnRlcnNlY3RfQ2lyY2xlU2VnbWVudHM=","ZGlzdGFuY2U6IA==","Q2hlY2tJbnRlcnNlY3RfTGluZVNlZ21lbnRz","Q2hlY2tJbnRlcnNlY3RfTGluZVNlZ21lbnRzIENvbERpckNvdW50","LCBDb2xEaXJY","LENvbERpclkg","Q2hlY2tJbnRlcnNlY3RfTGluZVNlZ21lbnRzSGVpZ2h0cyA=","Q2hlY2tJbnRlcnNlY3RfTGluZVNlZ21lbnRzSGVpZ2h0cyBkZW5vbSBPSw==","Q2hlY2tJbnRlcnNlY3RfTGluZVNlZ21lbnRzSGVpZ2h0cyB1YSA8IDAgfHwgdWEgPiAxIHx8IHViIDwgMCB8fCB1YiA+IDEgT0s=","Q2hlY2tJbnRlcnNlY3RfTGluZVNlZ21lbnRzSGVpZ2h0cyBDb2xEaXJDb3VudA==","Q29saXpfQ2lyY2xlVG9TdGF0aWM=","QXNoIHRvIG11Y2g=","U3RhdGljIENvdW50IGluIEhhc2ggdnMgRXZpbCA=","dG91Y2hzdGFydA==","dG91Y2htb3Zl","dG91Y2hlbmQ=","dG91Y2hjYW5jZWw=","dG91Y2hsZWF2ZQ==","a2V5ZG93bg==","PiBlLmtleUNvZGU+IA==","a2V5cHJlc3M=","PiBrZXlwcmVzcz4g","bnVtYmVy","c3RhbmRhcmRzIGNvbXBsaWFudCBtb2Rl","ZnVuY3Rpb24=","TW9uZXRpc2F0aW9uX19TaG93QWRfUmVxdWVzdA==","TW9uZXRpc2F0aW9uX19Nb3JlR2FtZXNfTGlua0NsaWNrZWQ=","Y2hyb21l","c2FmYXJp","YW5kcm9pZA==","aXBob25l","a2Zzb3dp","dGFibGV0","bW9iaWxl","YmxhY2tiZXJyeQ==","b3BlcmEgbWluaQ==","d2luZG93cyBtb2JpbGU=","d2luZG93cyBwaG9uZQ==","aWVtb2JpbGU=","VXNlcklE","VXNlcktleQ==","VXNlckF2YXRhcg==","VXNlck5hbWU=","U2NvcmVzVGFibGUgW1BsYXllclJhbmtdOiA=","U2NvcmVzVGFibGUgWw==","Z2V0X3Njb3Jlcy5waHA/Y2F0PQ==","Jm1heHNjb3JlPQ==","U3VibWl0X1Njb3JlIA==","U0NPUkVfU3VibWl0IEVSUk9SOiA=","U0NPUkVfU3VibWl0OiA=","dXBkYXRlX3Njb3Jlcy5waHA/aWQ9","Jm5hbWU9","JmF2YXRhcj0=","JmVtYWlsPQ==","JnNjb3JlPQ==","JnNjb3Jla2V5PQ==","U3VibWl0X1Njb3JlOg==","b3ZlcmxheQ==","RGlhbEJveA==","YWxwaGEob3BhY2l0eT0=","T3ZlcmxheUZyYW1l","SW5pdCBHYW1lUGFkcyA=","Z2FtZXBhZGNvbm5lY3RlZA==","Z2FtZXBhZGRpc2Nvbm5lY3RlZA==","Rm91bmQg","IEdhbWVQYWRz","Z2FtZXBhZHMg","b2JqZWN0","YnV0dG9uUHJlc3NlZCA=","KioqQ0FOVCBTaGFkZXJzX1VzZVs=","YVZlcnRleFBvc2l0aW9u","YVZlcnRleE5vcm1hbA==","YVRleHR1cmVDb29yZA==","dVBNYXRyaXg=","dU1WTWF0cml4","dU5NYXRyaXg=","Q2FtTWF0cml4","VGV4dHVyZTA=","VGV4dHVyZTE=","VGV4dHVyZTI=","Qm9uZXNQb3NpdGlvbg==","Qm9uZXNMb29rQXQ=","dUNvbG9ycw==","bGlnaHREaXJlY3Rpb24=","dVNoYWRvd01hdHJpeA==","UGFydGljbGVEYXRh","XG5cblxuXG5DcmVhdGVfU2hhZGVyUHJvZ1s=","RXJyb3IgQ29tcGlsZSBWZXJ0ZXggU2hhZGVyIFs=","RXJyb3IgQ29tcGlsZSBGcmFnbWVudCBTaGFkZXIgWw==","Q291bGQgbm90IGluaXRpYWxpc2Ugc2hhZGVycw==","ZGF0YXMvc2hhZGVycy8=","c2ltcGxl","c2ltcGxlX2NvbG9y","b25seV9jb2xvcg==","c2hhZG93","c2ltcGxlX3NoYWRvdw==","c2tpbm5lZF9jb2xvcg==","c2tpbm5lZF9vdXRsaW5l","c2tpbm5lZF9saWdodA==","d2F0ZXJfZm9hbQ==","dGV4dHVyZV9saWdodA==","Y2xpcGVk","Y2xpcGVkX3RleHR1cmU=","d2F0ZXJfcmVmcmFjdGlvbg==","c2tpbm5lZF9jbGlwZWQ=","c2tpbm5lZF9saWdodF9zaGFkb3c=","dGV4dHVyZV9saWdodF9zaGFkb3c=","Y2xpcGVkX3RleHR1cmVfc2hhZG93","cGFydGljbGU=","SW5pdFNwcml0ZXNCdWZmZXJz","aGFuZGxlTG9hZGVkVGV4dHVyZSA=","Tm8gUG93ZXIgT2YgVHdvWw==","TmV3IFNpemUg","Y2FudmFz","ZGF0YXMv","Rm91bmQgRHVwbGlhY3RlIFRleHR1cmVb","SW5pdE9uZVRleHR1cmVb","QW5vbnltb3Vz","SW52YWxpZCBwb3BNYXRyaXgh","U3ByaXRlX0RyYXdCb3gg","U3ByaXRlQnV0dG9uX0RyYXcg","ISFTcHJpdGVfRHJhdyA=","IUFkZGluZyBXYWxsIA==","TG9hZE9iamVjdFRleHR1cmU6IA==","ZXhwb3J0Lw==","dGV4dHVyZXMv","T2JqZWN0X0RyYXcgWw==","XTogU3ViPQ==","RHJhd0VsZW1lbnRzIFs=","XSBJbmRleE51bUl0ZW09","R290IE9iamVjdCBvdmVyd3JpdGVu","T2JqZWN0X0xvYWRb","cmVhZHlTdGF0ZVs=","TWFya2Vy","ZXhjbHVkZQ==","RWxlbWVudF8=","RWxlbWVudF9PSUw=","RWxlbWVudF9DT0lO","RWxlbWVudF9CT09TVA==","RWxlbWVudF9JQ0U=","RWxlbWVudF9MYW1w","Z290IEVsZW1lbnQ=","QUlfUGF0aF9B","QWlfUGF0aF9BX0NvdW50IA==","QWlfUGF0aF9BIHgg","QWlfUGF0aF9BIHog","Z290IEFJIFBhdGg=","RmluaXNoaW5nIFN1Yk9iaiA=","VHJpYW5nbGVzIA==","VmVydGV4cyA=","bm9fc2hhZG93","ISEhISEhISEgV2FsbCBTdWJPYmplY3Q6IA==","VGVtcFNUUkJbMF06IA==","VGVtcFNUUkJbMV06IA==","VGVtcFNUUkJbMl06IA==","VGVtcFNUUkJbM106IA==","R290IFVWczog","R290IHZlY3RvciBDdXJyZW50VmVydGV4OiA=","R290IHZlY3Rvcjog","R290IFN1Yk9iamVjdDog","ZGF0YXMvb2JqZWN0cy8=","TWVzaF9BZGRFbGVtZW50IFs=","VGV4dHVyZU5hbWU6","U0hBREVSOg==","V2UgSEFWZSBFRkZFQ1QgIQ==","bm9saWdodA==","dGhlIGNvbnRlbnQgTGluZXM=","QWRkaW5nIE1hdGVyaWFsOg==","RWxlbWVudCA=","RG9uZSBMb2FkaW5nOg==","VU5TRU5UOiA=","T1BFTkVEOiA=","SEVBREVSU19SRUNFSVZFRDog","TE9BRElORzog","Qm9uZUxhYl9HZW5lcmF0ZU1lc2gg","b25yZWFkeXN0YXRlY2hhbmdlIFs=","TG9hZGVkITog","U2V0X0JvbmU=","XG5cbkZvdW5kQm9uZSA=","UGFyZW50","UGFyZW50IA==","TGVuZ2h0","TGVuZ2h0IA==","SXNTcHJpbmc=","SXNTcHJpbmcg","U3ByaW5nU3BlZWQ=","U3ByaW5nU3BlZWQg","U3ByaW5nRGFtcGVy","U3ByaW5nRGFtcGVyIA==","TWF0cml4IA==","TWF0cml4UmVsYSA=","TWF0cml4SW52ZXJzZSA=","VmVydGV4X0NvdW50","RnJvdW5kIFZFUlRFWDog","VHJpYW5nbGVzX0NvdW50","RnJvdW5kIFRyaWFuZ2xlczog","RG9uZSBMb2FkZWQhOiA=","XG5cblxuXG5cblxuXG4qKioqKioqKiogb250aW1lb3V0IDo=","XG5cblxuXG5cblxuXG4=","ZGF0YXMvYm9uZWxhYi8=","Qm9uZUNvdW50","Qm9uZUFuaW1fTG9hZEFuaW1b","bGVuZ3RoIA==","U2V0RnJhbWU=","Rm91bmQgRnJhbWUg","Rm91bmQgTWF0cml4IA==","cXdlcnR5dWlvcGFzZGZnaGprbC56eGN2Ym5tIT9RV0VSVFlVSU9QQVNERkdISktMLFpYQ1ZCTk06OzAxMjM0NTY3ODkmLS86OygpJF8lQCMuLD8hLS8uIA==","YXplcnR5dWlvcHFzZGZnaGprbG13eGN2Ym4hPy5BWkVSVFlVSU9QUVNERkdISktMTVdYQ1ZCTiwtLjAxMjM0NTY3ODkmLS86OygpJF8lQCMuLD8hLS8uIA==","cXdlcnR6dWlvcGFzZGZnaGprbC55eGN2Ym5tIT9RV0VSVFpVSU9QQVNERkdISktMLFlYQ1ZCTk06OzAxMjM0NTY3ODkmLS86OygpJF8lQCMuLD8hLS8uIA==","PiBrZXlzPiA=","PiBLZXlUb0Rpc3BsYXk+IA==","Z290IG51bWJlcjo=","Zm9udF91bmljb2Rl","Rm9udF9Jbml0","Zm9udHMv","Y2hhcklkPQ==","dXZTdGFydD0=","dXZFbmQ9","eE9mZnNldD0=","eU9mZnNldD0=","eEFkdmFuY2U9","Z290IEZpbGU6IEN1cnJlbnRHbHlwaCA=","ZGF0YXMvZm9udHMv","RHJhd09uZUdseXBoOg==","c3RyLmNoYXJDb2RlQXQo","PiBrZXlz","PiBHbG9iYWxLZXk=","U291bmQ6IEluaXQ=","V2ViIEF1ZGlvIEFQSSBpcyBub3Qgc3VwcG9ydGVkIGluIHRoaXMgYnJvd3Nlcg==","YXVkaW8vbXAz","U291bmQ6IGV4dDo=","YXVkaW8vb2dn","YXVkaW8vbXA0","U291bmQgTm90IFN1cHBvcnRlZA==","YXJyYXlidWZmZXI=","U291bmQ6IGxvYWQ6","TXVzaWNTdHJlYW1QbGF5ZXI=","TXVzaXF1ZTogY3JlYXRlRWxlbWVudA==","TXVzaXF1ZTogbXlNdXNpYy5jYW5QbGF5VHlwZQ==","cHJvYmFibHk=","YXVkaW8vb2dnOyBjb2RlY3M9InZvcmJpcyI=","c291cmNl","ZGF0YXMvbXVzaWNzLw==","TXVzaXF1ZTo=","ZGF0YXMvcmVzb3VyY2VzLnR4dD8=","TG9hZGVyOiBTb3VuZFs=","ZGF0YXMvc291bmRzLw==","TG9hZGVyOiBCb25lTGFiIERMQiBb","KioqKiBMb2FkZXI6IEJvbmVMYWIgQkxBIFs=","aXNCTEEg","XG5EYXRhUGF0aA==","XG4qKioqKioqXG5Mb2FkZXJfTG9hZGluZ1RocmVhZCBTVE9QXG4qKioqKioq","MTExMTAxMTAxMTAxMTEx","MDAxMDExMDAxMDAxMDAx","MTExMDAxMTExMTAwMTEx","MTExMDAxMDExMDAxMTEx","MTAxMTAxMTExMDAxMDAx","MTExMTAwMTExMDAxMTEx","MTExMTAwMTExMTAxMTEx","MTExMDAxMDAxMDAxMDAx","MTExMTAxMTExMTAxMTEx","MTExMTAxMTExMDAxMDAx","RExHIEluaXQgV2ViR0w=","ZXhwZXJpbWVudGFsLXdlYmds","d2Via2l0LTNk","bW96LXdlYmds","RExHX1dlYkdMIEluaXQgd2l0aDog","RExHX1dlYkdMIFNpemU6IA==","PGRpdiBjbGFzcz0iRXJyb3JESVYiIGlkPSJkbGctZXJyb3ItZGl2Ij5Db3VsZCBub3QgaW5pdGlhbGlzZSBXZWJHTDwvc3Bhbj48YnI+WW91ciBicm93c2VyIHNlZW0gdG8gbm90IHN1cHBvcnQgM0QgcmVuZGVyaW5nPGJyPlBsZWFzZSB0cnkgYWdhaW4gd2l0aCBGaXJlZm94IG9yIEdvb2dsZSBDaHJvbWU8L2Rpdj4=","V2ViR0xfRXJyb3I=","MTAwLjAl","U2NyZWVuOg==","d2luZG93Lm9ucmVzaXpl","b3JpZW50YXRpb25jaGFuZ2U=","T3JpZW50YXRpb24gQ2hhbmdl","QXBwbHkgT3JpZW50YXRpb24gQ2hhbmdl","ZGxnLXdlYmdsLWNhbnZhcw==","MTI3LjAuMC4x","TVBfVXBkYXRlVXNlckxpc3Qg","TVBfUHJvY2Vzc0FjdGlvbjog","ZGxnX3Byb3RvY29s","Q29ubmVjdGlvbiBFcnJvcg==","Q2xpZW50IENsb3NlZA==","c3RyaW5n","UmVjZWl2ZWQ6ICc=","R290IE15IElEOg==","TXVsdGlwbGF5ZXIgPlNlcnZlciBJUDog","c2VydmVyX2lwLnR4dD8=","V0VCR0xfZGVwdGhfdGV4dHVyZQ==","VHJ1Y2tUcmlhbHM=","PzAuOTMwMQ==","VHJ1Y2tUcmlhbHNfQmV0YTQ=","UGxlYXNlIHdhaXQsIGxvYWRpbmcuLi4=","TG9hZGluZyBMZXZlbA==","VG91Y2ggVG8gU3RhcnQ=","Q2xpY2sgVG8gU3RhcnQ=","VHJ1Y2sgVHJpYWxz","qUZBTU9CSSBJTkMu","RU5HSU5FIENPRElORywgR1JBUEhJQ1M=","RGFuaWVsIExhYnJpZXQsIERhbkxhYkdhbWVz","UFJPRFVDVElPTiwgQlVTSU5FU1MgREVWLg==","SnVsaWVuIERvbmd1eSwgQWRBc0dhbWU=","VEVTVEVSUw==","TOlhLCBFbW1hLCBNb25zaWV1ciBTLg==","U2VsZWN0IGEgVFJVQ0s=","U2VsZWN0IGEgTEVWRUw=","UEFVU0VE","V0VMTCBET05F","QlVTVEVE","RW50ZXIgWW91ciBOaWNrbmFtZQ==","TkVXIENBUg==","VU5MT0NLRUQ=","U01vdGhjYWFhYWEh","U3RhdGlj","QWRkIE1hdDog","QWRkIE1hdDog","Rm91bmQgTWF0ZXJpYWw6IA==","QWRkIEdvbGRCYWc6IA==","QWRkIEdvbGRCYWc6IA==","UG9zWDog","UG9zWTog","QWRkIFdoZWVsOiA=","QWRkIFdoZWVsOiA=","UmFkaXVzOiA=","QWRkIFBvbHk6IA==","QWRkIFBvbHk6IA==","U2l6ZVg6IA==","U2l6ZVk6IA==","VmVydDog","Rm91bmQgUG9seWdvbmUgT2JqZWN0OiA=","Pj4+IFZlY3RvcnMgWw==","Pj4+IEluZGV4IFs=","Pj4+IFN2","U3ZfQUxUOiA=","U3ZfQUxUOiA=","Pj4+IFNTdl9BTFQ=","QnJpZGdl","QmFycmVs","Q3J1bmNoYWJsZQ==","QmFja2dyb3VuZA==","UGluUG9pbnQ=","UGluZ1Bvbmc=","VXBEb3du","TGV2ZWxfU3RhcnQ=","TGV2ZWxfRW5k","QnJpZGdlX1N0YXJ0","Pj4+IEdvdCBCcmlkZ2UgU3RhcnQ=","QnJpZGdlX0NodW5r","Pj4+IEdvdCBCcmlkZ2UgQ2h1bms=","QnJpZGdlX0VuZA==","Pj4+IEdvdCBCcmlkZ2UgRW5k","QWRkIFBsYW5lOiA=","QWRkIFBsYW5lOiA=","T2Zmc2V0eDog","T2Zmc2V0eTog","Rm91bmQgUGxhbmUgT2JqZWN0OiA=","R290IExldmVsWw==","ZGF0YXMvbGV2ZWxzL2xldmVsXw==","ZGF0YXMvdGV4dHVyZXMvY2FyX2JvZHlf","Vm9pdHVyZV9hbHQ=","Q3J1bmNoT2JqZWN0IFBvbHlCb2R5LnNoYXBlcy5sZW5ndGg6IA==","Q3J1bmNoT2JqZWN0IDog","R2FtZV9HYW1lT3Zlcg==","XSBBbHRCLnZlbG9jaXR5WzFdIDog","VXNlclNvdW5k","VXNlck11c2lj","TWF4TGV2ZWw=","QmVzdFNjb3Jl","cGxfU2NvcmVUb3A=","Uk9CRVJUTzt0ZXh0dXJlcy9hdmF0YXJfZGVmYXVsdC5wbmc7MTIzNDU2Nzg5Ozc1NyxEQU47dGV4dHVyZXMvYXZhdGFyX2RlZmF1bHQucG5nOzEyMzQ1Njc5OzY2MSxKVUxJRU47dGV4dHVyZXMvYXZhdGFyX2RlZmF1bHQucG5nOzEyMzQ1ODk7NjAwLEJKT1JOO3RleHR1cmVzL2F2YXRhcl9kZWZhdWx0LnBuZzsxMjM3ODk7NTU5LEpFQU4gUElFUlJFOzE7MTIzODk7NDc4LFNBTVVFTDt0ZXh0dXJlcy9hdmF0YXJfZGVmYXVsdC5wbmc7MTI4OTs0MDksSUdHWTt0ZXh0dXJlcy9hdmF0YXJfZGVmYXVsdC5wbmc7MTI5OzMxMyxQQUJMTzt0ZXh0dXJlcy9hdmF0YXJfZGVmYXVsdC5wbmc7MTIzOzIyMixSSUNLWTt0ZXh0dXJlcy9hdmF0YXJfZGVmYXVsdC5wbmc7MTIxOzIwOCxMRUE7dGV4dHVyZXMvYXZhdGFyX2RlZmF1bHQucG5nOzEyMDsxMzYsRU1NQTt0ZXh0dXJlcy9hdmF0YXJfZGVmYXVsdC5wbmc7MTI7MTM1LA==","U3RhcnNMZXZlbA==","ZGF0YXMvdGV4dHVyZXMvYXZhdGFycy8=","SGlnaCBzY29yZXMgU2Nyb2xs","UHJlZl9Vc2VyX0F2YXRhciA=","VXNlciBOYW1lIEVkaXRlZA==","ZGF0YXMvdGV4dHVyZXMvbG9nb19mYW1vYmkucG5n","ZGF0YXMvdGV4dHVyZXMvbG9nb19kYW5sYWJnLnBuZw==","ZGF0YXMvdGV4dHVyZXMvbG9nb19hZGFzZ2FtZS5wbmc=","MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAw","TXVzaWMgU3dpdGNoIE9GRg==","TXVzaWMgU3dpdGNoIE9O","U291bmQgU3dpdGNoIE9GRg==","U291bmQgU3dpdGNoIE9O","ZGF0YXMvdGV4dHVyZXMvaHRtbDVnYW1lc19sb2dvLnBuZw==","aHR0cDovL2h0bWw1Z2FtZXMuY29tLw==","R2FtZV9HYW1lT3Zlcl9TaG93U2NvcmVCb2FyZA==","R2FtZV9HYW1lT3Zlcl9MZXZlbFNlbGVjdGlvbg==","R2FtZV9HYW1lT3Zlcl9SZXN0YXJ0TGV2ZWw=","R2FtZV9MZXZlbF9Eb25lWw==","XSBTdGFyczo=","R2FtZV9MZXZlbERvbmVfTGV2ZWxTZWxlY3Rpb24=","R2FtZV9MZXZlbERvbmVfTmV4dExldmVs","R2FtZV9MZXZlbERvbmVfUmVzdGFydExldmVs","R2FtZV9Jbml0","aW5nYW1l","VG90YWxUcmlhbmdsZXMg","TW91c2Ug","S2V5QiBNb3VzZSA=","UGh5c2ljX0JvZHlDb3VudCA=","R2FtZVZlcnNpb246IA==","UmVzb3VyY2VDb3VudCA=","TG9hZGVyUG9zaXRpb24g","RGF0YVRvRG93bmxvYWQg","SW1hZ2VUb0Rvd25sb2FkIA==","TWVzaFRvRG93bmxvYWQg","QW5pbVRvRG93bmxvYWQg","U291bmRUb0Rvd25sb2FkIA==","TXVzaWMgUGF1c2VkOiA=","RGV2aWNlIFBpeGVsIFJhdGlvIA==","R2xvYmFsS2V5IA==","RGVsdGFUaW1lIA==","VG91Y2ggWw=="];function _Tx(e){return atob(CompString[e])}var v162="en";function f1(e){var t;(t=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject(_Tx(0))).onreadystatechange=function(){var v=new RegExp("^file:","i").test(t.responseURL);if(4==t.readyState&&(200==t.status||v&&0===t.status)){v162=e+"";var r=t.responseText.split("\n");if(r.length<3)return;var a=0;for(i=0;i<r.length;i++){var n=r[i],o=n.indexOf('"')+1;if(1==o){famobi.log(_Tx(1)+o);var f=n.indexOf('"',o),s=n.substring(o,f);v289[a]=s,a++}}}},t.open("GET",_Tx(2)+e+".txt",!0),t.send()}function f32(){return famobi.getCurrentLanguage()}function f5(){var e=f32();-1!=e.search("fr")&&f1("fr"),-1!=e.search("de")&&f1("de"),-1!=e.search("es")&&f1("es"),-1!=e.search("nl")&&f1("nl"),-1!=e.search("pl")&&f1("pl"),-1!=e.search("pt")&&f1("pt"),-1!=e.search("ru")&&f1("ru"),-1!=e.search("tr")&&f1("tr")}function f222(e){if(null===e||typeof e===_Tx(7))return"";var t,v,r,a=e+"",n="";t=v=0,r=a.length;for(var o=0;o<r;o++){var i=a.charCodeAt(o),f=null;if(i<128)v++;else if(i>127&&i<2048)f=String.fromCharCode(i>>6|192,63&i|128);else if(55296!=(63488&i))f=String.fromCharCode(i>>12|224,i>>6&63|128,63&i|128);else{if(55296!=(64512&i))throw new RangeError(_Tx(8)+o);var s=a.charCodeAt(++o);if(56320!=(64512&s))throw new RangeError(_Tx(9)+(o-1));i=((1023&i)<<10)+(1023&s)+65536,f=String.fromCharCode(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}null!==f&&(v>t&&(n+=a.slice(t,v)),n+=f,t=v=o+1)}return v>t&&(n+=a.slice(t,r)),n}function md5(e){var t,v,r,a,n,o,i,f,s,l,u,c=function(e,t){return e<<t|e>>>32-t},d=function(e,t){var v,r,a,n,o;return a=2147483648&e,n=2147483648&t,o=(1073741823&e)+(1073741823&t),(v=1073741824&e)&(r=1073741824&t)?2147483648^o^a^n:v|r?1073741824&o?3221225472^o^a^n:1073741824^o^a^n:o^a^n},x=function(e,t,v,r,a,n,o){return e=d(e,d(d(function(e,t,v){return e&t|~e&v}(t,v,r),a),o)),d(c(e,n),t)},g=function(e,t,v,r,a,n,o){return e=d(e,d(d(function(e,t,v){return e&v|t&~v}(t,v,r),a),o)),d(c(e,n),t)},h=function(e,t,v,r,a,n,o){return e=d(e,d(d(function(e,t,v){return e^t^v}(t,v,r),a),o)),d(c(e,n),t)},B=function(e,t,v,r,a,n,o){return e=d(e,d(d(function(e,t,v){return t^(e|~v)}(t,v,r),a),o)),d(c(e,n),t)},T=function(e){var t,v="",r="";for(t=0;t<=3;t++)v+=(r="0"+(e>>>8*t&255).toString(16)).substr(r.length-2,2);return v};for(f=1732584193,s=4023233417,l=2562383102,u=271733878,t=(v=function(e){for(var t,v=e.length,r=v+8,a=16*((r-r%64)/64+1),n=new Array(a-1),o=0,i=0;i<v;)o=i%4*8,n[t=(i-i%4)/4]=n[t]|e.charCodeAt(i)<<o,i++;return o=i%4*8,n[t=(i-i%4)/4]=n[t]|128<<o,n[a-2]=v<<3,n[a-1]=v>>>29,n}(e=this.f222(e))).length,r=0;r<t;r+=16)a=f,n=s,o=l,i=u,f=x(f,s,l,u,v[r+0],7,3614090360),u=x(u,f,s,l,v[r+1],12,3905402710),l=x(l,u,f,s,v[r+2],17,606105819),s=x(s,l,u,f,v[r+3],22,3250441966),f=x(f,s,l,u,v[r+4],7,4118548399),u=x(u,f,s,l,v[r+5],12,1200080426),l=x(l,u,f,s,v[r+6],17,2821735955),s=x(s,l,u,f,v[r+7],22,4249261313),f=x(f,s,l,u,v[r+8],7,1770035416),u=x(u,f,s,l,v[r+9],12,2336552879),l=x(l,u,f,s,v[r+10],17,4294925233),s=x(s,l,u,f,v[r+11],22,2304563134),f=x(f,s,l,u,v[r+12],7,1804603682),u=x(u,f,s,l,v[r+13],12,4254626195),l=x(l,u,f,s,v[r+14],17,2792965006),f=g(f,s=x(s,l,u,f,v[r+15],22,1236535329),l,u,v[r+1],5,4129170786),u=g(u,f,s,l,v[r+6],9,3225465664),l=g(l,u,f,s,v[r+11],14,643717713),s=g(s,l,u,f,v[r+0],20,3921069994),f=g(f,s,l,u,v[r+5],5,3593408605),u=g(u,f,s,l,v[r+10],9,38016083),l=g(l,u,f,s,v[r+15],14,3634488961),s=g(s,l,u,f,v[r+4],20,3889429448),f=g(f,s,l,u,v[r+9],5,568446438),u=g(u,f,s,l,v[r+14],9,3275163606),l=g(l,u,f,s,v[r+3],14,4107603335),s=g(s,l,u,f,v[r+8],20,1163531501),f=g(f,s,l,u,v[r+13],5,2850285829),u=g(u,f,s,l,v[r+2],9,4243563512),l=g(l,u,f,s,v[r+7],14,1735328473),f=h(f,s=g(s,l,u,f,v[r+12],20,2368359562),l,u,v[r+5],4,4294588738),u=h(u,f,s,l,v[r+8],11,2272392833),l=h(l,u,f,s,v[r+11],16,1839030562),s=h(s,l,u,f,v[r+14],23,4259657740),f=h(f,s,l,u,v[r+1],4,2763975236),u=h(u,f,s,l,v[r+4],11,1272893353),l=h(l,u,f,s,v[r+7],16,4139469664),s=h(s,l,u,f,v[r+10],23,3200236656),f=h(f,s,l,u,v[r+13],4,681279174),u=h(u,f,s,l,v[r+0],11,3936430074),l=h(l,u,f,s,v[r+3],16,3572445317),s=h(s,l,u,f,v[r+6],23,76029189),f=h(f,s,l,u,v[r+9],4,3654602809),u=h(u,f,s,l,v[r+12],11,3873151461),l=h(l,u,f,s,v[r+15],16,530742520),f=B(f,s=h(s,l,u,f,v[r+2],23,3299628645),l,u,v[r+0],6,4096336452),u=B(u,f,s,l,v[r+7],10,1126891415),l=B(l,u,f,s,v[r+14],15,2878612391),s=B(s,l,u,f,v[r+5],21,4237533241),f=B(f,s,l,u,v[r+12],6,1700485571),u=B(u,f,s,l,v[r+3],10,2399980690),l=B(l,u,f,s,v[r+10],15,4293915773),s=B(s,l,u,f,v[r+1],21,2240044497),f=B(f,s,l,u,v[r+8],6,1873313359),u=B(u,f,s,l,v[r+15],10,4264355552),l=B(l,u,f,s,v[r+6],15,2734768916),s=B(s,l,u,f,v[r+13],21,1309151649),f=B(f,s,l,u,v[r+4],6,4149444226),u=B(u,f,s,l,v[r+11],10,3174756917),l=B(l,u,f,s,v[r+2],15,718787259),s=B(s,l,u,f,v[r+9],21,3951481745),f=d(f,a),s=d(s,n),l=d(l,o),u=d(u,i);return(T(f)+T(s)+T(l)+T(u)).toLowerCase()}var ColizWord=new Array,v163=new Array,v164=new Array,v238=0,v196=0;function f223(){this.HashCount_X=1,this.HashCount_Y=1,this.HashSize_X=0,this.HashSize_Y=0,this.HashPos_Left=0,this.HashPos_Right=0,this.HashPos_Top=0,this.HashPos_Bottom=0,this.HashDetected=0,this.HashDetectedCount=0,this.StaticSegments,this.StaticSegmentsCount=0,this.HashStaticsList,this.Dyna_ax=0,this.Dyna_bx=0,this.Dyna_cx=0,this.Dyna_dx=0,this.Dyna_ay=0,this.Dyna_by=0,this.Dyna_cy=0,this.Dyna_dy=0}function f174(){this.ax=0,this.ay=0,this.bx=0,this.by=0}var v131,v132,v17=0;function f10(e){var t;v17++,(t=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")).onreadystatechange=function(){if(4==t.readyState){for(var e=t.responseText.split("\n"),v=1,r=0,a=0,n=0,o=0,i=0,f=0,s=0;s<e.length;s++){if(0==e[s].search("Sv:")){var l=e[s].split(" ");i=parseFloat(l[1]),f=parseFloat(l[2]),1==v?(v=0,r=i,a=f):f22(i,f,n,o),n=i,o=f}0==e[s].search(_Tx(13))&&(v=1,f22(r,a,n,o))}famobi.log(_Tx(14)),v17--}},t.open("GET",_Tx(15)+e+_Tx(16)+v222,!0),t.send()}function f131(){ColizWord=[],(ColizWord=new f223).StaticSegmentsCount=0,ColizWord.HashDetected=new Array;for(var e=0;e<20;e++)ColizWord.HashDetected.push;ColizWord.StaticSegments=new Array,ColizWord.HashStaticsList=new Array;for(e=0;e<1e4;e++)ColizWord.HashStaticsList.push,ColizWord.HashStaticsList[e]=new Array;for(e=0;e<100;e++)v163.push,v164.push}function f42(e,t,v,r,a,n){v131=0,v132=0;var o,i,f=a-v,s=n-r,l=f*f+s*s,u=-1;0!=l&&(u=((e-v)*f+(t-r)*s)/l),u<0?(o=v,i=r):u>1?(o=a,i=n):(o=v+u*f,i=r+u*s),v131=o,v132=i;var c=e-o,d=t-i;return Math.sqrt(c*c+d*d)}function f2(e,t,v,r,a,n,o){var i=f42(e,t,r,a,n,o);return i>0&&i<v}var v3,v256=0,v257=0;function f6(e,t,v,r,a,n,o,i){1==v196&&famobi.log(_Tx(20));var f=(i-n)*(v-e)-(o-a)*(r-t);if(0==f)return!1;var s=((o-a)*(t-n)-(i-n)*(e-a))/f,l=((v-e)*(t-n)-(r-t)*(e-a))/f;return!(s<0||s>1||l<0||l>1)&&(v256=e+s*(v-e),v257=t+s*(r-t),v163[v238]=v256,v164[v238]=v257,++v238>100&&(v238=0),ColDirX+=v256,ColDirY+=v257,ColDirCount++,1==v196&&famobi.log(_Tx(21)+ColDirCount+_Tx(22)+ColDirX+_Tx(23)+ColDirY),!0)}function f0(e,t,v,r,a,n,o,i){1==v196&&famobi.log(_Tx(24)+e+" "+t+" "+v+" "+r+" "+a+" "+n+" "+o+" "+i);var f=(i-n)*(v-e)-(o-a)*(r-t);if(0==f)return!1;1==v196&&famobi.log(_Tx(25));var s=((o-a)*(t-n)-(i-n)*(e-a))/f,l=((v-e)*(t-n)-(r-t)*(e-a))/f;if(s<0||s>1||l<0||l>1)return!1;1==v196&&famobi.log(_Tx(26)),v256=e+s*(v-e),v257=t+s*(r-t),ColDirY>v257&&(v163[0]=v256,v164[0]=v257,ColDirX=v256,ColDirY=v257,ColDirCount++),o<a?(v70=a-o,v71=n-i):(v70=o-a,v71=i-n);var u=Math.sqrt(v70*v70+v71*v71);return 0==u&&(u=1e-9),v70/=u,v71/=u,1==v196&&famobi.log(_Tx(27)+ColDirCount+", ColDirX"+ColDirX+",ColDirY "+ColDirY),!0}var v279,v70=0,v71=0;function f43(e,t,v){f23(e,t,2.1*v,2.1*v),v70=0,v71=0;for(var r=0;r<ColizWord.HashDetectedCount;r++){var a=ColizWord.HashDetected[r];if(a>-1&&a<1e4)for(var n=ColizWord.HashStaticsList[a].length,o=0;o<n;o++){var i=ColizWord.HashStaticsList[a][o];if(1==f2(e,t,v,ColizWord.StaticSegments[i].ax,ColizWord.StaticSegments[i].ay,ColizWord.StaticSegments[i].bx,ColizWord.StaticSegments[i].by)){ColizWord.StaticSegments[i].ax>ColizWord.StaticSegments[i].bx?(v70=ColizWord.StaticSegments[i].ax-ColizWord.StaticSegments[i].bx,v71=ColizWord.StaticSegments[i].ay-ColizWord.StaticSegments[i].by):(v70=ColizWord.StaticSegments[i].bx-ColizWord.StaticSegments[i].ax,v71=ColizWord.StaticSegments[i].by-ColizWord.StaticSegments[i].ay);var f=Math.sqrt(v70*v70+v71*v71);return 0==f&&(f=1e-9),v70/=f,v71/=f,!0}}}return!1}function f75(e,t,v,r){ColizWord.Dyna_ax=e,ColizWord.Dyna_ay=t,ColizWord.Dyna_bx=v,ColizWord.Dyna_by=r,ColizWord.Dyna_cx=e,ColizWord.Dyna_cy=t,ColizWord.Dyna_dx=v,ColizWord.Dyna_dy=r,ColDirX=0,ColDirY=1e7,ColDirCount=0;var a=.5*(e+v),n=.5*(t+r),o=Math.abs(v-e),i=Math.abs(r-t);o<1&&(o=1),i<1&&(i=1),f23(a,n,o,i);for(var f=0;f<ColizWord.HashDetectedCount;f++){var s=ColizWord.HashDetected[f];if(s>-1&&s<1e4)for(var l=ColizWord.HashStaticsList[s].length,u=0;u<l;u++){var c=ColizWord.HashStaticsList[s][u];f0(e,t,v,r,ColizWord.StaticSegments[c].ax,ColizWord.StaticSegments[c].ay,ColizWord.StaticSegments[c].bx,ColizWord.StaticSegments[c].by)}}}function f88(e,t,v,r,a,n,o,i){ColizWord.Dyna_ax=e,ColizWord.Dyna_ay=t,ColizWord.Dyna_bx=v,ColizWord.Dyna_by=r,ColizWord.Dyna_cx=a,ColizWord.Dyna_cy=n,ColizWord.Dyna_dx=o,ColizWord.Dyna_dy=i,ColDirX=0,ColDirY=0,ColDirCount=0;for(var f=0;f<ColizWord.HashDetectedCount;f++){var s=ColizWord.HashDetected[f];if(s>-1&&s<1e4)for(var l=ColizWord.HashStaticsList[s].length,u=0;u<l;u++){var c=ColizWord.HashStaticsList[s][u];f6(e,t,v,r,ColizWord.StaticSegments[c].ax,ColizWord.StaticSegments[c].ay,ColizWord.StaticSegments[c].bx,ColizWord.StaticSegments[c].by),f6(v,r,a,n,ColizWord.StaticSegments[c].ax,ColizWord.StaticSegments[c].ay,ColizWord.StaticSegments[c].bx,ColizWord.StaticSegments[c].by),f6(a,n,o,i,ColizWord.StaticSegments[c].ax,ColizWord.StaticSegments[c].ay,ColizWord.StaticSegments[c].bx,ColizWord.StaticSegments[c].by),f6(o,i,e,t,ColizWord.StaticSegments[c].ax,ColizWord.StaticSegments[c].ay,ColizWord.StaticSegments[c].bx,ColizWord.StaticSegments[c].by)}}ColDirCount>0&&(ColDirX/=ColDirCount,ColDirY/=ColDirCount)}function f22(e,t,v,r){ColizWord.StaticSegments.push,ColizWord.StaticSegments[ColizWord.StaticSegmentsCount]=new f174,ColizWord.StaticSegments[ColizWord.StaticSegmentsCount].ax=e,ColizWord.StaticSegments[ColizWord.StaticSegmentsCount].ay=t,ColizWord.StaticSegments[ColizWord.StaticSegmentsCount].bx=v,ColizWord.StaticSegments[ColizWord.StaticSegmentsCount].by=r,ColizWord.StaticSegmentsCount++}function f23(e,t,v,r){ColizWord.HashDetectedCount=0;var a=e-ColizWord.HashPos_Left,n=t-ColizWord.HashPos_Top,o=Math.floor((a-.5*v)/ColizWord.HashSize_X),i=Math.floor((n-.5*r)/ColizWord.HashSize_Y),f=Math.floor((a+.5*v)/ColizWord.HashSize_X),s=Math.floor((n+.5*r)/ColizWord.HashSize_Y);for(a=o;a<f+1;a++)for(n=i;n<s+1;n++)ColizWord.HashDetected[ColizWord.HashDetectedCount]=Math.floor(a+n*ColizWord.HashCount_X),ColizWord.HashDetectedCount++}function f89(e){for(var t=0;t<ColizWord.StaticSegmentsCount;t++)ColizWord.StaticSegments[t].ax-=e,ColizWord.StaticSegments[t].bx-=e}function f16(e){}function f132(){ColizWord.HashStaticsList=new Array;for(var e=0;e<1e4;e++)ColizWord.HashStaticsList.push,ColizWord.HashStaticsList[e]=new Array}function f33(){for(var e=0;e<ColizWord.StaticSegmentsCount;e++){f23(.5*(ColizWord.StaticSegments[e].ax+ColizWord.StaticSegments[e].bx),.5*(ColizWord.StaticSegments[e].ay+ColizWord.StaticSegments[e].by),Math.abs(ColizWord.StaticSegments[e].bx-ColizWord.StaticSegments[e].ax),Math.abs(ColizWord.StaticSegments[e].by-ColizWord.StaticSegments[e].ay));for(var t=0;t<ColizWord.HashDetectedCount;t++){var v=ColizWord.HashDetected[t];v>-1&&v<1e4&&ColizWord.HashStaticsList[v].push(e)}}famobi.log(_Tx(30)+ColizWord.StaticSegmentsCount)}function f76(){ColizWord.HashSize_X=(ColizWord.HashPos_Right-ColizWord.HashPos_Left)/ColizWord.HashCount_X,ColizWord.HashSize_Y=(ColizWord.HashPos_Bottom-ColizWord.HashPos_Top)/ColizWord.HashCount_Y}function f34(e,t,v,r){ColizWord.HashPos_Left=e,ColizWord.HashPos_Top=t,ColizWord.HashPos_Right=v,ColizWord.HashPos_Bottom=r,f76()}function f77(e,t){e>100&&(e=100),t>100&&(t=100),ColizWord.HashCount_X=e,ColizWord.HashCount_Y=t,f76()}function f266(e,t,v,r){var a=Math.sqrt((e-v)*(e-v)+(t-r)*(t-r)),n=-f247(e,t,v,r);f203(),f231(e,t,0),f296(n,0,0,1),f183(-v279,-v279,v279,a+v279),f230()}var v133=0;function f133(){v279=5.5,f203(),f231(0,5,0),f296(90,1,0,0),gl.enable(gl.BLEND),gl.depthMask(!1),f228(3);for(var e=0;e<ColizWord.HashCount_X;e++)for(var t=ColizWord.HashPos_Left+e*ColizWord.HashSize_X,v=0;v<ColizWord.HashCount_Y;v++){f181(0,0,0,.8);for(var r=ColizWord.HashPos_Top+v*ColizWord.HashSize_Y,a=0;a<ColizWord.HashDetectedCount;a++)if(ColizWord.HashDetected[a]==Math.floor(e+v*ColizWord.HashCount_X)){f181(0,1,0,.2);break}f183(t+v279,r+v279,t+ColizWord.HashSize_X-v279,r+ColizWord.HashSize_Y-v279)}f181(1,1,0,.2);for(a=0;a<ColizWord.StaticSegmentsCount;a++)f266(ColizWord.StaticSegments[a].ax,ColizWord.StaticSegments[a].ay,ColizWord.StaticSegments[a].bx,ColizWord.StaticSegments[a].by);f181(1,1,0,1);for(a=0;a<ColizWord.HashDetectedCount;a++){var n=ColizWord.HashDetected[a];if(n>-1&&n<1e4)for(var o=ColizWord.HashStaticsList[n].length,i=0;i<o;i++){var f=ColizWord.HashStaticsList[n][i];f266(ColizWord.StaticSegments[f].ax,ColizWord.StaticSegments[f].ay,ColizWord.StaticSegments[f].bx,ColizWord.StaticSegments[f].by)}}v279=5.5,f181(0,1,0,1),f266(ColizWord.Dyna_ax,ColizWord.Dyna_ay,ColizWord.Dyna_bx,ColizWord.Dyna_by),f266(ColizWord.Dyna_bx,ColizWord.Dyna_by,ColizWord.Dyna_cx,ColizWord.Dyna_cy),f266(ColizWord.Dyna_cx,ColizWord.Dyna_cy,ColizWord.Dyna_dx,ColizWord.Dyna_dy),f266(ColizWord.Dyna_dx,ColizWord.Dyna_dy,ColizWord.Dyna_ax,ColizWord.Dyna_ay),f181(1,0,0,1);for(a=0;a<100;a++)f183(v163[a]-10,v164[a]-10,v163[a]+10,v164[a]+10);gl.disable(gl.BLEND),gl.depthMask(!0),f230()}var MouseClick=0,v197=0,v258="",keysDown={},v259=0,v303=-1,v304=-1;function f90(){}function f151(e){1==dlg_keyboard_on_screen?(v60=e,v197=0):(v60=0,v197=e)}function f224(e,t,v){Realv303=t,Realv304=v;WebGL_canvas.width,WebGL_canvas.height;var r=t-WebGL_canvas.offsetLeft,a=v-WebGL_canvas.offsetTop;if(0==isNaN(r)&&0==isNaN(a)){OLD_v303=v303,OLD_v304=v304;var n=t,o=v;n*=v204/v221,o*=v176/v183,n=Math.floor(n),o=Math.floor(o),1==isNaN(o)&&(o=0),1==isNaN(n)&&(n=0),n<0&&(n=0),o<0&&(o=0),n>v204&&(n=v204),o>v176&&(o=v176),1==dlg_keyboard_on_screen?(v212=n,v213=o,v303=-1,v304=-1):(v303=n,v304=o)}}function f111(){0==v197&&-1==MouseClick&&(MouseClick=0),1==MouseClick&&(MouseClick=-1),1==v197&&0==MouseClick&&(MouseClick=1)}var v96=[],v165=0;function f225(){this.x=0,this.y=0,this.Touch_id=0}function f226(){v96=[],v165=0}function f35(e){e.preventDefault(),e.stopPropagation();var t,v=e.changedTouches;if(1!=dlg_keyboard_on_screen)for(var r=0;r<v.length;r++){t=1;for(var a=0;a<v165;a++)if(v96[a].Touch_id==v[r].identifier){v96[a].x=v[r].pageX,v96[a].y=v[r].pageY,t=0;break}if(1==t){v96.push(),v96[v165]=new f225,v96[v165].x=v[r].pageX,v96[v165].y=v[r].pageY,v96[v165].Touch_id=v[r].identifier,v165++}}}function f56(e){e.preventDefault(),e.stopPropagation();for(var t=e.changedTouches,v=0;v<t.length;v++)for(var r=0;r<v165;r++)if(v96[r].Touch_id==t[v].identifier){v96.splice(r,1),v165--;break}}function f44(e){e.preventDefault(),e.stopPropagation();var t=e.changedTouches;if(1!=dlg_keyboard_on_screen)for(var v=0;v<t.length;v++)for(var r=0;r<v165;r++)if(v96[r].Touch_id==t[v].identifier){v96[r].x=t[v].pageX,v96[r].y=t[v].pageY;break}}function f175(e,t,v,r){return 1==MouseClick&&v303>=e&&v303<=v&&v304>=t&&v304<=r?(MouseClick=-1,1):0}function f176(e,t,v,r){if(1==v197&&v303>=e&&v303<=v&&v304>=t&&v304<=r)return 1;for(var a=0;a<v165;a++){var n=v96[a].x*v204/v221,o=v96[a].y*v176/v183;if(n>e&&n<v&&o>t&&o<r)return 1}return 0}var v72=-1;function f57(){f90(),WebGL_canvas.addEventListener(_Tx(31),function(e){f35(e),f224(WebGL_canvas,e.changedTouches[0].pageX,e.changedTouches[0].pageY),f151(1),window.scrollTo(0,1)},!1),WebGL_canvas.addEventListener(_Tx(32),function(e){f44(e),f224(WebGL_canvas,e.changedTouches[0].pageX,e.changedTouches[0].pageY),f151(1),window.scrollTo(0,1)},!1),WebGL_canvas.addEventListener(_Tx(33),function(e){if(f56(e),v258.length>5&&(window.open(v258),v258=""),f151(0),1==v32&&1==v63&&(v32=0,f142(.01),f259(1),f142(1)),1==v0&&(null==v297||1==v297.paused)){v297.load();var t=v297.play();t&&t.catch(function(e){}),v0=0}window.scrollTo(0,1)},!1),WebGL_canvas.addEventListener(_Tx(34),function(e){f56(e),v258.length>5&&(window.open(v258),v258=""),f151(0),window.scrollTo(0,1)},!1),WebGL_canvas.addEventListener(_Tx(35),function(e){f56(e),f151(0),window.scrollTo(0,1)},!1),0==v100&&(WebGL_canvas.onmousemove=function(e){f224(WebGL_canvas,e.pageX,e.pageY)},WebGL_canvas.onmousedown=function(e){v258.length>5&&(window.open(v258),v258=""),f224(WebGL_canvas,e.pageX,e.pageY),f151(1)},WebGL_canvas.onmouseup=function(e){v258.length>5&&(window.open(v258),v258=""),f151(0)},WebGL_canvas.onmouseout=function(e){v258.length>5&&(window.open(v258),v258=""),f151(0)},window.addEventListener(_Tx(36),function(e){[32,37,38,39,40].indexOf(e.keyCode)>-1&&e.preventDefault(),KeyIsDown=1,v259=e.keyCode,keysDown[e.keyCode||e.which]=!0,1==keysDown[37]&&(keysDown[39]=0),1==keysDown[39]&&(keysDown[37]=0),1==keysDown[38]&&(keysDown[40]=0),1==keysDown[40]&&(keysDown[38]=0),[32,37,38,39,40].indexOf(e.keyCode)>-1&&e.preventDefault(),WebGL_canvas.focus()},!1),window.addEventListener("keyup",function(e){KeyIsDown=0,v259=0,WebGL_canvas.focus(),delete keysDown[e.keyCode||e.which]},!1),window.addEventListener(_Tx(38),function(e){v72=String.fromCharCode(e.charCode),v8=v8+""+String.fromCharCode(e.charCode),WebGL_canvas.focus()},!1))}var DataToDownload=0,v73=0,v97=0,v98=0,v74=0,v260=0,v99=0,v239=0,v240=0,v198=0,v199=0,v241=180/Math.PI;function f267(e){return Math.cos(.01745329251*e)}function f268(e){return Math.sin(.01745329251*e)}function f269(e){return Math.cos(e)}function f270(e){return Math.sin(e)}function f247(e,t,v,r){return 270-Math.atan2(t-r,e-v)*v241}function f112(e,t,v,r){var a=t-r,n=e-v,o=Math.atan2(a,n);return o*=180/Math.PI}function f177(e,t,v,r){var a=t-r,n=e-v;return Math.atan2(a,n)}function f152(){var e=100;return typeof window.innerWidth==_Tx(40)?e=window.innerWidth:document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?e=document.documentElement.clientWidth:document.body&&(document.body.clientWidth||document.body.clientHeight)&&(e=document.body.clientWidth),e}function f134(){var e=100;return"number"==typeof window.innerWidth?e=window.innerHeight:document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?e=document.documentElement.clientHeight:document.body&&(document.body.clientWidth||document.body.clientHeight)&&(e=document.body.clientHeight),e}var Monetisation_IsFamobi=0,Monetisation_FamobiAdOnScreen=0,Monetisation_PHPpath="php/";function f113(){typeof famobi_InUse==_Tx(42)&&famobi_InUse()}function f17(){return 1==Monetisation_FamobiAdOnScreen?1:0}function f24(){Stanislic_SendInfo(_Tx(44)),1==Monetisation_IsFamobi&&famobi_moreGamesLink()}var v100=0,v75=0,v261=0,v295=0,v200=0;function f292(){famobi.log(navigator.userAgent.toLowerCase());var e=["crios",_Tx(45)],t=0;for(t=0;t<e.length;t++){if(navigator.userAgent.toLowerCase().search(e[t])>-1)return v261=1,1}return 0}function f293(){var e=["crios"],t=0;for(t=0;t<e.length;t++){if(navigator.userAgent.toLowerCase().search(e[t])>-1)return 0}var v=[_Tx(46)];t=0;for(t=0;t<v.length;t++){if(navigator.userAgent.toLowerCase().search(v[t])>-1)return 1}return 0}function f271(){var e=[_Tx(47),"bean"],t=0;for(t=0;t<e.length;t++){if(navigator.userAgent.toLowerCase().search(e[t])>-1)return v75=1,1}return 0}function f306(){var e=[_Tx(48),"ipad"],t=0;for(t=0;t<e.length;t++){if(navigator.userAgent.toLowerCase().search(e[t])>-1)return v200=1,1}return v200=0,0}function f305(){var e=["os 8_"],t=0;for(t=0;t<e.length;t++){if(navigator.userAgent.toLowerCase().search(e[t])>-1)return v295=1,1}return 0}function f294(){var e=[_Tx(49),"silk",_Tx(50),_Tx(51),"iphone","ipad","android",_Tx(52),"nokia",_Tx(53),_Tx(54),_Tx(55),_Tx(56)],t=0;for(t=0;t<e.length;t++){if(navigator.userAgent.toLowerCase().search(e[t])>-1)return f271(),v100=1,1}return v100=0,0}var Pref_User_Sound=1,v76=1,v201=null,v134=null,v52=1,v101=null,v77="none";function f272(e){return"undefined"==typeof localStorage?null:1==Monetisation_IsFamobi?famobi.localStorage.getItem(v184+e):localStorage.getItem(v184+e)}function f273(e,t){if("undefined"==typeof localStorage)return null;1!=Monetisation_IsFamobi?localStorage.setItem(v184+e,t):famobi.localStorage.setItem(v184+e,t)}function f274(){if(null==(v134=f272(_Tx(58)))){var e=(new Date).getTime();f273("UserKey",v134=md5("mykey"+e+256*Math.random()))}null==(v201=f272(_Tx(57)))&&f273("UserID",v201=md5("UserID"+v134)),(v52=f272(_Tx(59)))<1&&f273("UserAvatar",v52=1),null==(v101=f272(_Tx(60)))&&(f196(0,0,0),f273("UserName",v101="Pilot"+Math.floor(.1*(5e4+5e4*Math.random()))))}var ScoresTable=[],v102=20,v103=0,v78=0,Score_PlayerMax=0;function f227(){this.LastUpdate=-1,this.Name=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.Score=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.Rank=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.Avatar=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.PlayerRank=0}function f248(){for(var e=0;e<v102;e++)ScoresTable.push(),ScoresTable[e]=new f227}function f275(e){if(window.famobi.hasFeature("standalone")||!window.famobi.hasFeature("leaderboard"))return!1;var t;v78=0,v103=0,(t=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")).onreadystatechange=function(){var v=new RegExp("^file:","i").test(t.responseURL);if(4==t.readyState&&(200==t.status||v&&0===t.status)){ScoresTable[e].Rank=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],v103=0;var r,a=t.responseText.split(",");if(a.length<3)return;for(r=0;r<a.length;r+=3){if(v103>19)return void(v78=v103);if(a[r].length<1)return void(v78=v103);if(">>"==a[r].substring(0,2))ScoresTable[e].PlayerRank=parseInt(a[r].substring(2)),famobi.log(_Tx(61)+ScoresTable[e].PlayerRank);else{if(a[r+2]<1)return void(v78=v103);if(NaN==a[r])return void(v78=v103);if(NaN==a[r+2])return void(v78=v103);var n=r/3-1;ScoresTable[e].Rank[n]=n+1,ScoresTable[e].Avatar[n]=1,"-"==a[r][a[r].length-3]?(ScoresTable[e].Name[n]=a[r].substring(0,a[r].length-3),ScoresTable[e].Avatar[n]=parseInt(a[r].substring(a[r].length,a[r].length-2))):ScoresTable[e].Name[n]=a[r],ScoresTable[e].Score[n]=a[r+2],famobi.log(_Tx(62)+(n+1)+"]: "+ScoresTable[e].Name[n]+" "+ScoresTable[e].Score[n]),v103++}}v78=v103}},t.open("GET",Monetisation_PHPpath+_Tx(63)+e+_Tx(64)+Score_PlayerMax,!0),t.send()}function f249(e){var t=(new Date).getTime()/1e3;t<ScoresTable[e].LastUpdate||(ScoresTable[e].LastUpdate=t+30,f275(e))}function f59(e){return f249(e),ScoresTable[e].PlayerRank}function f135(e,t){return e>v102-1?1:(f249(t),ScoresTable[t].Avatar[e])}function f178(e,t){return e>v102-1?0:(f249(t),ScoresTable[t].Rank[e])}function f179(e,t){return e>v102-1?0:(f249(t),ScoresTable[t].Name[e])}function f153(e,t){return e>v102-1?0:(f249(t),ScoresTable[t].Score[e])}function f196(e,t,v){if(window.famobi.hasFeature("standalone")||!window.famobi.hasFeature("leaderboard"))return!1;var r;(r=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")).onreadystatechange=function(){var a=new RegExp("^file:","i").test(r.responseURL);4==r.readyState&&(200==r.status||a&&0===r.status?(famobi.log(_Tx(67)+r.responseText),ScoresTable[e].LastUpdate=-1):(famobi.log(_Tx(66)+r.responseText),v>0&&Submit_Score(e,t,v-1)))},t=parseInt(t);var a=md5(v134+t+v201),n="-"+v52;v52<10&&(n="-0"+v52);var o=v101+n,i=Monetisation_PHPpath+_Tx(68)+v201+"&key="+v134+_Tx(69)+o+_Tx(70)+v52+_Tx(71)+v77+_Tx(72)+t+_Tx(73)+a+"&cat="+e;r.open("GET",i,!0),r.send()}var Overlay_OnScreen=0;function Overlay_Hide(){document.getElementById(_Tx(75)).style.display="none",Overlay_OnScreen=0}function Overlay_fadeIn(e){e>1&&(e=1);var t=document.getElementById(_Tx(76));t.style.opacity=e,t.style.filter=_Tx(77)+100*e+")",e<1&&setTimeout(function(){Overlay_fadeIn(e+.1)},25)}function Overlay_Show(e){document.getElementById(_Tx(78)).src=e,Overlay_fadeIn(0),document.getElementById("overlay").style.display="block",Overlay_OnScreen=1}var gamepads=[],v242=0,v166=0,v167=0,GamePad_RIGHT=0,v29=0,v19=0,v54=0,v55=0,v56=0,v57=0,v20=0,v21=0,GamePad_RIGHT_STICK_X=0,GamePad_RIGHT_STICK_Y=0;function f78(){gamepads=navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads():[]}function f114(){famobi.log(_Tx(79)),window.addEventListener(_Tx(80),function(e){f78()},!1),window.addEventListener(_Tx(81),function(e){f78()},!1),f78(),famobi.log(_Tx(82)+gamepads.length+_Tx(83));for(var e=0;e<gamepads.length;e++)gamepads[e]&&famobi.log(_Tx(84)+gamepads[e].id)}function f180(e){return typeof e==_Tx(85)?e.pressed:1==e}function f79(){if(0!=gamepads.length){f78(),v242=0,v166=0,v167=0,GamePad_RIGHT=0,v29=0,v19=0,v54=0,v55=0,v56=0,v57=0,v20*=.5,v21*=.5,GamePad_RIGHT_STICK_X*=.5,GamePad_RIGHT_STICK_Y*=.5;for(var e=0;e<gamepads.length;e++)if(gamepads[e]){var t=gamepads[e];f180(t.buttons[0])&&(v54=1),f180(t.buttons[1])&&(v55=1),f180(t.buttons[2])&&(v56=1),f180(t.buttons[3])&&(v57=1),f180(t.buttons[8])&&(v29=1),f180(t.buttons[9])&&(v19=1),f180(t.buttons[14])&&(v167=1),f180(t.buttons[15])&&(GamePad_RIGHT=1),f180(t.buttons[12])&&(v242=1),f180(t.buttons[13])&&(v166=1),t.axes[0]<-.5&&(v167=1),t.axes[0]>.5&&(GamePad_RIGHT=1),Math.abs(t.axes[0])>.1&&(v20=t.axes[0]),Math.abs(t.axes[1])>.1&&(v21=t.axes[1]),Math.abs(t.axes[2])>.1&&(GamePad_RIGHT_STICK_X=t.axes[2]),Math.abs(t.axes[3])>.1&&(GamePad_RIGHT_STICK_Y=t.axes[3])}}}var v243,v202,TempGroundBounce,v263,v263Fade,TempTextureID,v280,Temps_size,TempRotation,Temps_Rotation,v316,Tempy,Tempz,Tempsx,Tempsy,Tempsz,WebGL_Maxv262=50,v262=new Array,v136=!1,v104=!1;function f136(){this.x=0,this.y=0,this.z=0,this.s_sx=0,this.s_sy=0,this.s_sz=0,this.size=0,this.s_size=0,this.Rotation=0,this.s_Rotation=0,this.TextureID=0,this.Gravity=0,this.GroundBounce=0,this.Alpha=1,this.AlphaFade=0,this.Forced=!1,this.IsFlat=!1}function f91(e){v136=e}function f115(e){v243=e}function f155(){}function f60(e,t){v202=e,TempGroundBounce=t}function f92(e,t){v263=e,v263Fade=t}function f61(e){TempTextureID=e}function f62(e,t,v,r){v280=e,Temps_size=t,TempRotation=v,Temps_Rotation=r}function f45(e,t,v,r,a,n){v316=e,Tempy=t,Tempz=v,Tempsx=r,Tempsy=a,Tempsz=n}function f80(e){v104=e}function f199(){v262.push();var e=v262.length;v262[e]=new f136,v262[e].x=v316,v262[e].y=Tempy,v262[e].z=Tempz,v262[e].sx=.01*Tempsx,v262[e].sy=.01*Tempsy,v262[e].sz=.01*Tempsz,v262[e].Gravity=.01*v202,v262[e].GroundBounce=TempGroundBounce,v262[e].Alpha=v263,v262[e].AlphaFade=.01*v263Fade,v262[e].TextureID=TempTextureID,v262[e].size=.5*v280,v262[e].s_size=.1*Temps_size,v262[e].Rotation=TempRotation,v262[e].s_Rotation=.1*Temps_Rotation,v262[e].Forced=v104,v262[e].IsFlat=v243,v243=!1,v104=!1}function f116(e){for(var t=0;t<v262.length;t++)v262[t].x+=e}var v22=!0;function f156(){gl.depthMask(!1),f228(2);for(var e=-1,t=0;t<v262.length;t++){if(f181(1,1,1,v262[t].Alpha),f203(),f231(v262[t].x,v262[t].y,v262[t].z),0==v262[t].IsFlat&&0==v136){var v=f112(v262[t].x,v262[t].z,v205,v207);f296(90-v,0,1,0);var r=Math.sqrt(Math.pow(v262[t].x-v205,2)+Math.pow(v262[t].z-v207,2));f296(v=f112(0,v262[t].y,r,v206),1,0,0)}1==v262[t].IsFlat&&f296(90,1,0,0),f296(v262[t].Rotation,0,0,1),f138(v262[t].TextureID,+v262[t].size,-v262[t].size,-v262[t].size,+v262[t].size),f230(),1==v22&&(v262[t].size+=v262[t].s_size,v262[t].Alpha-=v262[t].AlphaFade*v260,(v262[t].Alpha<0||v262[t].size<1)&&(e=t),v262[t].Rotation+=v262[t].s_Rotation*v260,v262[t].x+=v262[t].sx*v260,v262[t].y+=v262[t].sy*v260,v262[t].z+=v262[t].sz*v260,v262[t].sy-=v262[t].Gravity*v260,v262[t].GroundBounce>0&&v262[t].y<.5*v262[t].size&&(v262[t].y=.5*v262[t].size,v262[t].sy=Math.abs(v262[t].sy)*v262[t].GroundBounce))}gl.depthMask(!0),-1!=e&&v262.splice(e,1),e=-1}var shaderProgram=new Array,v105=new Array,v168=new Array,v244=new Array,v245=new Array,v169=0,v138=0,v139=1,v140=0;function f7(e,t,v){v138=e,v139=t,v140=v}function f181(e,t,v,r){gl.uniform4f(v105[v141].ColorsUniform,e,t,v,r)}function f13(){null!=v105[v141].v296Uniform&&gl.uniformMatrix4fv(v105[v141].v296Uniform,!1,v296),null!=v105[v141].v281Uniform&&gl.uniformMatrix4fv(v105[v141].v281Uniform,!1,v281),null!=v105[v141].cMatrixUniform&&gl.uniformMatrix4fv(v105[v141].cMatrixUniform,!1,v172),null!=v105[v141].Texture0_Uniform&&gl.uniform1i(v105[v141].Texture0_Uniform,0),null!=v105[v141].Texture1_Uniform&&gl.uniform1i(v105[v141].Texture1_Uniform,1),null!=v105[v141].Texture2_Uniform&&gl.uniform1i(v105[v141].Texture2_Uniform,2),null!=v105[v141].lightUniform&&gl.uniform3f(v105[v141].lightUniform,v138,v139,v140),null!=v105[v141].ShadowUniform&&gl.uniformMatrix4fv(v105[v141].ShadowUniform,!1,v175),null!=v105[v141].nMatrixUniform&&(mat3.normalFromMat4(v174,v281),gl.uniformMatrix3fv(v105[v141].nMatrixUniform,!1,v174))}var v141=-1;function f228(e){1==v168[e]?(gl.useProgram(shaderProgram[e]),v141=e,gl.enableVertexAttribArray(v105[e].vertexPositionAttribute),-1!=v105[e].vertexNormalAttribute&&gl.enableVertexAttribArray(v105[e].vertexNormalAttribute),-1!=v105[e].textureCoordAttribute&&(3!=e?gl.enableVertexAttribArray(v105[e].textureCoordAttribute):gl.disableVertexAttribArray(v105[e].textureCoordAttribute))):famobi.log(_Tx(87)+e+"]")}function f117(e){v105[e].vertexPositionAttribute=gl.getAttribLocation(shaderProgram[e],_Tx(88)),v105[e].vertexNormalAttribute=gl.getAttribLocation(shaderProgram[e],_Tx(89)),v105[e].textureCoordAttribute=gl.getAttribLocation(shaderProgram[e],_Tx(90)),v105[e].v296Uniform=gl.getUniformLocation(shaderProgram[e],_Tx(91)),v105[e].v281Uniform=gl.getUniformLocation(shaderProgram[e],_Tx(92)),v105[e].nMatrixUniform=gl.getUniformLocation(shaderProgram[e],_Tx(93)),v105[e].cMatrixUniform=gl.getUniformLocation(shaderProgram[e],_Tx(94)),v105[e].Texture0_Uniform=gl.getUniformLocation(shaderProgram[e],_Tx(95)),v105[e].Texture1_Uniform=gl.getUniformLocation(shaderProgram[e],_Tx(96)),v105[e].Texture2_Uniform=gl.getUniformLocation(shaderProgram[e],_Tx(97)),v105[e].BonesPositionUniform=gl.getUniformLocation(shaderProgram[e],_Tx(98)),v105[e].BonesLookAtUniform=gl.getUniformLocation(shaderProgram[e],_Tx(99)),v105[e].ColorsUniform=gl.getUniformLocation(shaderProgram[e],_Tx(100)),v105[e].lightUniform=gl.getUniformLocation(shaderProgram[e],_Tx(101)),v105[e].ShadowUniform=gl.getUniformLocation(shaderProgram[e],_Tx(102)),v105[e].v262Data=gl.getUniformLocation(shaderProgram[e],_Tx(103))}function f93(e){var t=gl.createShader(gl.VERTEX_SHADER);gl.shaderSource(t,v245[e]),gl.compileShader(t),gl.getShaderParameter(t,gl.COMPILE_STATUS);var v=gl.createShader(gl.FRAGMENT_SHADER);gl.shaderSource(v,v244[e]),gl.compileShader(v),gl.getShaderParameter(v,gl.COMPILE_STATUS),shaderProgram[e]=gl.createProgram(),gl.attachShader(shaderProgram[e],t),gl.attachShader(shaderProgram[e],v),gl.linkProgram(shaderProgram[e]),gl.getProgramParameter(shaderProgram[e],gl.LINK_STATUS)&&(gl.useProgram(shaderProgram[e]),f117(e),v168[e]=1,v169--,gl.useProgram(shaderProgram[1]))}function f157(e,t){var v;(v=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")).onreadystatechange=function(){4==v.readyState&&(v245[e]="\n"+v.responseText+"\n",v168[e]-=1,f158(e,t))},v.open("GET",_Tx(108)+t+".vsh"+v222,!0),v.send()}function f158(e,t){var v;(v=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")).onreadystatechange=function(){4==v.readyState&&(v244[e]="\n"+v.responseText+"\n",v168[e]-=1,f93(e))},v.open("GET","datas/shaders/"+t+".fsh"+v222,!0),v.send()}function f229(e,t){v169++,v168[e]=0,f157(e,t)}function f36(){this.vertexPositionAttribute=0,this.vertexNormalAttribute=0,this.textureCoordAttribute=0,this.v296Uniform=0,this.cMatrixUniform=0,this.v281Uniform=0,this.nMatrixUniform=0,this.Texture0_Uniform=0,this.Texture1_Uniform=0,this.Texture2_Uniform=0,this.ColorsUniform=0,this.lightUniform=0,this.ShadowUniform=0,this.v262Data=0,this.BonesPositionUniform=0,this.BonesLookAtUniform=0}function f200(){for(var e=0;e<30;e++)shaderProgram.push,v168.push,v168[e]=0,v105.push,v105[e]=new f36,v244.push,v245.push;f229(1,_Tx(109)),f229(2,_Tx(110)),f229(3,_Tx(111)),f229(4,_Tx(112)),f229(5,_Tx(113)),f229(6,_Tx(114)),f229(7,_Tx(115)),f229(8,_Tx(116)),f229(9,_Tx(117)),f229(10,"water"),f229(11,_Tx(118)),f229(12,_Tx(119)),f229(13,"flag"),f229(14,_Tx(120)),f229(15,_Tx(121)),f229(16,_Tx(122)),f229(17,_Tx(123)),f229(18,_Tx(124)),f229(19,_Tx(125)),f229(20,_Tx(126))}var v4,SpriteVertexTextureCoordBuffer,v6,GLTexture=new Array,GLTexture_Name=new Array,MaxGLtexture=200,v171=new Array,v107=new Array,DynaTex_Texture=new Array;function f81(){v4=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,v4),gl.bufferData(gl.ARRAY_BUFFER,new Float32Array([-.5,.5,-.2,.5,.5,-.2,.5,-.5,-.2,-.5,-.5,-.2]),gl.STATIC_DRAW),v4.itemSize=3,v4.numItems=4,SpriteVertexTextureCoordBuffer=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,SpriteVertexTextureCoordBuffer),gl.bufferData(gl.ARRAY_BUFFER,new Float32Array([0,0,1,0,1,1,0,1]),gl.STATIC_DRAW),SpriteVertexTextureCoordBuffer.itemSize=2,SpriteVertexTextureCoordBuffer.numItems=4,v6=gl.createBuffer(),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,v6),gl.bufferData(gl.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,0,2,3]),gl.STATIC_DRAW),v6.itemSize=1,v6.numItems=6,famobi.log(_Tx(127))}function f63(e){gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL,!0),gl.bindTexture(gl.TEXTURE_2D,e),gl.texImage2D(gl.TEXTURE_2D,0,gl.RGBA,gl.RGBA,gl.UNSIGNED_BYTE,e.image),1==f137(e.image.width,e.image.height)?(gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,gl.LINEAR),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.LINEAR),gl.generateMipmap(gl.TEXTURE_2D)):(gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.LINEAR),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.CLAMP_TO_EDGE),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,gl.CLAMP_TO_EDGE)),gl.bindTexture(gl.TEXTURE_2D,null),DataToDownload--,v73--}function f159(e){return e>4096?4096:e>2048?4096:e>1024?2048:e>512?1024:e>256?512:e>128?256:e>64?128:e>32?64:e>16?32:16}function f137(e,t){return 16!=e&&32!=e&&64!=e&&128!=e&&256!=e&&512!=e&&1024!=e&&2048!=e&&4096!=e?0:16!=t&&32!=t&&64!=t&&128!=t&&256!=t&&512!=t&&1024!=t&&2048!=t&&4096!=t?0:1}function f160(e,t){DataToDownload++,v73++;var v,r=_Tx(132)+t+v222;if(-1!=t.search("data:")&&(r=t),-1!=t.search("http")&&(r=t),-1!=e)for(GLTexture_Name[e]=r,v=0;v<MaxGLtexture;v++)if(GLTexture_Name[v]==r&&v!=e)return famobi.log(_Tx(133)+v+"] '"+r+"'"),DataToDownload--,v73--,GLTexture[v];famobi.log(_Tx(134)+e+"] '"+r+"'");var a=gl.createTexture();return a.image=new Image,a.image.onload=function(){a.image.width,a.image.height;f63(a)},a.image.src=r,a}function f182(){for(var e;e<MaxGLtexture;e++)GLTexture.push,GLTexture_Name.push}var PrevTexture=-1;function f201(e){PrevTexture!=e&&(PrevTexture=e,-1!=e&&(gl.activeTexture(gl.TEXTURE0),gl.bindTexture(gl.TEXTURE_2D,GLTexture[e])))}function f161(e){gl.activeTexture(gl.TEXTURE1),gl.bindTexture(gl.TEXTURE_2D,GLTexture[e]),gl.activeTexture(gl.TEXTURE0)}function f183(e,t,v,r){f203(),f231(e,t,0),f299(v-e,r-t,1),f231(.5,.5,0),gl.bindBuffer(gl.ARRAY_BUFFER,v4),gl.vertexAttribPointer(v105[v141].vertexPositionAttribute,v4.itemSize,gl.FLOAT,!1,0,0),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,v6),f13(),gl.drawElements(gl.TRIANGLES,v6.numItems,gl.UNSIGNED_SHORT,0),f230(),v99+=2}function f138(e,t,v,r,a){-1!=e&&f201(e),f203(),f231(t,v,0),f299(r-t,a-v,1),f231(.5,.5,0),gl.bindBuffer(gl.ARRAY_BUFFER,v4),gl.vertexAttribPointer(v105[v141].vertexPositionAttribute,v4.itemSize,gl.FLOAT,!1,0,0),gl.bindBuffer(gl.ARRAY_BUFFER,SpriteVertexTextureCoordBuffer),gl.vertexAttribPointer(v105[v141].textureCoordAttribute,SpriteVertexTextureCoordBuffer.itemSize,gl.FLOAT,!1,0,0),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,v6),f13(1),gl.drawElements(gl.TRIANGLES,v6.numItems,gl.UNSIGNED_SHORT,0),f230(),v99+=2}function f202(e){f201(e),f203(),f299(GLTexture[e].image.width,GLTexture[e].image.height,1),gl.bindBuffer(gl.ARRAY_BUFFER,v4),gl.vertexAttribPointer(v105[v141].vertexPositionAttribute,v4.itemSize,gl.FLOAT,!1,0,0),gl.bindBuffer(gl.ARRAY_BUFFER,SpriteVertexTextureCoordBuffer),gl.vertexAttribPointer(v105[v141].textureCoordAttribute,SpriteVertexTextureCoordBuffer.itemSize,gl.FLOAT,!1,0,0),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,v6),f13(),gl.drawElements(gl.TRIANGLES,v6.numItems,gl.UNSIGNED_SHORT,0),f230(),v99+=2}function f276(e){for(var t=0;t<v171.length;t++)if(v171[t]==e)return t;t=v171.length;v171.push(),DynaTex_Texture.push(),v107.push(),v171[t]=e,v107[t]=0;var v=gl.createTexture();return v.image=new Image,v.image.crossOrigin=_Tx(135),v.image.onload=function(){v.image.width,v.image.height;f63(v),DynaTex_Texture[t]=v,v107[t]=1,DataToDownload=0,v73=0},v.image.src=e,t}function f25(e){var t=f276(e);return 0==v107[t]?0:DynaTex_Texture[t].image.width}function f20(e){var t=f276(e);return 0==v107[t]?0:DynaTex_Texture[t].image.height}function f8(e){var t=f276(e);return 0==v107[t]?0:parseInt(DynaTex_Texture[t].image.style.width)}function f4(e){var t=f276(e);return 0==v107[t]?0:parseInt(DynaTex_Texture[t].image.style.height)}function f37(e,t){var v=f276(e);0!=v107[v]?(PrevTexture=-1,gl.activeTexture(gl.TEXTURE0),gl.bindTexture(gl.TEXTURE_2D,DynaTex_Texture[v])):f201(t)}function f38(e,t){var v=f276(e);if(0==v107[v])return f203(),f299(.5,.5,1),f296(360*Math.random(),0,0,1),t>0&&f202(t),void f230();PrevTexture=-1,gl.activeTexture(gl.TEXTURE0),gl.bindTexture(gl.TEXTURE_2D,DynaTex_Texture[v]),f203(),f299(DynaTex_Texture[v].image.width,DynaTex_Texture[v].image.height,1),gl.bindBuffer(gl.ARRAY_BUFFER,v4),gl.vertexAttribPointer(v105[v141].vertexPositionAttribute,v4.itemSize,gl.FLOAT,!1,0,0),gl.bindBuffer(gl.ARRAY_BUFFER,SpriteVertexTextureCoordBuffer),gl.vertexAttribPointer(v105[v141].textureCoordAttribute,SpriteVertexTextureCoordBuffer.itemSize,gl.FLOAT,!1,0,0),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,v6),f13(),gl.drawElements(gl.TRIANGLES,v6.numItems,gl.UNSIGNED_SHORT,0),f230(),v99+=2}var v23,v142=[],v296=mat4.create(),v281=mat4.create(),v172=mat4.create(),v173=mat4.create(),v174=mat3.create(),v175=mat4.create(),v47=mat3.create(),v246=mat4.create();function f139(e,t,v,r){r=3.14159265359*r/180;var a=Math.sin(r),n=Math.cos(r),o=1-n,i=o*e,f=o*t,s=a*v,l=a*t,u=a*e;return[i*e+n,i*t+s,i*v-l,0,i*t-s,f*t+n,f*v+u,0,i*v+l,f*v-u,o*v*v+n,0,0,0,0,1]}function f203(){var e=mat4.create();mat4.copy(e,v281),v142.push(e)}function f230(){if(0==v142.length)throw _Tx(136);v281=v142.pop()}function f64(e,t,v){LightX=e,LightY=t,LightZ=v}function f162(){var e,t=[50,.1,50,1];t[0]=LightX,t[1]=LightY,t[2]=LightZ;var v=[0,1,0,0],r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];e=v[0]*t[0]+v[1]*t[1]+v[2]*t[2],r[0]=e-t[0]*v[0],r[4]=-t[0]*v[1],r[8]=-t[0]*v[2],r[12]=-t[0]*v[3],r[1]=-t[1]*v[0],r[5]=e-t[1]*v[1],r[9]=-t[1]*v[2],r[13]=-t[1]*v[3]+1e3,r[2]=-t[2]*v[0],r[6]=-t[2]*v[1],r[10]=e-t[2]*v[2],r[14]=-t[2]*v[3],r[3]=-t[3]*v[0],r[7]=-t[3]*v[1],r[11]=-t[3]*v[2],r[15]=e-t[3]*v[3],mat4.multiply(v281,v281,r)}function f295(e){return e*Math.PI/180}function f231(e,t,v){mat4.translate(v281,v281,[e,t,v])}function f299(e,t,v){mat4.scale(v281,v281,[e,t,v])}function f296(e,t,v,r){mat4.rotate(v281,v281,f295(e),[t,v,r])}function f232(e,t,v,r){mat4.rotate(v281,v281,e,[t,v,r])}var WebGL_MaxPersPective=6e3,WebGL_MinPersPective=20;function f82(e){gl.viewport(0,0,gl.drawingBufferWidth,gl.drawingBufferHeight),mat4.perspective(v296,f295(e),v221/v183,WebGL_MinPersPective,WebGL_MaxPersPective),mat4.identity(v281),gl.enable(gl.DEPTH_TEST),gl.disable(gl.BLEND)}function f11(e,t,v){gl.viewport(0,0,t,v),mat4.perspective(v296,f295(e),t/v,WebGL_MinPersPective,WebGL_MaxPersPective),mat4.identity(v281),gl.enable(gl.DEPTH_TEST),gl.disable(gl.BLEND)}var v205,v206,v207,v108,v109,v110,v177,v204=300,v176=700;function f204(){(v204=v221*v176/v183)<WebGL_MinScaledSize&&(v204=WebGL_MinScaledSize),gl.viewport(0,0,gl.drawingBufferWidth,gl.drawingBufferHeight),mat4.ortho(v296,0,v204,v176,0,.1,800),mat4.identity(v281),mat4.identity(v172),gl.disable(gl.DEPTH_TEST),gl.enable(gl.BLEND),gl.blendFunc(gl.SRC_ALPHA,gl.ONE_MINUS_SRC_ALPHA)}function f250(e,t,v,r,a,n,o,i,f){v205=e,v206=t,v207=v,v108=r,v109=a,v110=n,mat4.lookAt(v172,[e,t,v],[r,a,n],[o,i,f]),mat4.multiply(v173,v172,v281),v177=f177(e,v,r,n)}function f118(e,t,v,r,a,n,o,i,f){v205=e,v206=t,v207=v,mat4.lookAt(v172,[e,t,v],[r,a,n],[o,i,f])}var v264=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],A=0,B=1,C=2,D=3,RIGHT=0,LEFT=1,v305=2,TOP=3,BACK=4,v318=5;function f163(e,t){var v=Math.sqrt(e[t][A]*e[t][A]+e[t][B]*e[t][B]+e[t][C]*e[t][C]);e[t][A]/=v,e[t][B]/=v,e[t][C]/=v,e[t][D]/=v}function f164(){var e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];e[0]=v173[0]*v296[0]+v173[1]*v296[4]+v173[2]*v296[8]+v173[3]*v296[12],e[1]=v173[0]*v296[1]+v173[1]*v296[5]+v173[2]*v296[9]+v173[3]*v296[13],e[2]=v173[0]*v296[2]+v173[1]*v296[6]+v173[2]*v296[10]+v173[3]*v296[14],e[3]=v173[0]*v296[3]+v173[1]*v296[7]+v173[2]*v296[11]+v173[3]*v296[15],e[4]=v173[4]*v296[0]+v173[5]*v296[4]+v173[6]*v296[8]+v173[7]*v296[12],e[5]=v173[4]*v296[1]+v173[5]*v296[5]+v173[6]*v296[9]+v173[7]*v296[13],e[6]=v173[4]*v296[2]+v173[5]*v296[6]+v173[6]*v296[10]+v173[7]*v296[14],e[7]=v173[4]*v296[3]+v173[5]*v296[7]+v173[6]*v296[11]+v173[7]*v296[15],e[8]=v173[8]*v296[0]+v173[9]*v296[4]+v173[10]*v296[8]+v173[11]*v296[12],e[9]=v173[8]*v296[1]+v173[9]*v296[5]+v173[10]*v296[9]+v173[11]*v296[13],e[10]=v173[8]*v296[2]+v173[9]*v296[6]+v173[10]*v296[10]+v173[11]*v296[14],e[11]=v173[8]*v296[3]+v173[9]*v296[7]+v173[10]*v296[11]+v173[11]*v296[15],e[12]=v173[12]*v296[0]+v173[13]*v296[4]+v173[14]*v296[8]+v173[15]*v296[12],e[13]=v173[12]*v296[1]+v173[13]*v296[5]+v173[14]*v296[9]+v173[15]*v296[13],e[14]=v173[12]*v296[2]+v173[13]*v296[6]+v173[14]*v296[10]+v173[15]*v296[14],e[15]=v173[12]*v296[3]+v173[13]*v296[7]+v173[14]*v296[11]+v173[15]*v296[15],v264[RIGHT][A]=e[3]-e[0],v264[RIGHT][B]=e[7]-e[4],v264[RIGHT][C]=e[11]-e[8],v264[RIGHT][D]=e[15]-e[12],f163(v264,RIGHT),v264[LEFT][A]=e[3]+e[0],v264[LEFT][B]=e[7]+e[4],v264[LEFT][C]=e[11]+e[8],v264[LEFT][D]=e[15]+e[12],f163(v264,LEFT),v264[v305][A]=e[3]+e[1],v264[v305][B]=e[7]+e[5],v264[v305][C]=e[11]+e[9],v264[v305][D]=e[15]+e[13],f163(v264,v305),v264[TOP][A]=e[3]-e[1],v264[TOP][B]=e[7]-e[5],v264[TOP][C]=e[11]-e[9],v264[TOP][D]=e[15]-e[13],f163(v264,TOP),v264[BACK][A]=e[3]-e[2],v264[BACK][B]=e[7]-e[6],v264[BACK][C]=e[11]-e[10],v264[BACK][D]=e[15]-e[14],f163(v264,BACK),v264[v318][A]=e[3]+e[2],v264[v318][B]=e[7]+e[6],v264[v318][C]=e[11]+e[10],v264[v318][D]=e[15]+e[14],f163(v264,v318)}function f119(e,t,v,r,a,n){for(var o=0;o<6;o++)if(!(v264[o][A]*e+v264[o][B]*a+v264[o][C]*v+v264[o][D]>0||v264[o][A]*r+v264[o][B]*a+v264[o][C]*v+v264[o][D]>0||v264[o][A]*e+v264[o][B]*t+v264[o][C]*v+v264[o][D]>0||v264[o][A]*r+v264[o][B]*t+v264[o][C]*v+v264[o][D]>0||v264[o][A]*e+v264[o][B]*a+v264[o][C]*n+v264[o][D]>0||v264[o][A]*r+v264[o][B]*a+v264[o][C]*n+v264[o][D]>0||v264[o][A]*e+v264[o][B]*t+v264[o][C]*n+v264[o][D]>0||v264[o][A]*r+v264[o][B]*t+v264[o][C]*n+v264[o][D]>0))return 0;return 1}function f65(e,t,v,r){for(var a=0;a<6;a++)if(v264[a][A]*e+v264[a][B]*t+v264[a][C]*v+v264[a][D]<=-r)return 0;return 1}var v208=0,v209=0;function f233(){mat4.multiply(v246,v173,v281);var e=[0,0,0,1],t=[0,0,0,0];return t[0]=e[0]*v246[0]+e[1]*v246[4]+e[2]*v246[8]+e[3]*v246[12],t[1]=e[0]*v246[1]+e[1]*v246[5]+e[2]*v246[9]+e[3]*v246[13],t[2]=e[0]*v246[2]+e[1]*v246[6]+e[2]*v246[10]+e[3]*v246[14],t[3]=e[0]*v246[3]+e[1]*v246[7]+e[2]*v246[11]+e[3]*v246[15],e[0]=t[0]*v296[0]+t[1]*v296[4]+t[2]*v296[8]+t[3]*v296[12],e[1]=t[0]*v296[1]+t[1]*v296[5]+t[2]*v296[9]+t[3]*v296[13],e[2]=t[0]*v296[2]+t[1]*v296[6]+t[2]*v296[10]+t[3]*v296[14],e[3]=t[0]*v296[3]+t[1]*v296[7]+t[2]*v296[11]+t[3]*v296[15],0==e[3]?(v208=.5*v183,v209=-v221,0):(e[0]/=e[3],e[1]/=e[3],e[2]/=e[3],e[3]<0&&(e[0]*=2e4,e[1]*=2e4),e[0]=.5*e[0]+.5,e[1]=.5*e[1]+.5,e[2]=.5*e[2]+.5,e[0]=e[0]*v221,e[1]=e[1]*v183,e[3]>0?(v208=e[0],v209=v183-e[1]):(v208=v221-e[0],v209=e[1]),1)}var v265=new Array,v247=200;function f205(){this.Exist=0,this.xa=0,this.ya=0,this.xb=0,this.yb=0,this.width=0,this.height=0,this.centerX=0,this.centerY=0,this.HPx=0,this.HPy=0,this.textureID=0,this.VertexSpritePositionBuffer,this.TextureSpriteCoordBuffer,this.VertexSpriteIndexBuffer}function f66(e){v265[e].VertexSpritePositionBuffer=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,v265[e].VertexSpritePositionBuffer),vertices=[-v265[e].centerX,v265[e].centerY,-.25,v265[e].centerX,v265[e].centerY,-.25,v265[e].centerX,-v265[e].centerY,-.25,-v265[e].centerX,-v265[e].centerY,-.25],gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(vertices),gl.STATIC_DRAW),v265[e].VertexSpritePositionBuffer.itemSize=3,v265[e].VertexSpritePositionBuffer.numItems=4;var t=GLTexture[v265[e].textureID].image.width,v=GLTexture[v265[e].textureID].image.height,r=v265[e].xa/t,a=1-v265[e].ya/v,n=v265[e].xb/t,o=1-v265[e].yb/v;v265[e].VertexTextureSpriteCoordBuffer=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,v265[e].VertexTextureSpriteCoordBuffer);var i=[r,o,n,o,n,a,r,a];gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(i),gl.STATIC_DRAW),v265[e].VertexTextureSpriteCoordBuffer.itemSize=2,v265[e].VertexTextureSpriteCoordBuffer.numItems=4,v265[e].VertexSpriteIndexBuffer=gl.createBuffer(),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,v265[e].VertexSpriteIndexBuffer);gl.bufferData(gl.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,0,2,3]),gl.STATIC_DRAW),v265[e].VertexSpriteIndexBuffer.itemSize=1,v265[e].VertexSpriteIndexBuffer.numItems=6}function f251(e,t,v,r,a,n){v265[e].xa=v,v265[e].ya=r,v265[e].xb=a,v265[e].yb=n,v265[e].textureID=t,v265[e].width=a-v,v265[e].height=n-r,v265[e].centerX=.5*v265[e].width,v265[e].centerY=.5*v265[e].height,f66(e),v265[e].Exist=1}function f94(e,t,v){v265[e].HPx=t,v265[e].HPy=v}function f165(e,t,v,r,a){e>-1?1==v265[e].Exist&&(f201(v265[e].textureID),f203(),f231(t,v,0),f299(r-t,a-v,1),f231(.5,.5,0),gl.bindBuffer(gl.ARRAY_BUFFER,v4),gl.vertexAttribPointer(v105[v141].vertexPositionAttribute,v265[e].VertexSpritePositionBuffer.itemSize,gl.FLOAT,!1,0,0),gl.bindBuffer(gl.ARRAY_BUFFER,v265[e].VertexTextureSpriteCoordBuffer),gl.vertexAttribPointer(v105[v141].textureCoordAttribute,v265[e].VertexTextureSpriteCoordBuffer.itemSize,gl.FLOAT,!1,0,0),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,v265[e].VertexSpriteIndexBuffer),f13(1),gl.drawElements(gl.TRIANGLES,v265[e].VertexSpriteIndexBuffer.numItems,gl.UNSIGNED_SHORT,0),f230(),v99+=2):famobi.log(_Tx(137)+e+" "+x+" "+y+" "+s)}function f26(e,t,v,r){if(e>-1){var a=v265[e].centerX*r,n=v265[e].centerY*r;return f234(e,t,v,r),1==f176(t-a,v-n,t+a,v+n)?1:0}famobi.log(_Tx(138)+e+" "+t+" "+v+" "+r)}function f95(e,t,v,r){if(e>-1){var a=v265[e].centerX*r,n=v265[e].centerY*r;return f234(e,t,v,r),1==f175(t-a,v-n,t+a,v+n)?1:0}famobi.log("f95 "+e+" "+t+" "+v+" "+r)}function f234(e,t,v,r){e>-1?1==v265[e].Exist&&(f201(v265[e].textureID),f203(),f231(t,v,0),1!=r&&f299(r,r,1),f231(v265[e].HPx,v265[e].HPy,0),gl.bindBuffer(gl.ARRAY_BUFFER,v265[e].VertexSpritePositionBuffer),gl.vertexAttribPointer(v105[v141].vertexPositionAttribute,v265[e].VertexSpritePositionBuffer.itemSize,gl.FLOAT,!1,0,0),gl.bindBuffer(gl.ARRAY_BUFFER,v265[e].VertexTextureSpriteCoordBuffer),gl.vertexAttribPointer(v105[v141].textureCoordAttribute,v265[e].VertexTextureSpriteCoordBuffer.itemSize,gl.FLOAT,!1,0,0),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,v265[e].VertexSpriteIndexBuffer),f13(1),gl.drawElements(gl.TRIANGLES,v265[e].VertexSpriteIndexBuffer.numItems,gl.UNSIGNED_SHORT,0),v99+=2,f230()):famobi.log(_Tx(139)+e+" "+t+" "+v+" "+r)}function f235(){for(var e=0;e<v247;e++)v265.push(),v265[e]=new f205}var v306=0,Wall=new Array,v266=0,WebGL_IsMeshConverter=!1;function f300(){this.xa,this.za,this.xb,this.zb}function f301(e,t,v,r){Wall.push,Wall[v266]=new f300,Wall[v266].xa=e,Wall[v266].za=t,Wall[v266].xb=v,Wall[v266].zb=r,v266++}var OBJ=new Array,OBJ_Texture=new Array,OBJ_Texture_Name=new Array,MaxObjTextures=150;function f96(e){if("dummy"==e.substring(0,5))return-1;for(i=0;i<MaxObjTextures;i++)if(OBJ_Texture_Name[i]==e)return i;for(i=0;i<MaxObjTextures;i++)if("none"==OBJ_Texture_Name[i])return OBJ_Texture_Name[i]=e,OBJ_Texture[i]=f160(-1,1==WebGL_IsMeshConverter?_Tx(142)+e+".psd":1==WebGL_ObjUseJPG?_Tx(143)+e+".jpg":"textures/"+e+".png"),i;return-1}function f46(e){if(!(OBJ[e].Triangles<1)&&-1!=v105[v141].vertexPositionAttribute)for(var t=0;t<OBJ[e].ObjCount;t++)1==f119(OBJ[e].SubOBJ[t].MinX,OBJ[e].SubOBJ[t].MinY,OBJ[e].SubOBJ[t].MinZ,OBJ[e].SubOBJ[t].MaxX,OBJ[e].SubOBJ[t].MaxY,OBJ[e].SubOBJ[t].MaxZ)&&0==OBJ[e].SubOBJ[t].NoShadow&&(gl.bindBuffer(gl.ARRAY_BUFFER,OBJ[e].SubOBJ[t].VertexPositionBuffer),gl.vertexAttribPointer(v105[v141].vertexPositionAttribute,OBJ[e].SubOBJ[t].VertexPositionBuffer.itemSize,gl.FLOAT,!1,0,0),gl.bindBuffer(gl.ARRAY_BUFFER,OBJ[e].SubOBJ[t].VertexTextureCoordBuffer),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,OBJ[e].SubOBJ[t].VertexIndexBuffer),f13(1),gl.drawElements(gl.TRIANGLES,OBJ[e].SubOBJ[t].VertexIndexBuffer.numItems,gl.UNSIGNED_SHORT,0),v99+=OBJ[e].SubOBJ[t].Triangles)}function f83(e){if(!(OBJ[e].Triangles<1)&&-1!=v105[v141].vertexPositionAttribute&&-1!=v105[v141].textureCoordAttribute)for(var t=0;t<OBJ[e].ObjCount;t++)1==f119(OBJ[e].SubOBJ[t].MinX,OBJ[e].SubOBJ[t].MinY,OBJ[e].SubOBJ[t].MinZ,OBJ[e].SubOBJ[t].MaxX,OBJ[e].SubOBJ[t].MaxY,OBJ[e].SubOBJ[t].MaxZ)&&(-1!=OBJ[e].SubOBJ[t].TextureID&&(PrevTexture=-1,gl.activeTexture(gl.TEXTURE0),gl.bindTexture(gl.TEXTURE_2D,OBJ_Texture[OBJ[e].SubOBJ[t].TextureID])),gl.bindBuffer(gl.ARRAY_BUFFER,OBJ[e].SubOBJ[t].VertexPositionBuffer),gl.vertexAttribPointer(v105[v141].vertexPositionAttribute,OBJ[e].SubOBJ[t].VertexPositionBuffer.itemSize,gl.FLOAT,!1,0,0),gl.bindBuffer(gl.ARRAY_BUFFER,OBJ[e].SubOBJ[t].VertexTextureCoordBuffer),gl.vertexAttribPointer(v105[v141].textureCoordAttribute,OBJ[e].SubOBJ[t].VertexTextureCoordBuffer.itemSize,gl.FLOAT,!1,0,0),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,OBJ[e].SubOBJ[t].VertexIndexBuffer),f13(),gl.drawElements(gl.TRIANGLES,OBJ[e].SubOBJ[t].VertexIndexBuffer.numItems,gl.UNSIGNED_SHORT,0),v99+=OBJ[e].SubOBJ[t].Triangles)}function f120(e){if(!(OBJ[e].Triangles<1)&&-1!=v105[v141].vertexPositionAttribute){for(var t=0;t<OBJ[e].ObjCount;t++)gl.bindBuffer(gl.ARRAY_BUFFER,OBJ[e].SubOBJ[t].VertexPositionBuffer),gl.vertexAttribPointer(v105[v141].vertexPositionAttribute,OBJ[e].SubOBJ[t].VertexPositionBuffer.itemSize,gl.FLOAT,!1,0,0),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,OBJ[e].SubOBJ[t].VertexIndexBuffer),f13(),gl.drawElements(gl.TRIANGLES,OBJ[e].SubOBJ[t].VertexIndexBuffer.numItems,gl.UNSIGNED_SHORT,0);v99+=OBJ[e].Triangles}}function f97(e){if(!(OBJ[e].Triangles<1)&&-1!=v105[v141].vertexPositionAttribute&&-1!=v105[v141].textureCoordAttribute){for(var t=0;t<OBJ[e].ObjCount;t++)-1!=OBJ[e].SubOBJ[t].TextureID&&(PrevTexture=-1,gl.activeTexture(gl.TEXTURE0)),gl.bindBuffer(gl.ARRAY_BUFFER,OBJ[e].SubOBJ[t].VertexPositionBuffer),gl.vertexAttribPointer(v105[v141].vertexPositionAttribute,OBJ[e].SubOBJ[t].VertexPositionBuffer.itemSize,gl.FLOAT,!1,0,0),gl.bindBuffer(gl.ARRAY_BUFFER,OBJ[e].SubOBJ[t].VertexTextureCoordBuffer),gl.vertexAttribPointer(v105[v141].textureCoordAttribute,OBJ[e].SubOBJ[t].VertexTextureCoordBuffer.itemSize,gl.FLOAT,!1,0,0),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,OBJ[e].SubOBJ[t].VertexIndexBuffer),f13(),gl.drawElements(gl.TRIANGLES,OBJ[e].SubOBJ[t].VertexIndexBuffer.numItems,gl.UNSIGNED_SHORT,0);v99+=OBJ[e].Triangles}}function f236(e){if(!(OBJ[e].Triangles<1)&&-1!=v105[v141].vertexPositionAttribute&&-1!=v105[v141].textureCoordAttribute){for(var t=0;t<OBJ[e].ObjCount;t++)-1!=OBJ[e].SubOBJ[t].TextureID&&(PrevTexture=-1,gl.activeTexture(gl.TEXTURE0),gl.bindTexture(gl.TEXTURE_2D,OBJ_Texture[OBJ[e].SubOBJ[t].TextureID])),gl.bindBuffer(gl.ARRAY_BUFFER,OBJ[e].SubOBJ[t].VertexPositionBuffer),gl.vertexAttribPointer(v105[v141].vertexPositionAttribute,OBJ[e].SubOBJ[t].VertexPositionBuffer.itemSize,gl.FLOAT,!1,0,0),gl.bindBuffer(gl.ARRAY_BUFFER,OBJ[e].SubOBJ[t].VertexTextureCoordBuffer),gl.vertexAttribPointer(v105[v141].textureCoordAttribute,OBJ[e].SubOBJ[t].VertexTextureCoordBuffer.itemSize,gl.FLOAT,!1,0,0),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,OBJ[e].SubOBJ[t].VertexIndexBuffer),f13(),gl.drawElements(gl.TRIANGLES,OBJ[e].SubOBJ[t].VertexIndexBuffer.numItems,gl.UNSIGNED_SHORT,0);v99+=OBJ[e].Triangles}}function f206(){this.Name,this.Triangles=0,this.Vertexs=0,this.UVs=0,this.Material,this.VertexPositionBuffer,this.TextureCoordBuffer,this.VertexIndexBuffer,this.TextureID=-1,this.NoShadow=0,this.MinX=1e5,this.MaxX=-1e5,this.MinY=1e5,this.MaxY=-1e5,this.MinZ=1e5,this.MaxZ=-1e5}function f237(){this.x=0,this.y=0,this.z=0,this.w=0}function f252(){this.va=0,this.vb=0,this.vc=0,this.ta=0,this.tb=0,this.tc=0}function f238(){this.Vec=0,this.UV=0}function f184(){this.x=0,this.z=0,this.type=0,this.activated=0,this.Rot=0}function f27(){}var v267=new Array,v268=new Array,v81=0,v178=new Array,v39=0;function f98(){0!=v267.length&&(v267=[]),v81=0,0!=v178.length&&(v178=[]),v39=0,0!=Wall.length&&(Wall=[]),v266=0}function f99(e){if(0!=OBJ[e].Triangles){OBJ[e].Triangles=0;for(var t=0;t<OBJ[e].ObjCount;t++)gl.deleteBuffer(OBJ[e].SubOBJ[t].VertexPositionBuffer),gl.deleteBuffer(OBJ[e].SubOBJ[t].TextureCoordBuffer),gl.deleteBuffer(OBJ[e].SubOBJ[t].VertexIndexBuffer);return OBJ[e].ObjCount=0,1}return 0}function f239(e,t){DataToDownload++,v97++,f99(e);var v,r=0;famobi.log(_Tx(149)+e+"]:"+t+v222),(v=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")).onreadystatechange=function(){if(4==v.readyState){var t,a=v.responseText.split("\n");if(a.length<3)return;var n=0,o=-1,i=new Array,f=0,s=new Array,l=0,u=new Array,c=0,d=0;for(OBJ[e].SubOBJ=new Array,t=0;t<a.length;t++){if(3==n&&"f"!=a[t][0]&&OBJ[e].SubOBJ[o].Name.substring(0,6)==_Tx(151)){var x=i[h=u[d].vc-1].x,g=i[h].y;OBJ[e].Max_X<x&&(OBJ[e].Max_X=x),OBJ[e].Marker.push,OBJ[e].Marker[OBJ[e].MarkersCount]=new f237,OBJ[e].Marker[OBJ[e].MarkersCount].x=x,OBJ[e].Marker[OBJ[e].MarkersCount].y=g,OBJ[e].Marker[OBJ[e].MarkersCount].z=g,OBJ[e].MarkersCount++,n=0,o--,OBJ[e].ObjCount--}if(3==n&&"f"!=a[t][0]&&OBJ[e].SubOBJ[o].Name.substring(0,7)==_Tx(152)&&(n=0,o--,OBJ[e].ObjCount--),3==n&&"f"!=a[t][0]&&OBJ[e].SubOBJ[o].Name.substring(0,8)==_Tx(153)){var h=u[d].va-1,B=u[d].vb-1;v178.push,v178[v39]=new f184,v178[v39].x=i[h].x,v178[v39].z=i[h].z,v178[v39].Rot=f247(i[h].x,i[h].z,i[B].x,i[B].z),OBJ[e].SubOBJ[o].Name.substring(0,11)==_Tx(154)&&(v178[v39].type=1),OBJ[e].SubOBJ[o].Name.substring(0,12)==_Tx(155)&&(v178[v39].type=2),OBJ[e].SubOBJ[o].Name.substring(0,13)==_Tx(156)&&(v178[v39].type=3),OBJ[e].SubOBJ[o].Name.substring(0,11)==_Tx(157)&&(v178[v39].type=4),OBJ[e].SubOBJ[o].Name.substring(0,12)==_Tx(158)&&(v178[v39].type=5),v39++,n=0,o--,OBJ[e].ObjCount--}if(3==n&&"f"!=a[t][0]&&OBJ[e].SubOBJ[o].Name.substring(0,9)==_Tx(160)){h=u[d].va-1;v267.push,v267[v81]=new f184,v267[v81].x=i[h].x,v267[v81].z=i[h].z,v81++,n=0,o--,OBJ[e].ObjCount--}if(3==n&&"f"!=a[t][0]){if(OBJ[e].SubOBJ[o].Name.substring(0,9)==_Tx(168)?OBJ[e].SubOBJ[o].NoShadow=1:OBJ[e].SubOBJ[o].NoShadow=0,"Wall"==OBJ[e].SubOBJ[o].Name.substring(0,4))for(var T=d;T<c;T++){h=u[T].va-1,B=u[T].vb-1;var b=u[T].vc-1;i[h].y<.1&&i[B].y<.1&&f301(i[h].x,i[h].z,i[B].x,i[B].z),i[B].y<.1&&i[b].y<.1&&f301(i[B].x,i[B].z,i[b].x,i[b].z),i[b].y<.1&&i[h].y<.1&&f301(i[b].x,i[b].z,i[h].x,i[h].z)}var m=new Array,p=0,_=new Array,S=0,R=new Array,M=0;for(T=d;T<c;T++){m.push,m[p]=p,p++;var A=u[T].va-1;_.push,_[S]=i[A].x,_.push,_[S+1]=i[A].y,_.push,_[S+2]=i[A].z,S+=3;var E=u[T].ta-1;R.push,R[M]=s[E].x,R.push,R[M+1]=s[E].y,M+=2,m.push,m[p]=p,p++;A=u[T].vb-1;_.push,_[S]=i[A].x,_.push,_[S+1]=i[A].y,_.push,_[S+2]=i[A].z,S+=3;E=u[T].tb-1;R.push,R[M]=s[E].x,R.push,R[M+1]=s[E].y,M+=2,m.push,m[p]=p,p++;A=u[T].vc-1;_.push,_[S]=i[A].x,_.push,_[S+1]=i[A].y,_.push,_[S+2]=i[A].z,S+=3;E=u[T].tc-1;R.push,R[M]=s[E].x,R.push,R[M+1]=s[E].y,M+=2}for(T=0;T<p;T++)for(var y=m[T],F=T;F<p;F++){var w=m[F];if(T!=F&&m[T]!=m[F]&&_[3*y]==_[3*w]&&_[3*y+1]==_[3*w+1]&&_[3*y+2]==_[3*w+2]&&R[2*y]==R[2*w]&&R[2*y+1]==R[2*w+1]){m[F]=y,_[3*w]=_[3*S],_[3*w+1]=_[3*S+1],_[3*w+2]=_[3*S+2],R[2*w]=R[2*M],R[2*w+1]=R[2*M+1];for(var C=F;C<p+1;C++)m[T]==S&&(m[T]=w);S--,M--}}OBJ[e].SubOBJ[o].VertexPositionBuffer=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,OBJ[e].SubOBJ[o].VertexPositionBuffer),gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(_),gl.STATIC_DRAW),OBJ[e].SubOBJ[o].VertexPositionBuffer.itemSize=3,OBJ[e].SubOBJ[o].VertexPositionBuffer.numItems=S/3,OBJ[e].SubOBJ[o].VertexTextureCoordBuffer=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,OBJ[e].SubOBJ[o].VertexTextureCoordBuffer),gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(R),gl.STATIC_DRAW),OBJ[e].SubOBJ[o].VertexTextureCoordBuffer.itemSize=2,OBJ[e].SubOBJ[o].VertexTextureCoordBuffer.numItems=M/2,OBJ[e].SubOBJ[o].VertexIndexBuffer=gl.createBuffer(),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,OBJ[e].SubOBJ[o].VertexIndexBuffer),gl.bufferData(gl.ELEMENT_ARRAY_BUFFER,new Uint16Array(m),gl.STATIC_DRAW),OBJ[e].SubOBJ[o].VertexIndexBuffer.itemSize=1,OBJ[e].SubOBJ[o].VertexIndexBuffer.numItems=p,n=999}if(3==n&&"f"==a[t][0]){var V,I,W,O,U,P,L,G=-1,D=a[t].substring(2).split(" ");for(T=0;T<D.length;T++){var X=D[T].split("/");0==T&&(V=parseInt(X[0]),O=parseInt(X[1])),1==T&&(I=parseInt(X[0]),U=parseInt(X[1])),2==T&&(W=parseInt(X[0]),P=parseInt(X[1])),3==T&&(G=parseInt(X[0]),L=parseInt(X[1]))}u.push,u[c]=new f252,u[c].va=V,u[c].vb=I,u[c].vc=W,u[c].ta=O,u[c].tb=U,u[c].tc=P,c++,OBJ[e].SubOBJ[o].Triangles++,r++,D[3].length>2&&(u.push,u[c]=new f252,u[c].va=V,u[c].vb=W,u[c].vc=G,u[c].ta=O,u[c].tb=P,u[c].tc=L,c++,OBJ[e].SubOBJ[o].Triangles++,OBJ[e].Triangles++,r++)}if(2==n&&"v"!=a[t][0]&&(n=3),2==n&&"v"==a[t][0]&&"t"==a[t][1]){s.push,s[l]=new f237;D=a[t].substring(3).split(" ");s[l].x=parseFloat(D[0]),s[l].y=parseFloat(D[1]),s[l].z=0,l++,OBJ[e].SubOBJ[o].UVs++}if(1==n&&"v"!=a[t][0]&&(n=2),1==n&&"v"==a[t][0]){i.push,i[f]=new f237;D=a[t].substring(2).split(" ");i[f].x=parseFloat(D[0]),i[f].y=parseFloat(D[1]),i[f].z=parseFloat(D[2]),OBJ[e].SubOBJ[o].MinX>i[f].x&&(OBJ[e].SubOBJ[o].MinX=i[f].x),OBJ[e].SubOBJ[o].MaxX<i[f].x&&(OBJ[e].SubOBJ[o].MaxX=i[f].x),OBJ[e].SubOBJ[o].MinY>i[f].y&&(OBJ[e].SubOBJ[o].MinY=i[f].y),OBJ[e].SubOBJ[o].MaxY<i[f].y&&(OBJ[e].SubOBJ[o].MaxY=i[f].y),OBJ[e].SubOBJ[o].MinZ>i[f].z&&(OBJ[e].SubOBJ[o].MinZ=i[f].z),OBJ[e].SubOBJ[o].MaxZ<i[f].z&&(OBJ[e].SubOBJ[o].MaxZ=i[f].z),f++,OBJ[e].SubOBJ[o].Vertexs++}"g"==a[t][0]&&(o++,OBJ[e].ObjCount++,OBJ[e].SubOBJ.push,OBJ[e].SubOBJ[o]=new f206,OBJ[e].SubOBJ[o].Vertexs=0,OBJ[e].SubOBJ[o].Name=a[t].substring(2),d=c,"u"==a[t+1][0]&&(OBJ[e].SubOBJ[o].TextureID=f96(a[t+1].substring(7))),t++,n=1)}OBJ[e].Triangles=r,DataToDownload--,v97--,f27()}},v.open("GET",_Tx(178)+t+v222,!0),v.send()}function f277(){this.Triangles=0,this.ObjCount=0,this.SubOBJ,this.Min_X=0,this.Max_X=0,this.MarkersCount=0,this.Marker=new Array}function f207(){var e;for(e=0;e<50;e++)OBJ.push,OBJ[e]=new f277;for(e=0;e<MaxObjTextures;e++)OBJ_Texture.push,OBJ_Texture_Name.push,OBJ_Texture_Name[e]="none"}function f302(e,t,v,r,a,n,o,i,f,s,l,u){this.Name=e,this.MaterialID=t,this.UV=v,this.Vertex=r,this.Normals=a,this.Index=n,this.Min_X=o,this.Min_Y=i,this.Min_Z=f,this.Max_X=s,this.Max_Y=l,this.Max_Z=u,this.VertexsBuffer,this.NormalsBuffer,this.UVsBuffer,this.IndexBuffer}function f240(){this.MatID,this.TextureName,this.TextureID,this.R=1,this.G=1,this.B=1,this.MatName,this.Effect_ID=0,this.Effect_ValueA=0,this.Effect_ValueB=0,this.Effect_ValueC=0}function f253(e,t){this.Name,this.Matrix=mat4.create(),this.v175=mat4.create()}function f303(){this.Material=[],this.SubObj=[],this.Element=[],this.v175=mat4.create()}var v269=[];function f140(e,t,v){v269[e].Element.push();var r=v269[e].Element.length;v269[e].Element[r]=new f253,v269[e].Element[r].Name=t.toLowerCase();for(var a=v.split(" "),n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i=0;i<a.length;i++)n[i]=parseFloat(a[i]);o[0]=n[2],o[1]=n[1],o[2]=-n[0],o[3]=0,o[4]=n[5],o[5]=n[4],o[6]=-n[3],o[7]=0,o[8]=n[8],o[9]=n[7],o[10]=-n[6],o[11]=0,o[12]=n[11],o[13]=n[10],o[14]=-n[9],o[15]=1,mat4.copy(v269[e].Element[r].Matrix,o),famobi.log(_Tx(179)+r+"]:",t),famobi.log("f140 ["+r+"]:",o)}function f100(e,t,v,r,a,n,o,i,f,s,l,u,c){v269[e].SubObj.push();for(var d=v269[e].SubObj.length,x=-1,g=0;g<v269[e].Material.length;g++)if(v==v269[e].Material[g].MatID){x=g;break}v269[e].SubObj[d]=new f302(t,x,r,a,n,o,i,f,s,l,u,c),v269[e].SubObj[d].VertexsBuffer=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,v269[e].SubObj[d].VertexsBuffer),gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(a),gl.STATIC_DRAW),v269[e].SubObj[d].VertexsBuffer.itemSize=3,v269[e].SubObj[d].VertexsBuffer.numItems=a.length/3,v269[e].SubObj[d].NormalsBuffer=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,v269[e].SubObj[d].NormalsBuffer),gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(n),gl.STATIC_DRAW),v269[e].SubObj[d].NormalsBuffer.itemSize=3,v269[e].SubObj[d].NormalsBuffer.numItems=n.length/3,v269[e].SubObj[d].UVsBuffer=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,v269[e].SubObj[d].UVsBuffer),gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(r),gl.STATIC_DRAW),v269[e].SubObj[d].UVsBuffer.itemSize=2,v269[e].SubObj[d].UVsBuffer.numItems=r.length/2,v269[e].SubObj[d].IndexBuffer=gl.createBuffer(),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,v269[e].SubObj[d].IndexBuffer),gl.bufferData(gl.ELEMENT_ARRAY_BUFFER,new Uint16Array(o),gl.STATIC_DRAW),v269[e].SubObj[d].IndexBuffer.itemSize=1,v269[e].SubObj[d].IndexBuffer.numItems=o.length}var v30=!0,Mesh_EnableTexture=!0,v41=!1,v48=!1;function f278(e){var t=-1;if(-1!=v105[v141].vertexPositionAttribute&&-1!=v105[v141].textureCoordAttribute&&!(v269[e].SubObj.length<1))for(var v=0;v<v269[e].SubObj.length;v++)if(0==v41||1==v41&&1==f119(v269[e].SubObj[v].Min_X,v269[e].SubObj[v].Min_Y,v269[e].SubObj[v].Min_Z,v269[e].SubObj[v].Max_X,v269[e].SubObj[v].Max_Y,v269[e].SubObj[v].Max_Z)){if(-1!=v269[e].SubObj[v].MaterialID&&(1==Mesh_EnableTexture&&(gl.activeTexture(gl.TEXTURE0),gl.bindTexture(gl.TEXTURE_2D,OBJ_Texture[v269[e].Material[v269[e].SubObj[v].MaterialID].TextureID])),1==v30)){var r=v269[e].SubObj[v].MaterialID;switch(v269[e].Material[r].Effect_ID){case-1:f181(v269[e].Material[r].R,v269[e].Material[r].G,v269[e].Material[r].B,1);break;case v31:t=v141,0==v48?f228(1):(f228(5),f31(2),mat4.copy(v175,ShadowMav296),f181(.6,.5,.4,1));break;case v59:t=v141,f228(13),f181(v269[e].Material[r].Effect_ValueA,v269[e].Material[r].Effect_ValueB,v269[e].Material[r].Effect_ValueC,v252)}}gl.bindBuffer(gl.ARRAY_BUFFER,v269[e].SubObj[v].VertexsBuffer),gl.vertexAttribPointer(v105[v141].vertexPositionAttribute,v269[e].SubObj[v].VertexsBuffer.itemSize,gl.FLOAT,!1,0,0),-1!=v105[v141].vertexNormalAttribute&&(gl.bindBuffer(gl.ARRAY_BUFFER,v269[e].SubObj[v].NormalsBuffer),gl.vertexAttribPointer(v105[v141].vertexNormalAttribute,v269[e].SubObj[v].NormalsBuffer.itemSize,gl.FLOAT,!1,0,0)),gl.bindBuffer(gl.ARRAY_BUFFER,v269[e].SubObj[v].UVsBuffer),gl.vertexAttribPointer(v105[v141].textureCoordAttribute,v269[e].SubObj[v].UVsBuffer.itemSize,gl.FLOAT,!1,0,0),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,v269[e].SubObj[v].IndexBuffer),f13(),gl.drawElements(gl.TRIANGLES,v269[e].SubObj[v].IndexBuffer.numItems,gl.UNSIGNED_SHORT,0),v99+=v269[e].SubObj[v].Index.length/3,-1!=t&&(f228(t),t=-1)}}var v31=1,v59=2;function f121(e,t,v,r,a,n,o){v269[e].Material.push();var i=v269[e].Material.length;if(v269[e].Material[i]=new f240,v269[e].Material[i].MatID=t,v269[e].Material[i].MatName=v,v269[e].Material[i].TextureName=r,v269[e].Material[i].R=a,v269[e].Material[i].G=n,v269[e].Material[i].B=o,v269[e].Material[i].TextureID=f96(r),0==v.search(_Tx(181))){var f=v.split(" "),s=f[0].substring(7),l=f[1].substring(6).split("/");v269[e].Material[i].Effect_ID=0,s.toLowerCase()==_Tx(183)&&(v269[e].Material[i].Effect_ID=v31),"flag"==s.toLowerCase()&&(v269[e].Material[i].Effect_ID=v59),v269[e].Material[i].Effect_ValueA=parseFloat(l[0]),v269[e].Material[i].Effect_ValueB=parseFloat(l[1]),v269[e].Material[i].Effect_ValueC=parseFloat(l[2])}}function f241(e){v269[e].Material=[],v269[e].SubObj=[]}function f279(){for(var e=0;e<100;e++)v269.push(),v269[e]=new f303}function f122(e,t){for(var v=t.split("\n"),r=0;r<v.length;r++){if(0==v[r].search("Mat ")){var a=v[r].substring(4),n=v[r+1].substring(4),o=v[r+2].split(" ");f121(e,a,v[r+3].substring(4),n,parseFloat(o[1]),parseFloat(o[2]),parseFloat(o[3])),r+=3}if(0==v[r].search(_Tx(186)))f140(e,v[r].substring(8),v[r+1].substring(14));if(0==v[r].search("Obj ")){for(var i=v[r].substring(4),f=v[r+1].substring(4),s=v[r+2].substring(4).split(" "),l=v[r+3].substring(4).split(" "),u=v[r+4].substring(4).split(" "),c=v[r+5].substring(4).split(" "),d=v[r+6].substring(4).split(" "),x=0;x<l.length;x++)l[x]=parseFloat(l[x]);for(x=0;x<u.length;x++)u[x]=parseFloat(u[x]);for(x=0;x<c.length;x++)c[x]=parseFloat(c[x]);for(x=0;x<d.length;x++)d[x]=parseInt(d[x]);f100(e,i,f,l,u,c,d,parseFloat(s[0]),parseFloat(s[1]),parseFloat(s[2]),parseFloat(s[3]),parseFloat(s[4]),parseFloat(s[5])),r+=5}}DataToDownload--,v97--}function f280(e,t){if(DataToDownload++,v97++,v269[e].SubObj.length>0){for(var v=0;v<v269[e].SubObj.length;v++)1==gl.isBuffer(v269[e].SubObj[v].VertexsBuffer)&&gl.deleteBuffer(v269[e].SubObj[v].VertexsBuffer),1==gl.isBuffer(v269[e].SubObj[v].NormalsBuffer)&&gl.deleteBuffer(v269[e].SubObj[v].NormalsBuffer),1==gl.isBuffer(v269[e].SubObj[v].UVsBuffer)&&gl.deleteBuffer(v269[e].SubObj[v].UVsBuffer),1==gl.isBuffer(v269[e].SubObj[v].IndexBuffer)&&gl.deleteBuffer(v269[e].SubObj[v].IndexBuffer);v269[e]=[],v269[e]=new f303}var r;(r=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")).onreadystatechange=function(){if(r.readyState,r.readyState,r.readyState,r.readyState,4==r.readyState){var t=r.response;(new JSZip).loadAsync(t).then(function(e){return e.file("mesh").async("text")}).then(function(t){f122(e,t)})}},r.open("GET","datas/objects/"+t+".mesh"+v222,!0),r.responseType="blob",r.send()}var v211=[];function f84(){this.Parent=0,this.Lenght=0,this.IsSpring=0,this.SpringSpeed=0,this.SpringDamper=0,this.Matrix=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.MatrixRela=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.MatrixInverse=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}function f166(){this.Triangles=0,this.Vertexs=0,this.UVs=0,this.VertexPositionBuffer=null,this.NormalBuffer=null,this.TextureCoordBuffer=null,this.VertexIndexBuffer=null,this.Bones=[],this.BoneLabTempVertex=[],this.BoneLabTempNormal=[],this.BoneLabTempUV=[],this.BoneLabTempIndex=[],this.AnimID=-1,this.AnimFrame=0,this.Prev_AnimID=-1,this.Prev_AnimFrame=-1,this.AnimSlide=0,this.AnimSmooth=0,this.AttachedToMeshID=-1,this.AttachedToBoneID=-1,this.RotationX=0,this.RotationY=0,this.RotationZ=0,this.v175=mat4.create()}function f208(){var e;for(e=0;e<500;e++)v211.push()}function f12(e){if(null!=v105[v141].BonesPositionUniform){for(var t=[],v=0;v<v211[e].Bones.length;v++)t.push(v211[e].Bones[v].Matrix[12]),t.push(v211[e].Bones[v].Matrix[13]),t.push(v211[e].Bones[v].Matrix[14]),t.push(v211[e].Bones[v].Matrix[0]),t.push(v211[e].Bones[v].Matrix[1]),t.push(v211[e].Bones[v].Matrix[2]),t.push(v211[e].Bones[v].Matrix[4]),t.push(v211[e].Bones[v].Matrix[5]),t.push(v211[e].Bones[v].Matrix[6]),t.push(v211[e].Bones[v].Matrix[8]),t.push(v211[e].Bones[v].Matrix[9]),t.push(v211[e].Bones[v].Matrix[10]);gl.uniform3fv(v105[v141].BonesPositionUniform,new Float32Array(t))}}function f123(e){v211[e].Triangles<1||(gl.bindBuffer(gl.ARRAY_BUFFER,v211[e].VertexPositionBuffer),gl.vertexAttribPointer(v105[v141].vertexPositionAttribute,v211[e].VertexPositionBuffer.itemSize,gl.FLOAT,!1,0,0),-1!=v105[v141].vertexNormalAttribute&&(gl.bindBuffer(gl.ARRAY_BUFFER,v211[e].NormalBuffer),gl.vertexAttribPointer(v105[v141].vertexNormalAttribute,v211[e].NormalBuffer.itemSize,gl.FLOAT,!1,0,0)),gl.bindBuffer(gl.ARRAY_BUFFER,v211[e].VertexTextureCoordBuffer),gl.vertexAttribPointer(v105[v141].textureCoordAttribute,v211[e].VertexTextureCoordBuffer.itemSize,gl.FLOAT,!1,0,0),f13(),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,v211[e].VertexIndexBuffer),gl.drawElements(gl.TRIANGLES,v211[e].VertexIndexBuffer.numItems,gl.UNSIGNED_SHORT,0),v99+=v211[e].Triangles)}function f18(e,t,v){v211[e].AttachedToMeshID=t,v211[e].AttachedToBoneID=v}function f67(e,t){v211[e].RotationX=t}function f68(e,t){v211[e].RotationY=t}function f69(e,t){v211[e].RotationZ=t}function f47(e){for(var t=v211[e].BoneLabTempVertex.length,v=v211[e].BoneLabTempUV.length,r=v211[e].BoneLabTempIndex.length,a=[],n=0;n<t;n++)a.push(v211[e].BoneLabTempVertex[n].x),a.push(v211[e].BoneLabTempVertex[n].y),a.push(v211[e].BoneLabTempVertex[n].z),a.push(v211[e].BoneLabTempVertex[n].w);var o=[];for(n=0;n<t;n++)o.push(v211[e].BoneLabTempNormal[n].x),o.push(v211[e].BoneLabTempNormal[n].y),o.push(v211[e].BoneLabTempNormal[n].z);var i=[];for(n=0;n<v;n++)i.push(v211[e].BoneLabTempUV[n].x),i.push(1-v211[e].BoneLabTempUV[n].y);var f=[];for(n=0;n<r;n++)f.push(v211[e].BoneLabTempIndex[n].x-1),f.push(v211[e].BoneLabTempIndex[n].y-1),f.push(v211[e].BoneLabTempIndex[n].z-1);v211[e].VertexPositionBuffer=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,v211[e].VertexPositionBuffer),gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(a),gl.STATIC_DRAW),v211[e].VertexPositionBuffer.itemSize=4,v211[e].VertexPositionBuffer.numItems=t,v211[e].NormalBuffer=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,v211[e].NormalBuffer),gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(o),gl.STATIC_DRAW),v211[e].NormalBuffer.itemSize=3,v211[e].NormalBuffer.numItems=t,v211[e].VertexTextureCoordBuffer=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,v211[e].VertexTextureCoordBuffer),gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(i),gl.STATIC_DRAW),v211[e].VertexTextureCoordBuffer.itemSize=2,v211[e].VertexTextureCoordBuffer.numItems=v,v211[e].VertexIndexBuffer=gl.createBuffer(),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,v211[e].VertexIndexBuffer),gl.bufferData(gl.ELEMENT_ARRAY_BUFFER,new Uint16Array(f),gl.STATIC_DRAW),v211[e].VertexIndexBuffer.itemSize=1,v211[e].VertexIndexBuffer.numItems=3*r}function f124(e,t){var v;null!=v211[e]&&(1==gl.isBuffer(v211[e].VertexPositionBuffer)&&(gl.deleteBuffer(v211[e].VertexPositionBuffer),v211[e].VertexPositionBuffer=null),1==gl.isBuffer(v211[e].NormalBuffer)&&(gl.deleteBuffer(v211[e].NormalBuffer),v211[e].NormalBuffer=null),1==gl.isBuffer(v211[e].TextureCoordBuffer)&&(gl.deleteBuffer(v211[e].TextureCoordBuffer),v211[e].TextureCoordBuffer=null),1==gl.isBuffer(v211[e].VertexIndexBuffer)&&(gl.deleteBuffer(v211[e].VertexIndexBuffer),v211[e].VertexIndexBuffer=null)),v211[e]=new f166,DataToDownload++,v97++,(v=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")).onreadystatechange=function(){if(v.readyState,v.readyState,v.readyState,v.readyState,4==v.readyState){var t,r=0,a=v.responseText.split("\n");if(a.length<3)return;var n=0;for(t=0;t<a.length;t++){if(4==n){if(0==a[t].search(_Tx(195))&&(r=v211[e].Bones.length,v211[e].Bones.push(),v211[e].Bones[r]=new f84),0==a[t].search(_Tx(197))){var o=a[t].split(" ");v211[e].Bones[r].Parent=parseInt(o[1])}if(0==a[t].search(_Tx(199))){o=a[t].split(" ");v211[e].Bones[r].Lenght=parseFloat(o[1])}if(0==a[t].search(_Tx(201))){o=a[t].split(" ");v211[e].Bones[r].IsSpring=parseInt(o[1])}if(0==a[t].search(_Tx(203))){o=a[t].split(" ");v211[e].Bones[r].SpringSpeed=parseFloat(o[1])}if(0==a[t].search(_Tx(205))){o=a[t].split(" ");v211[e].Bones[r].SpringDamper=parseFloat(o[1])}if(0==a[t].search(_Tx(207))){o=a[t].split(" ");v211[e].Bones[r].Matrix[0]=parseFloat(o[1]),v211[e].Bones[r].Matrix[1]=parseFloat(o[2]),v211[e].Bones[r].Matrix[2]=parseFloat(o[3]),v211[e].Bones[r].Matrix[3]=parseFloat(o[4]),v211[e].Bones[r].Matrix[4]=parseFloat(o[5]),v211[e].Bones[r].Matrix[5]=parseFloat(o[6]),v211[e].Bones[r].Matrix[6]=parseFloat(o[7]),v211[e].Bones[r].Matrix[7]=parseFloat(o[8]),v211[e].Bones[r].Matrix[8]=parseFloat(o[9]),v211[e].Bones[r].Matrix[9]=parseFloat(o[10]),v211[e].Bones[r].Matrix[10]=parseFloat(o[11]),v211[e].Bones[r].Matrix[11]=parseFloat(o[12]),v211[e].Bones[r].Matrix[12]=parseFloat(o[13]),v211[e].Bones[r].Matrix[13]=parseFloat(o[14]),v211[e].Bones[r].Matrix[14]=parseFloat(o[15]),v211[e].Bones[r].Matrix[15]=parseFloat(o[16])}if(0==a[t].search(_Tx(208))){o=a[t].split(" ");v211[e].Bones[r].MatrixRela[0]=parseFloat(o[1]),v211[e].Bones[r].MatrixRela[1]=parseFloat(o[2]),v211[e].Bones[r].MatrixRela[2]=parseFloat(o[3]),v211[e].Bones[r].MatrixRela[3]=parseFloat(o[4]),v211[e].Bones[r].MatrixRela[4]=parseFloat(o[5]),v211[e].Bones[r].MatrixRela[5]=parseFloat(o[6]),v211[e].Bones[r].MatrixRela[6]=parseFloat(o[7]),v211[e].Bones[r].MatrixRela[7]=parseFloat(o[8]),v211[e].Bones[r].MatrixRela[8]=parseFloat(o[9]),v211[e].Bones[r].MatrixRela[9]=parseFloat(o[10]),v211[e].Bones[r].MatrixRela[10]=parseFloat(o[11]),v211[e].Bones[r].MatrixRela[11]=parseFloat(o[12]),v211[e].Bones[r].MatrixRela[12]=parseFloat(o[13]),v211[e].Bones[r].MatrixRela[13]=parseFloat(o[14]),v211[e].Bones[r].MatrixRela[14]=parseFloat(o[15]),v211[e].Bones[r].MatrixRela[15]=parseFloat(o[16])}if(0==a[t].search(_Tx(209))){o=a[t].split(" ");v211[e].Bones[r].MatrixInverse[0]=parseFloat(o[1]),v211[e].Bones[r].MatrixInverse[1]=parseFloat(o[2]),v211[e].Bones[r].MatrixInverse[2]=parseFloat(o[3]),v211[e].Bones[r].MatrixInverse[3]=parseFloat(o[4]),v211[e].Bones[r].MatrixInverse[4]=parseFloat(o[5]),v211[e].Bones[r].MatrixInverse[5]=parseFloat(o[6]),v211[e].Bones[r].MatrixInverse[6]=parseFloat(o[7]),v211[e].Bones[r].MatrixInverse[7]=parseFloat(o[8]),v211[e].Bones[r].MatrixInverse[8]=parseFloat(o[9]),v211[e].Bones[r].MatrixInverse[9]=parseFloat(o[10]),v211[e].Bones[r].MatrixInverse[10]=parseFloat(o[11]),v211[e].Bones[r].MatrixInverse[11]=parseFloat(o[12]),v211[e].Bones[r].MatrixInverse[12]=parseFloat(o[13]),v211[e].Bones[r].MatrixInverse[13]=parseFloat(o[14]),v211[e].Bones[r].MatrixInverse[14]=parseFloat(o[15]),v211[e].Bones[r].MatrixInverse[15]=parseFloat(o[16])}}if(3==n){if(3==(o=a[t].split("\t")).length){v211[e].BoneLabTempIndex.push();var i=v211[e].BoneLabTempIndex.length;v211[e].BoneLabTempIndex[i]=new f237,v211[e].BoneLabTempIndex[i].x=parseInt(o[0]),v211[e].BoneLabTempIndex[i].y=parseInt(o[1]),v211[e].BoneLabTempIndex[i].z=parseInt(o[2])}0==a[t].search("Bones")&&(n=4)}if(2==n){if(2==(o=a[t].split("\t")).length){v211[e].BoneLabTempUV.push();i=v211[e].BoneLabTempUV.length;v211[e].BoneLabTempUV[i]=new f237,v211[e].BoneLabTempUV[i].x=parseFloat(o[0]),v211[e].BoneLabTempUV[i].y=parseFloat(o[1])}0==a[t].search("Index")&&(n=3)}if(1==n){if(7==(o=a[t].split(" ")).length){v211[e].BoneLabTempVertex.push();i=v211[e].BoneLabTempVertex.length;v211[e].BoneLabTempVertex[i]=new f237,v211[e].BoneLabTempVertex[i].x=parseFloat(o[0]),v211[e].BoneLabTempVertex[i].y=parseFloat(o[1]),v211[e].BoneLabTempVertex[i].z=parseFloat(o[2]),v211[e].BoneLabTempVertex[i].w=parseInt(o[6]),v211[e].BoneLabTempNormal.push(),v211[e].BoneLabTempNormal[i]=new f237,v211[e].BoneLabTempNormal[i].x=parseFloat(o[3]),v211[e].BoneLabTempNormal[i].y=parseFloat(o[4]),v211[e].BoneLabTempNormal[i].z=parseFloat(o[5])}0==a[t].search("UV")&&(n=2)}if(0==n){if(0==a[t].search(_Tx(210))){o=a[t].split(" ");v211[e].Vertexs=parseInt(o[1])}if(0==a[t].search(_Tx(212))){o=a[t].split(" ");v211[e].Triangles=parseInt(o[1]),n=1}}}f47(e),DataToDownload--,v97--}},v.open("GET",_Tx(217)+t+v222,!0),v.send()}var BoneLabAnimation=[];function f48(){this.TinyMatrix=[0,0,0,0,0,0,0,0,0,0,0,0]}function f49(){this.BoneCount=0,this.Bone=[]}function f50(){this.FrameCount=0,this.OneFrame=[],this.NextAnim=-1,this.Speed=1}function f185(){for(var e=0;e<50;e++)BoneLabAnimation.push,BoneLabAnimation[e]=new f50}function f51(e,t,v){var r=v211[e].AnimID,a=v211[e].AnimFrame,n=v211[e].Prev_AnimID,o=v211[e].Prev_AnimFrame,i=v211[e].AnimSlide;i>1&&(i=1),i<0&&(i=0);var f=1-i;return BoneLabAnimation[n].OneFrame[o].Bone[t].TinyMatrix[v]*f+BoneLabAnimation[r].OneFrame[a].Bone[t].TinyMatrix[v]*i}function f52(e){return v211[e].AnimID}function f28(e,t){BoneLabAnimation[e].Speed=t}function f14(e,t){BoneLabAnimation[e].NextAnim=t}function f21(e,t){v211[e].AnimSmooth=t}function f70(e,t){-1!=e&&e!=v211[t].AnimID&&0==v211[t].AnimSmooth&&(v211[t].AnimFrame=0),-1==e?e=v211[t].AnimID:v211[t].AnimID=e,v211[t].AnimSlide+=.03*v260*BoneLabAnimation[e].Speed,v211[t].AnimSlide>1&&(v211[t].AnimSlide-=1,v211[t].Prev_AnimID=v211[t].AnimID,v211[t].Prev_AnimFrame=v211[t].AnimFrame,v211[t].AnimFrame++,v211[t].AnimFrame>BoneLabAnimation[e].FrameCount-2&&(v211[t].AnimFrame=0,v211[t].AnimID=BoneLabAnimation[e].NextAnim)),-1==v211[t].Prev_AnimID&&(v211[t].Prev_AnimID=v211[t].AnimID),-1==v211[t].Prev_AnimFrame&&(v211[t].Prev_AnimFrame=v211[t].AnimFrame);v211[t].AnimFrame;for(var v=v211[t].Bones.length,r=1;r<v;r++){var a=r-1,n=v211[t].Bones[r].Parent;if(-1==n)-1!=v211[t].AttachedToMeshID?v211[t].Bones[r].Matrix=v211[v211[t].AttachedToMeshID].Bones[v211[t].AttachedToBoneID].Matrix:(v211[t].Bones[r].Matrix[0]=f51(t,a,0),v211[t].Bones[r].Matrix[1]=f51(t,a,1),v211[t].Bones[r].Matrix[2]=f51(t,a,2),v211[t].Bones[r].Matrix[4]=f51(t,a,3),v211[t].Bones[r].Matrix[5]=f51(t,a,4),v211[t].Bones[r].Matrix[6]=f51(t,a,5),v211[t].Bones[r].Matrix[8]=f51(t,a,6),v211[t].Bones[r].Matrix[9]=f51(t,a,7),v211[t].Bones[r].Matrix[10]=f51(t,a,8),v211[t].Bones[r].Matrix[12]=f51(t,a,9),v211[t].Bones[r].Matrix[13]=f51(t,a,10),v211[t].Bones[r].Matrix[14]=f51(t,a,11));else if(v211[t].Bones[r].MatrixRela[0]=f51(t,a,0),v211[t].Bones[r].MatrixRela[1]=f51(t,a,1),v211[t].Bones[r].MatrixRela[2]=f51(t,a,2),v211[t].Bones[r].MatrixRela[4]=f51(t,a,3),v211[t].Bones[r].MatrixRela[5]=f51(t,a,4),v211[t].Bones[r].MatrixRela[6]=f51(t,a,5),v211[t].Bones[r].MatrixRela[8]=f51(t,a,6),v211[t].Bones[r].MatrixRela[9]=f51(t,a,7),v211[t].Bones[r].MatrixRela[10]=f51(t,a,8),2==r&&(0!=v211[t].RotationX&&(v211[t].Bones[r].MatrixRela=f139(1,0,0,v211[t].RotationX)),0!=v211[t].RotationY&&(v211[t].Bones[r].MatrixRela=f139(0,1,0,v211[t].RotationY)),0!=v211[t].RotationZ&&(v211[t].Bones[r].MatrixRela=f139(0,0,1,v211[t].RotationZ))),v211[t].Bones[r].MatrixRela[12]=f51(t,a,9),v211[t].Bones[r].MatrixRela[13]=f51(t,a,10),v211[t].Bones[r].MatrixRela[14]=f51(t,a,11),v211[t].AnimSmooth>0){var o=v211[t].AnimSmooth,i=1-o;v211[t].Bones[r].Matrix[0]=v211[t].Bones[r].Matrix[0]*o+(v211[t].Bones[n].Matrix[0]*v211[t].Bones[r].MatrixRela[0]+v211[t].Bones[n].Matrix[4]*v211[t].Bones[r].MatrixRela[1]+v211[t].Bones[n].Matrix[8]*v211[t].Bones[r].MatrixRela[2])*i,v211[t].Bones[r].Matrix[1]=v211[t].Bones[r].Matrix[1]*o+(v211[t].Bones[n].Matrix[1]*v211[t].Bones[r].MatrixRela[0]+v211[t].Bones[n].Matrix[5]*v211[t].Bones[r].MatrixRela[1]+v211[t].Bones[n].Matrix[9]*v211[t].Bones[r].MatrixRela[2])*i,v211[t].Bones[r].Matrix[2]=v211[t].Bones[r].Matrix[2]*o+(v211[t].Bones[n].Matrix[2]*v211[t].Bones[r].MatrixRela[0]+v211[t].Bones[n].Matrix[6]*v211[t].Bones[r].MatrixRela[1]+v211[t].Bones[n].Matrix[10]*v211[t].Bones[r].MatrixRela[2])*i,v211[t].Bones[r].Matrix[3]=0,v211[t].Bones[r].Matrix[4]=v211[t].Bones[r].Matrix[4]*o+(v211[t].Bones[n].Matrix[0]*v211[t].Bones[r].MatrixRela[4]+v211[t].Bones[n].Matrix[4]*v211[t].Bones[r].MatrixRela[5]+v211[t].Bones[n].Matrix[8]*v211[t].Bones[r].MatrixRela[6])*i,v211[t].Bones[r].Matrix[5]=v211[t].Bones[r].Matrix[5]*o+(v211[t].Bones[n].Matrix[1]*v211[t].Bones[r].MatrixRela[4]+v211[t].Bones[n].Matrix[5]*v211[t].Bones[r].MatrixRela[5]+v211[t].Bones[n].Matrix[9]*v211[t].Bones[r].MatrixRela[6])*i,v211[t].Bones[r].Matrix[6]=v211[t].Bones[r].Matrix[6]*o+(v211[t].Bones[n].Matrix[2]*v211[t].Bones[r].MatrixRela[4]+v211[t].Bones[n].Matrix[6]*v211[t].Bones[r].MatrixRela[5]+v211[t].Bones[n].Matrix[10]*v211[t].Bones[r].MatrixRela[6])*i,v211[t].Bones[r].Matrix[7]=0,v211[t].Bones[r].Matrix[8]=v211[t].Bones[r].Matrix[8]*o+(v211[t].Bones[n].Matrix[0]*v211[t].Bones[r].MatrixRela[8]+v211[t].Bones[n].Matrix[4]*v211[t].Bones[r].MatrixRela[9]+v211[t].Bones[n].Matrix[8]*v211[t].Bones[r].MatrixRela[10])*i,v211[t].Bones[r].Matrix[9]=v211[t].Bones[r].Matrix[9]*o+(v211[t].Bones[n].Matrix[1]*v211[t].Bones[r].MatrixRela[8]+v211[t].Bones[n].Matrix[5]*v211[t].Bones[r].MatrixRela[9]+v211[t].Bones[n].Matrix[9]*v211[t].Bones[r].MatrixRela[10])*i,v211[t].Bones[r].Matrix[10]=v211[t].Bones[r].Matrix[10]*o+(v211[t].Bones[n].Matrix[2]*v211[t].Bones[r].MatrixRela[8]+v211[t].Bones[n].Matrix[6]*v211[t].Bones[r].MatrixRela[9]+v211[t].Bones[n].Matrix[10]*v211[t].Bones[r].MatrixRela[10])*i,v211[t].Bones[r].Matrix[11]=0,v211[t].Bones[r].Matrix[12]=v211[t].Bones[r].Matrix[12]*o+(v211[t].Bones[n].Matrix[0]*v211[t].Bones[r].MatrixRela[12]+v211[t].Bones[n].Matrix[4]*v211[t].Bones[r].MatrixRela[13]+v211[t].Bones[n].Matrix[8]*v211[t].Bones[r].MatrixRela[14]+v211[t].Bones[n].Matrix[12])*i,v211[t].Bones[r].Matrix[13]=v211[t].Bones[r].Matrix[13]*o+(v211[t].Bones[n].Matrix[1]*v211[t].Bones[r].MatrixRela[12]+v211[t].Bones[n].Matrix[5]*v211[t].Bones[r].MatrixRela[13]+v211[t].Bones[n].Matrix[9]*v211[t].Bones[r].MatrixRela[14]+v211[t].Bones[n].Matrix[13])*i,v211[t].Bones[r].Matrix[14]=v211[t].Bones[r].Matrix[14]*o+(v211[t].Bones[n].Matrix[2]*v211[t].Bones[r].MatrixRela[12]+v211[t].Bones[n].Matrix[6]*v211[t].Bones[r].MatrixRela[13]+v211[t].Bones[n].Matrix[10]*v211[t].Bones[r].MatrixRela[14]+v211[t].Bones[n].Matrix[14])*i,v211[t].Bones[r].Matrix[15]=1}else v211[t].Bones[r].Matrix[0]=v211[t].Bones[n].Matrix[0]*v211[t].Bones[r].MatrixRela[0]+v211[t].Bones[n].Matrix[4]*v211[t].Bones[r].MatrixRela[1]+v211[t].Bones[n].Matrix[8]*v211[t].Bones[r].MatrixRela[2],v211[t].Bones[r].Matrix[1]=v211[t].Bones[n].Matrix[1]*v211[t].Bones[r].MatrixRela[0]+v211[t].Bones[n].Matrix[5]*v211[t].Bones[r].MatrixRela[1]+v211[t].Bones[n].Matrix[9]*v211[t].Bones[r].MatrixRela[2],v211[t].Bones[r].Matrix[2]=v211[t].Bones[n].Matrix[2]*v211[t].Bones[r].MatrixRela[0]+v211[t].Bones[n].Matrix[6]*v211[t].Bones[r].MatrixRela[1]+v211[t].Bones[n].Matrix[10]*v211[t].Bones[r].MatrixRela[2],v211[t].Bones[r].Matrix[3]=0,v211[t].Bones[r].Matrix[4]=v211[t].Bones[n].Matrix[0]*v211[t].Bones[r].MatrixRela[4]+v211[t].Bones[n].Matrix[4]*v211[t].Bones[r].MatrixRela[5]+v211[t].Bones[n].Matrix[8]*v211[t].Bones[r].MatrixRela[6],v211[t].Bones[r].Matrix[5]=v211[t].Bones[n].Matrix[1]*v211[t].Bones[r].MatrixRela[4]+v211[t].Bones[n].Matrix[5]*v211[t].Bones[r].MatrixRela[5]+v211[t].Bones[n].Matrix[9]*v211[t].Bones[r].MatrixRela[6],v211[t].Bones[r].Matrix[6]=v211[t].Bones[n].Matrix[2]*v211[t].Bones[r].MatrixRela[4]+v211[t].Bones[n].Matrix[6]*v211[t].Bones[r].MatrixRela[5]+v211[t].Bones[n].Matrix[10]*v211[t].Bones[r].MatrixRela[6],v211[t].Bones[r].Matrix[7]=0,v211[t].Bones[r].Matrix[8]=v211[t].Bones[n].Matrix[0]*v211[t].Bones[r].MatrixRela[8]+v211[t].Bones[n].Matrix[4]*v211[t].Bones[r].MatrixRela[9]+v211[t].Bones[n].Matrix[8]*v211[t].Bones[r].MatrixRela[10],v211[t].Bones[r].Matrix[9]=v211[t].Bones[n].Matrix[1]*v211[t].Bones[r].MatrixRela[8]+v211[t].Bones[n].Matrix[5]*v211[t].Bones[r].MatrixRela[9]+v211[t].Bones[n].Matrix[9]*v211[t].Bones[r].MatrixRela[10],v211[t].Bones[r].Matrix[10]=v211[t].Bones[n].Matrix[2]*v211[t].Bones[r].MatrixRela[8]+v211[t].Bones[n].Matrix[6]*v211[t].Bones[r].MatrixRela[9]+v211[t].Bones[n].Matrix[10]*v211[t].Bones[r].MatrixRela[10],v211[t].Bones[r].Matrix[11]=0,v211[t].Bones[r].Matrix[12]=v211[t].Bones[n].Matrix[0]*v211[t].Bones[r].MatrixRela[12]+v211[t].Bones[n].Matrix[4]*v211[t].Bones[r].MatrixRela[13]+v211[t].Bones[n].Matrix[8]*v211[t].Bones[r].MatrixRela[14]+v211[t].Bones[n].Matrix[12],v211[t].Bones[r].Matrix[13]=v211[t].Bones[n].Matrix[1]*v211[t].Bones[r].MatrixRela[12]+v211[t].Bones[n].Matrix[5]*v211[t].Bones[r].MatrixRela[13]+v211[t].Bones[n].Matrix[9]*v211[t].Bones[r].MatrixRela[14]+v211[t].Bones[n].Matrix[13],v211[t].Bones[r].Matrix[14]=v211[t].Bones[n].Matrix[2]*v211[t].Bones[r].MatrixRela[12]+v211[t].Bones[n].Matrix[6]*v211[t].Bones[r].MatrixRela[13]+v211[t].Bones[n].Matrix[10]*v211[t].Bones[r].MatrixRela[14]+v211[t].Bones[n].Matrix[14],v211[t].Bones[r].Matrix[15]=1}v211[t].AnimSmooth>0&&(v211[t].AnimSmooth-=1e-4*v260,v211[t].AnimSmooth<0&&(v211[t].AnimSmooth=0))}function f101(e,t){var v;DataToDownload++,v98++,(v=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")).onreadystatechange=function(){if(4==v.readyState){var t,r=v.responseText.split("\n"),a=0;for(t=0;t<r.length;t++)if(0==r[t].search(_Tx(221))&&(a=BoneLabAnimation[e].FrameCount,BoneLabAnimation[e].OneFrame.push,BoneLabAnimation[e].OneFrame[a]=new f49,BoneLabAnimation[e].NextAnim=e,BoneLabAnimation[e].FrameCount++),0==r[t].search(">")){var n=r[t].split(" "),o=BoneLabAnimation[e].OneFrame[a].BoneCount;BoneLabAnimation[e].OneFrame[a].Bone.push,BoneLabAnimation[e].OneFrame[a].Bone[o]=new f48,BoneLabAnimation[e].OneFrame[a].Bone[o].TinyMatrix[0]=parseFloat(n[2]),BoneLabAnimation[e].OneFrame[a].Bone[o].TinyMatrix[1]=parseFloat(n[3]),BoneLabAnimation[e].OneFrame[a].Bone[o].TinyMatrix[2]=parseFloat(n[4]),BoneLabAnimation[e].OneFrame[a].Bone[o].TinyMatrix[3]=parseFloat(n[5]),BoneLabAnimation[e].OneFrame[a].Bone[o].TinyMatrix[4]=parseFloat(n[6]),BoneLabAnimation[e].OneFrame[a].Bone[o].TinyMatrix[5]=parseFloat(n[7]),BoneLabAnimation[e].OneFrame[a].Bone[o].TinyMatrix[6]=parseFloat(n[8]),BoneLabAnimation[e].OneFrame[a].Bone[o].TinyMatrix[7]=parseFloat(n[9]),BoneLabAnimation[e].OneFrame[a].Bone[o].TinyMatrix[8]=parseFloat(n[10]),BoneLabAnimation[e].OneFrame[a].Bone[o].TinyMatrix[9]=parseFloat(n[11]),BoneLabAnimation[e].OneFrame[a].Bone[o].TinyMatrix[10]=parseFloat(n[12]),BoneLabAnimation[e].OneFrame[a].Bone[o].TinyMatrix[11]=parseFloat(n[13]),BoneLabAnimation[e].OneFrame[a].BoneCount++}return DataToDownload--,void v98--}},v.open("GET","datas/bonelab/"+t+v222,!0),v.send()}var dlg_keyboard_on_screen=0,v8="",v60=0,v82=0,v212=0,v213=0,v49=0,v282=[],v112=_Tx(224);function f209(e,t){this.Sprite=e,this.Char=t}function f186(){if(0==v49){for(var e=0,t=1,v=0,r=0;r<90;r++)f251(100+v,0,e,t,e+41,t+41),85==v&&(f251(100+v,0,e,t,e+41+43,t+41),e+=43),86==v&&(f251(100+v,0,e,t,e+41+43,t+41),e+=43),v++,(e+=43)>510&&(e=0,t+=43);var a=0;(v282=[]).push,v282[a]=new f209(a,"a"),a++,v282.push,v282[a]=new f209(a,"b"),a++,v282.push,v282[a]=new f209(a,"c"),a++,v282.push,v282[a]=new f209(a,"d"),a++,v282.push,v282[a]=new f209(a,"e"),a++,v282.push,v282[a]=new f209(a,"f"),a++,v282.push,v282[a]=new f209(a,"g"),a++,v282.push,v282[a]=new f209(a,"h"),a++,v282.push,v282[a]=new f209(a,"i"),a++,v282.push,v282[a]=new f209(a,"j"),a++,v282.push,v282[a]=new f209(a,"k"),a++,v282.push,v282[a]=new f209(a,"l"),a++,v282.push,v282[a]=new f209(a,"m"),a++,v282.push,v282[a]=new f209(a,"n"),a++,v282.push,v282[a]=new f209(a,"o"),a++,v282.push,v282[a]=new f209(a,"p"),a++,v282.push,v282[a]=new f209(a,"q"),a++,v282.push,v282[a]=new f209(a,"r"),a++,v282.push,v282[a]=new f209(a,"s"),a++,v282.push,v282[a]=new f209(a,"t"),a++,v282.push,v282[a]=new f209(a,"u"),a++,v282.push,v282[a]=new f209(a,"v"),a++,v282.push,v282[a]=new f209(a,"w"),a++,v282.push,v282[a]=new f209(a,"x"),a++,v282.push,v282[a]=new f209(a,"y"),a++,v282.push,v282[a]=new f209(a,"z"),a++,v282.push,v282[a]=new f209(a,"A"),a++,v282.push,v282[a]=new f209(a,"B"),a++,v282.push,v282[a]=new f209(a,"C"),a++,v282.push,v282[a]=new f209(a,"D"),a++,v282.push,v282[a]=new f209(a,"E"),a++,v282.push,v282[a]=new f209(a,"F"),a++,v282.push,v282[a]=new f209(a,"G"),a++,v282.push,v282[a]=new f209(a,"H"),a++,v282.push,v282[a]=new f209(a,"I"),a++,v282.push,v282[a]=new f209(a,"J"),a++,v282.push,v282[a]=new f209(a,"K"),a++,v282.push,v282[a]=new f209(a,"L"),a++,v282.push,v282[a]=new f209(a,"M"),a++,v282.push,v282[a]=new f209(a,"N"),a++,v282.push,v282[a]=new f209(a,"O"),a++,v282.push,v282[a]=new f209(a,"P"),a++,v282.push,v282[a]=new f209(a,"Q"),a++,v282.push,v282[a]=new f209(a,"R"),a++,v282.push,v282[a]=new f209(a,"S"),a++,v282.push,v282[a]=new f209(a,"T"),a++,v282.push,v282[a]=new f209(a,"U"),a++,v282.push,v282[a]=new f209(a,"V"),a++,v282.push,v282[a]=new f209(a,"W"),a++,v282.push,v282[a]=new f209(a,"X"),a++,v282.push,v282[a]=new f209(a,"Y"),a++,v282.push,v282[a]=new f209(a,"Z"),a++,v282.push,v282[a]=new f209(a,"0"),a++,v282.push,v282[a]=new f209(a,"1"),a++,v282.push,v282[a]=new f209(a,"2"),a++,v282.push,v282[a]=new f209(a,"3"),a++,v282.push,v282[a]=new f209(a,"4"),a++,v282.push,v282[a]=new f209(a,"5"),a++,v282.push,v282[a]=new f209(a,"6"),a++,v282.push,v282[a]=new f209(a,"7"),a++,v282.push,v282[a]=new f209(a,"8"),a++,v282.push,v282[a]=new f209(a,"9"),a++,v282.push,v282[a]=new f209(a,"-"),a++,v282.push,v282[a]=new f209(a,"/"),a++,v282.push,v282[a]=new f209(a,":"),a++,v282.push,v282[a]=new f209(a,";"),a++,v282.push,v282[a]=new f209(a,"("),a++,v282.push,v282[a]=new f209(a,")"),a++,v282.push,v282[a]=new f209(a,"$"),a++,v282.push,v282[a]=new f209(a,"_"),a++,v282.push,v282[a]=new f209(a,"%"),a++,v282.push,v282[a]=new f209(a,"&"),a++,v282.push,v282[a]=new f209(a,"@"),a++,v282.push,v282[a]=new f209(a,"#"),a++,v282.push,v282[a]=new f209(a,"."),a++,v282.push,v282[a]=new f209(a,","),a++,v282.push,v282[a]=new f209(a,"?"),a++,v282.push,v282[a]=new f209(a,"!"),a++,v282.push,v282[a]=new f209(a,"'"),a++,v282.push,v282[a]=new f209(a,'"'),a++,v282.push,v282[a]=new f209(a," "),a++,v282.push,v282[a]=new f209(a,"*"),a++;var n=f32();-1!=n.search("fr")&&(v112=_Tx(225)),-1!=n.search("de")&&(v112=_Tx(226)),dlg_keyboard_on_screen=0,v49=1}}var v179=30,v180=30,v61=0,v283=0,v83=0;function f141(e,t,v){var r=83;f181(.35,.35,.35,1),(v<0||v>86)&&f181(.2,.2,.2,1),-10==v&&0==v283&&f181(.2,.2,.2,1),-10==v&&1==v283&&f181(.5,.5,.5,1),-11==v&&2!=v283&&f181(.2,.2,.2,1),-11==v&&2==v283&&f181(.5,.5,.5,1);var a=0;if(1==v60&&v212>e-v179&&v212<e+v179&&v213>t-v180&&v213<t+v180&&(a=1),v>-1&&1==v82&&1==a){var n=v112[v];v8=v8+""+n,1==v283&&(v283=0)}if(-10==v&&(1==v82&&1==a&&(v283=1-v283),r=82-v283),-11==v&&(1==v82&&1==a&&2==v283?v283=0:1==v82&&1==a&&2!=v283&&(v283=2),r=2!=v283?85:86),-12==v&&(1==v82&&1==a&&(v8="",v259=8),r=83),-13==v&&(1==v82&&1==a&&(v8="",v259=13,dlg_keyboard_on_screen=0),r=84),-14==v&&(1==v82&&1==a&&(v8="",v259=13,dlg_keyboard_on_screen=0),r=87),f183(e-v179+1,t-v83,e+v179-1,t+v83),f183(e-v179,t-v83+1,e+v179,t+v83-1),f228(2),gl.enable(gl.BLEND),gl.blendFunc(gl.SRC_ALPHA,gl.ONE),v<0&&f95(100+r,e,t,v61/30),v>-1){n=v112[v];for(var o=0,i=0;i<v282.length;i++)if(v282[i].Char==n){o=i;break}v283>0&&(t+=2),f95(100+o,e,t,v61/30),v283>0&&(t-=2)}f228(3),1==a&&(f181(1,.5,0,.8),f183(e-v179-1,t-v83-1,e+v179+1,t+v83+1)),gl.blendFunc(gl.SRC_ALPHA,gl.ONE_MINUS_SRC_ALPHA),gl.disable(gl.BLEND)}var GLFontTexture,v143=0,v113=0;function f187(){if(0!=v49){if(0==dlg_keyboard_on_screen)return v143=0,void(v82=-1);if(0!=v100){v113=350,v204>700&&(v113=300);var e=5;v204<850&&(e=2),v204<600&&(e=1),1==v143&&(1==v82&&(v82=-1),-1==v82&&0==v60&&(v82=0),0==v82&&1==v60&&(v82=1),v213<v113&&1==v82&&(dlg_keyboard_on_screen=0,TextField_Selected=-1)),f204(),f228(3),v143<1&&((v143+=.006*v260)>1&&(v143=1),f231(0,v113-v113*v143,0)),f181(0,0,0,.1),f183(0,v113,v204,v113-2),f183(0,v113,v204,v113-4),f183(0,v113,v204,v113-6),f183(0,v113,v204,v113-8),f183(0,v113,v204,v113-10),gl.disable(gl.BLEND),f181(.1,.1,.1,0),f183(0,v113,v204,700);var t=0;1==v283&&(t=29),2==v283&&(t=58),v61=v179=(v204-11*e)/10*.5,v179>(v180=(700-v113)/8-3.5)&&(v61=v180),(v83=v180)>1.5*v179&&(v83=1.5*v179);for(var v=v179+e,r=v113+v180+5,a=0;a<10;a++)f141(v,r,t),t++,v+=2*v179+e;v=2*(v179=(v204-11*e)/11*.5)+e,r+=2*v180+5;for(a=0;a<10;a++)f141(v,r,t),t++,v+=2*v179+e;v179=(v204-11*e)/11*.5,v=1*(v179*=1.25)+e,r+=2*v180+5,v283<2&&f141(v,r,-10),v+=2.25*(v179/=1.25)+e;for(a=0;a<8;a++)f141(v,r,t),t++,v+=2*v179+e;v179=v204-(v=.5*(v204+(v-=v179+e)))-e,f141(v,r,-12),v179=v204/13*.5,f141((v179*=2)+e,r+=2*v180+5,-11),f141(v204-v179-e,r,-14),v179=.5*v204-2*e-2*v179,f141(.5*v204,r,87)}else dlg_keyboard_on_screen=0}}var v319=new Array,v248=0;function f242(){this.Exist=0,this.uvStart_X=0,this.uvStart_Y=0,this.uvEnd_X=0,this.uvEnd_Y=0,this.size_X=0,this.size_Y=0,this.xOffset=0,this.yOffset=0,this.xAdvance=0,this.VertexPositionBuffer,this.TextureCoordBuffer,this.VertexIndexBuffer}function f254(){var e;for(e=0;e<8800;e++)v319.push,v319[e]=new f242}function f85(e){v319[e].VertexPositionBuffer=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,v319[e].VertexPositionBuffer),vertices=[v319[e].xOffset,v319[e].yOffset+v319[e].size_Y,-.25,v319[e].xOffset+v319[e].size_X,v319[e].yOffset+v319[e].size_Y,-.25,v319[e].xOffset+v319[e].size_X,v319[e].yOffset,-.25,v319[e].xOffset,v319[e].yOffset,-.25],gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(vertices),gl.STATIC_DRAW),v319[e].VertexPositionBuffer.itemSize=3,v319[e].VertexPositionBuffer.numItems=4,v319[e].VertexTextureCoordBuffer=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,v319[e].VertexTextureCoordBuffer);var t=[v319[e].uvStart_X,v319[e].uvEnd_Y,v319[e].uvEnd_X,v319[e].uvEnd_Y,v319[e].uvEnd_X,v319[e].uvStart_Y,v319[e].uvStart_X,v319[e].uvStart_Y];gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(t),gl.STATIC_DRAW),v319[e].VertexTextureCoordBuffer.itemSize=2,v319[e].VertexTextureCoordBuffer.numItems=4,v319[e].VertexIndexBuffer=gl.createBuffer(),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,v319[e].VertexIndexBuffer);gl.bufferData(gl.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,0,2,3]),gl.STATIC_DRAW),v319[e].VertexIndexBuffer.itemSize=1,v319[e].VertexIndexBuffer.numItems=6}function f71(e,t,v){if(0==e.indexOf(t)){var r=t.length,a=e.substring(r,e.length-1),n=(a=(a=(a=a.replace("(","")).replace(")","")).replace(" ","")).split(",");new Array;return v[0]=parseFloat(n[0]),v[1]=parseFloat(n[1]),1}return-1}function f125(e,t){if(0==e.indexOf(t)){var v=t.length,r=e.substring(v,e.length-1);return parseInt(r)}return-1}function f39(){var e=f32();return-1!=e.search("fr")?0:-1!=e.search("de")?0:-1!=e.search("en")?0:1}function f281(){var e,t=1,v="font";1==f39()&&(v=_Tx(230),t=.7),famobi.log(_Tx(231)),GLFontTexture=f160(-1,_Tx(232)+v+".png"),f254();var r=new Array;r.push,r.push,(e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")).onreadystatechange=function(){if(4==e.readyState){var v,a=e.responseText.split("#");if(a.length<3)return;var n=0;for(v=9;v<a.length;v+=7){var o=f125(a[v],_Tx(233));if(-1!=o){v319[n=o].Exist=1;f71(a[v+1],_Tx(234),r);v319[n].uvStart_X=r[0],v319[n].uvStart_Y=1-r[1],f71(a[v+2],_Tx(235),r),v319[n].uvEnd_X=r[0],v319[n].uvEnd_Y=1-r[1],f71(a[v+3],"size=",r),v319[n].size_X=r[0]*t,v319[n].size_Y=r[1];var i=f125(a[v+4],_Tx(236));v319[n].xOffset=i*t;var f=f125(a[v+5],_Tx(237));v319[n].yOffset=f;var s=f125(a[v+6],_Tx(238));v319[n].xAdvance=s*t-3,f85(o)}}v248++}},e.open("GET",_Tx(240)+v+".fnt"+v222,!0),e.send()}function f210(e){0==v319[e].Exist||e>2048||(gl.bindBuffer(gl.ARRAY_BUFFER,v319[e].VertexPositionBuffer),gl.vertexAttribPointer(v105[v141].vertexPositionAttribute,v319[e].VertexPositionBuffer.itemSize,gl.FLOAT,!1,0,0),gl.bindBuffer(gl.ARRAY_BUFFER,v319[e].VertexTextureCoordBuffer),gl.vertexAttribPointer(v105[v141].textureCoordAttribute,v319[e].VertexTextureCoordBuffer.itemSize,gl.FLOAT,!1,0,0),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,v319[e].VertexIndexBuffer),f13(1),gl.drawElements(gl.TRIANGLES,v319[e].VertexIndexBuffer.numItems,gl.UNSIGNED_SHORT,0),f231(v319[e].xAdvance,0,0),v99+=2)}var v284=0,v249=1,FontRight=2,v250=0;function f282(e){v250=e}function f255(e){return 8217==e?39:e}function f211(e){for(var t=0,v=0;v<e.length;v++)t+=v319[f255(e.charCodeAt(v))].xAdvance;return t}function f212(e){if(0==v248)return 0;var t=0;v250>0&&(t=-f211(e),v250==v249&&(t*=.5)),PrevTexture=-1,gl.activeTexture(gl.TEXTURE0),gl.bindTexture(gl.TEXTURE_2D,GLFontTexture),f203(),f231(t,0,0);for(var v=0;v<e.length;v++)f210(f255(e.charCodeAt(v)));return f230(),t}var TextField_Selected=-1,v62=0,v214="qwertyuiopasdfghjkl.zxcvbnm!?QWERTYUIOPASDFGHJKL,ZXCVBNM:;0123456789&-/:;()$_%@#.,?!-/. ";function f256(e){for(var t=0;t<v214.length;t++)if(e==v214[t])return 1;return 0}function f283(e){for(var t=0;t<e.length;t++){for(var v=0,r=0;r<v214.length;r++)if(e[t]==v214[r]){v=1;break}0==v&&(e=e.replaceAt(t,"_"))}return e}function f167(e,t,v,r,a){if(TextField_Selected!=e&&1==v197&&v303>v-255&&v303<v+255&&v304>r-5&&v304<r+75&&(TextField_Selected=e,v8="",dlg_keyboard_on_screen=1),f228(3),TextField_Selected==e&&(f181(1,1,1,.8),f183(v-255,r-5,v+255,r+75)),f181(0,0,0,1),f183(v-250,r,v+250,r+70),f228(2),f181(1.5,1.5,1.5,1),f203(),f231(v-255+10,r-4,0),f299(.7,.7,1),f282(v284),f181(2,2,2,1),f212(v101),f230(),TextField_Selected==e){if(0==v198){var n=v-235+.7*f211(v101);f228(3),f181(1,1,1,.8),f183(n,r+2,n+40,r+68),f228(2)}if(1==MouseClick&&(v303<v-255||v303>v+255||v304<r-5||v304>r+75)&&(TextField_Selected=-1,dlg_keyboard_on_screen=0),16==v259||20==v259||18==v259||91==v259)v8="",v259=0;else if(13==v259||9==v259)TextField_Selected=-1,dlg_keyboard_on_screen=0,v259=-1;else if(8==v259||46==v259)v259=0,t.length>0&&(t=t.substring(0,t.length-1)),t=f283(t),v8="";else if(v8.length>0){for(var o=0;o<v8.length;o++)famobi.log(_Tx(243)+v8[o]),t+=v8[o];v8="",t.length>15&&(t=t.substring(0,15)),t=f283(t)}}return-1!=a&&(f228(2),TextField_Selected==e?f181(1.5,1.5,1.5,1):f181(1,1,1,.5),f203(),f231(v-255+10,r-45,0),f299(.45,.45,1),f282(v284),f212(v289[a]),f230()),t}String.prototype.replaceAt=function(e,t){return this.substr(0,e)+t+this.substr(e+t.length)};var v144,v63=0,v215=new Array,v285="",v32=0,v84=0;function f257(){famobi.log(_Tx(245)),1==f305()&&1==f306()&&0==f292()&&(v84=1),1!=f306()&&1!=f271()||(v32=1),v63=1;try{window.AudioContext=window.AudioContext||window.webkitAudioContext,v144=new AudioContext}catch(e){return void(v63=0)}var e=document.createElement("audio");return e.canPlayType(_Tx(247))?(v285="mp3",void famobi.log(_Tx(248)+v285)):e.canPlayType(_Tx(249))?(v285="ogg",void famobi.log("Sound: ext:"+v285)):e.canPlayType(_Tx(250))?(v285="mp4",void famobi.log("Sound: ext:"+v285)):void(v63=0)}function f304(){}function f258(e,t){if(0!=v63){DataToDownload++,v74++;var v=t.replace("snd",v285)+v222,r=new XMLHttpRequest;r.open("GET",v,!0),r.responseType=_Tx(252),famobi.log(_Tx(253)+v),r.onload=function(){v144.decodeAudioData(r.response,function(t){v215.push=null,v215[e]=t,DataToDownload--,v74--},f304)},r.send()}}var v85=1;function f142(e){v85=e}var v181=[null,null,null,null,null,null,null,null,null,null,null,null,null],v114=[null,null,null,null,null,null,null,null,null,null,null,null,null];function f102(e){null!=v181[e]&&(v181[e].stop?v181[e].stop(0):v181[e].noteOff(0),v181[e].disconect,v181[e]=null),null!=v114[e]&&(v114[e].disconect,v114[e]=null)}function f40(e,t){null!=v181[e]&&(v114[e].gain.value=0==Pref_User_Sound?0:t)}function f126(e,t,v,r){0!=v63&&0!=Pref_User_Sound&&(null==v181[e]&&(v181[e]=v144.createBufferSource(),null==v181[e])||(null==v114[e]&&(v114[e]=v144.createGain()),v181[e].buffer=v215[t],v181[e].loop=r,v114[e].gain.value=v,v181[e].connect(v114[e]),v114[e].connect(v144.destination),v181[e].start?v181[e].start(0):v181[e].noteOn(0)))}function f259(e){if(0!=v63&&0!=Pref_User_Sound){var t=v144.createBufferSource();if(null!=t){t.buffer=v215[e];var v=v144.createGain();v.gain.value=v85,t.connect(v),v.connect(v144.destination),t.start?t.start(0):t.noteOn(0)}}}var v216=null;function f260(){}function f261(e){0!=v63&&null!=v216&&(v216.stop?v216.stop(0):v216.noteOff(0),v216=null)}function f262(e){0!=v63&&0!=v76&&(f261(1),v216=v144.createBufferSource(),1==e&&(v216.buffer=v215[4]),2==e&&(v216.buffer=v215[5]),v216.loop=!0,v216.connect(v144.destination),v216.start?v216.start(0):v216.noteOn(0))}var v297=null,v145=null;function f143(){0!=v63&&null!=v297&&v297.id==_Tx(254)&&(v297.muted=!0)}var v14=null,v0=0;function f144(e){if(-1==e&&null!=v14&&(e=v14),e.length>2&&(v14=e),0!=v63&&(null!=v297&&"MusicStreamPlayer"==v297.id&&(v297.pause(),v297.currentTime=0,null!=v145&&v297.removeChild(v145),v145=null),0!=v76&&((v297=document.createElement("audio")).id="MusicStreamPlayer",v297.preload="auto",famobi.log(_Tx(255)),v297.canPlayType))){famobi.log(_Tx(256));var t=!!v297.canPlayType&&""!=v297.canPlayType("audio/mp4"),v=!!v297.canPlayType&&""!=v297.canPlayType("audio/mp3");1==(!!v297.canPlayType&&""!=v297.canPlayType(_Tx(258)))?((v145=document.createElement(_Tx(259))).type='audio/ogg; codecs="vorbis"',v145.src=_Tx(260)+e+".ogg",v297.appendChild(v145)):1==t&&1==f306()?((v145=document.createElement("source")).type="audio/mp4",v145.src="datas/musics/"+e+".m4a",v297.appendChild(v145)):1==v&&((v145=document.createElement("source")).type="audio/mp3",v145.src="datas/musics/"+e+".mp3",v297.appendChild(v145)),famobi.log(_Tx(261)+v145.src),v297.load(),v297.muted=!1;var r=v297.play();r&&r.catch(function(e){}),v297.volume=.5,v0=1}}window.onbeforeunload=function(){null!=v297&&(v297.pause(),v297.currentTime=0)};var v115=0,v217=0,v146=0,v147=99999999,v286=[];function f9(){var e;v146=-1,(e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")).onreadystatechange=function(){var t=new RegExp("^file:","i").test(e.responseURL);if(4==e.readyState&&(200==e.status||t&&0===e.status)){var v=e.responseText.split("\n");if(v.length<3)return;var r=0;for(i=0;i<v.length;i++){var a=v[i],n=a.indexOf('"')+1,o=a.indexOf('"',n),f=a.substring(n,o);f.length>4&&(v286[r]=f,r++)}v147=v286.length,v146=1,f53()}};var t=(new Date).getTime();e.open("GET",_Tx(262)+t,!0),e.send()}var v287=0,v307=0,v308=0,v309=0,v310=0;function f53(){if(DataToDownload<10){var e=v286[v115];if(null==e)return;v115++;var t=e.search(".png"),v=e.search(".jpg");if(t==e.length-4||v==e.length-4)GLTexture[v287]=f160(v287,"textures/"+e),v287++;else var r=e.search(".obj");if(r==e.length-4)f239(v307,e),v307++;else var a=e.search(".snd");if(a==e.length-4)f258(v308,_Tx(264)+e),v308++;else var n=e.search(".dlb");if(n==e.length-4)f124(v309,e),v309++;else var o=e.search(".bla");o==e.length-4&&(famobi.log(_Tx(266)+v310+"] "+o),f101(v310,e),v310++)}v115!=v147?setTimeout(function(){f53()},5):famobi.log(_Tx(269))}var v50=1,v218=0;function f243(){if(v217>15)return f186(),0;var e=Math.floor(v115/v147*100);if(e>99?v217++:v217=0,0==v146&&f9(),0==v248||v169>0)return 1;var t=8;if(1==WebGL_Alpha?(gl.clearColor(0,0,0,1),gl.colorMask(!0,!0,!0,!0),gl.clearColor(0,0,0,0),gl.clear(gl.DEPTH_BUFFER_BIT),gl.clear(gl.COLOR_BUFFER_BIT),t=1,v50=0):(gl.colorMask(!0,!0,!0,!1),gl.clearColor(0,.2,.3,1)),1==WebGL_ShowLoader){gl.clear(gl.COLOR_BUFFER_BIT),PrevTexture=-1,f204(),f228(3);var v=.5*v204,r=.5*v176;f203(),f231(v,r,0),f231(0,-15,0),f203(),f296(v218+180,0,0,1);for(var a=0;a<t;a++){for(var n=0;n<360;n+=10)n>3.6*e?f181(0,0,0,.5):f181(v50,v50,v50,1-.1*a),f296(10,0,0,1),f183(-15,-250,15,-220);var o=1.2-.002*e;f299(o,o,1)}f230(),f230(),f231(v,r,0),f181(2,2,2,1);var i=e+"";f299(1.5,1.5,1.5),f231(3==i.length?-70:-35,-45,0);for(a=0;a<i.length;a++)f188(i[a]),f231(70,0,0);v218+=.1}return 1}function f188(e){var t=v50;1==v219[e][0]?f181(t,t,t,1):f181(t,t,t,.05),f183(-31,-10,-11,10),1==v219[e][1]?f181(t,t,t,1):f181(t,t,t,.05),f183(-10,-10,10,10),1==v219[e][2]?f181(t,t,t,1):f181(t,t,t,.05),f183(11,-10,31,10),1==v219[e][3]?f181(t,t,t,1):f181(t,t,t,.05),f183(-31,11,-11,31),1==v219[e][4]?f181(t,t,t,1):f181(t,t,t,.05),f183(-10,11,10,31),1==v219[e][5]?f181(t,t,t,1):f181(t,t,t,.05),f183(11,11,31,31),1==v219[e][6]?f181(t,t,t,1):f181(t,t,t,.05),f183(-31,32,-11,52),1==v219[e][7]?f181(t,t,t,1):f181(t,t,t,.05),f183(-10,32,10,52),1==v219[e][8]?f181(t,t,t,1):f181(t,t,t,.05),f183(11,32,31,52),1==v219[e][9]?f181(t,t,t,1):f181(t,t,t,.05),f183(-31,53,-11,73),1==v219[e][10]?f181(t,t,t,1):f181(t,t,t,.05),f183(-10,53,10,73),1==v219[e][11]?f181(t,t,t,1):f181(t,t,t,.05),f183(11,53,31,73),1==v219[e][12]?f181(t,t,t,1):f181(t,t,t,.05),f183(-31,74,-11,94),1==v219[e][13]?f181(t,t,t,1):f181(t,t,t,.05),f183(-10,74,10,94),1==v219[e][14]?f181(t,t,t,1):f181(t,t,t,.05),f183(11,74,31,94)}var gl,WebGL_canvas,v219=[_Tx(270),_Tx(271),_Tx(272),_Tx(273),_Tx(274),_Tx(275),_Tx(276),_Tx(277),_Tx(278),_Tx(279)],v288=0,WebGL_Alpha=!1,WebGL_Antialias=!1,WebGL_ShowLoader=!0,WebGL_ObjUseJPG=!0,WebGL_MinScaledSize=500,WebGL_PreMulAlpha=!1,WebGL_Realv221=0,WebGL_Realv183=0,WebGL_Render_Quality=1,v221=600,v183=300;function f213(){f111(),v99=0,(v240+=v260)>50&&(v240-=50,v239=1-v239),(v199+=v260)>250&&(v199-=250,v198=1-v198),0==f243()&&(f79(),f221())}var fps=60;function f72(){var e=(new Date).getTime();window.famobi_paused&&(e=v288);var t=e-(v288||e);t>45&&(t=45),t<.001&&(t=.001),v260=t,requestAnimationFrame(f72),f213(),f187(),v288=e}function f54(){if(famobi.log(_Tx(280)),!gl){for(var e=["webgl",_Tx(281),_Tx(282),_Tx(283)],t=0;t<e.length;++t)if(!gl)try{(gl=WebGL_canvas.getContext(e[t],{premultipliedalpha:WebGL_PreMulAlpha,antialias:WebGL_Antialias,alpha:WebGL_Alpha,stencil:!1,preserveDrawingBuffer:!1})).viewportWidth=v221,gl.viewportHeight=v183,gl.colorMask(!0,!0,!0,!0),famobi.log(_Tx(284)+e[t]),famobi.log(_Tx(285)+v221+"x"+v183)}catch(e){}gl||(document.body.innerHTML=_Tx(286),Stanislic_SendInfo(_Tx(287)))}}var v42=1;function f189(){v221=f152(),v183=f134(),WebGL_RealScreenSize=v221*v42,v42=window.devicePixelRatio||1,1==v100&&v42>1&&(v42*=.7),WebGL_canvas.width=v221*v42*WebGL_Render_Quality,WebGL_canvas.height=v183*v42*WebGL_Render_Quality,WebGL_Realv221=WebGL_canvas.width,WebGL_Realv183=WebGL_canvas.height,WebGL_canvas.style.width=window.innerWidth+"px",WebGL_canvas.style.height=window.innerHeight+"px",famobi.log(_Tx(289)+v221+"x"+v183)}function f214(){f189(),gl&&(gl.viewportWidth=v221,gl.viewportHeight=v183)}function DLG_WebGLStart(){f306(),f294(),f113(),Stanislic_Start(),f274(),WebGL_canvas=document.getElementById(_Tx(294)),f189(),f54(),f57(),f114(),f200(),f281(),f257(),f260(),f81(),f155(),f235(),f207(),f279(),f208(),f185(),f248(),f72()}window.onresize=function(){famobi.log(_Tx(290)),f214(),WebGL_canvas.focus()},window.addEventListener(_Tx(291),function(e){famobi.log(_Tx(292)),window.setTimeout(function(){famobi.log(_Tx(293)),f214(),WebGL_canvas.focus()},800)});var MultiPlayer_Server_IP=_Tx(295),v43=0,v88=600,v44=null,v45=0,v65=0,v7=0,v34=[],v46=[];function f145(e,t,v){this.ID=e,this.Data=t,this.Volatile=v,this.VolatileTimer=0}function f103(e){v46=[],famobi.log(_Tx(296)+e);var t=e.split(" ");if(!(t.length<1)){for(var v=1;v<t.length;v++){v46.push;var r=v46.length,a=t[v].substring(0,4),n=t[v].substring(4);n.length<1&&(n=0),v46[r]=new f145(a,n,0)}v7=1}}function f168(e){var t=e.search("<");if(-1==t&&-1==(t=e.search(">"))){var v=e.substring(2),r=v.substring(0,4);v=v.substring(4);for(var a=0;a<v46.length;a++)if(v46[a].ID==r)return v46[a].Data=v,void(v7=1)}}function f86(e){var t=e.search("<");if(-1==t&&-1==(t=e.search(">"))){var v=e.substring(2),r=v.substring(0,4);v=v.substring(4);for(var a=0;a<v46.length;a++)if(v46[a].ID==r)return v46[a].Volatile=v,void(v46[a].VolatileTimer=20)}}function f127(e){v34.push(""+e.substring(2))}function f55(){3==v43&&v44.send("/d"+v45)}function f19(e){3==v43&&v44.send("/v"+e)}function f29(e){3==v43&&v44.send("/a"+e)}function f15(){window.WebSocket?((v44=new WebSocket("ws://"+MultiPlayer_Server_IP+":8080",_Tx(298))).onerror=function(){famobi.log(_Tx(299)),v46=[],v7=0,v43=-1},v44.onclose=function(){famobi.log(_Tx(300)),v46=[],v7=0,v43=-1},v44.onmessage=function(e){if(typeof e.data===_Tx(301)&&e.data.length>1){var t=e.data.replace("<","-");"/"==(t=t.replace(">","-"))[0]&&("v"==t[1]?f86(t):"d"==t[1]?f168(t):"a"==t[1]?f127(t):"i"==t[1]?(v65=t.substring(2),famobi.log(_Tx(303)+v65)):"c"==t[1]?(v43=2,setTimeout(function(){v44.send("/r"+md5(Game_ID_String+v222))},v88)):"l"==t[1]&&(f103(t),v43=3,f55()))}}):v43=-1}function f128(){v45=0,v7=0,v43=0,v46=[],v34=[],v65=0,null!=v44&&(v44.onerror=function(){},v44.onmessage=function(){},v44.onclose=function(){},v44.close(),v44=null)}function f104(){var e;f128(),(e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")).onreadystatechange=function(){var t=new RegExp("^file:","i").test(e.responseURL);if(4==e.readyState&&(200==e.status||t&&0===e.status)){var v=e.responseText.split("\n");MultiPlayer_Server_IP=v[0],v43=1,setTimeout(function(){f15()},v88)}};var t=(new Date).getTime();e.open("GET",_Tx(305)+t,!0),e.send()}var v272Texture=null;function f105(){v272Texture=gl.getExtension(_Tx(306))}function f129(e){gl.activeTexture(gl.TEXTURE0),gl.bindTexture(gl.TEXTURE_2D,v271[e])}function f106(e){gl.activeTexture(gl.TEXTURE1),gl.bindTexture(gl.TEXTURE_2D,v271[e])}function f107(e){gl.activeTexture(gl.TEXTURE2),gl.bindTexture(gl.TEXTURE_2D,v271[e])}function f30(e){gl.activeTexture(gl.TEXTURE1),gl.bindTexture(gl.TEXTURE_2D,v272[e])}function f31(e){gl.activeTexture(gl.TEXTURE2),gl.bindTexture(gl.TEXTURE_2D,v272[e])}function f146(e){gl.bindFramebuffer(gl.FRAMEBUFFER,v273[e])}function f169(){gl.bindFramebuffer(gl.FRAMEBUFFER,null)}var v271=[null,null,null,null,null,null,null,null,null,null],v272=[null,null,null,null,null,null,null,null,null,null],v273=[null,null,null,null,null,null,null,null,null,null],v274=[0,0,0,0,0,0,0,0,0,0],v275=[0,0,0,0,0,0,0,0,0,0];function f284(e,t,v){f105(),null!=v273[e]&&(gl.deleteTexture(v271[e]),gl.deleteTexture(v272[e]),gl.deleteFramebuffer(v273[e])),v271[e]=gl.createTexture(),gl.bindTexture(gl.TEXTURE_2D,v271[e]),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,gl.LINEAR),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.LINEAR),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.CLAMP_TO_EDGE),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,gl.CLAMP_TO_EDGE),gl.texImage2D(gl.TEXTURE_2D,0,gl.RGB,t,v,0,gl.RGB,gl.UNSIGNED_BYTE,null),null!=v272Texture&&(v272[e]=gl.createTexture(),gl.bindTexture(gl.TEXTURE_2D,v272[e]),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,gl.NEAREST),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.NEAREST),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.CLAMP_TO_EDGE),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,gl.CLAMP_TO_EDGE),gl.texImage2D(gl.TEXTURE_2D,0,gl.DEPTH_COMPONENT,t,v,0,gl.DEPTH_COMPONENT,gl.UNSIGNED_INT,null)),v273[e]=gl.createFramebuffer(),gl.bindFramebuffer(gl.FRAMEBUFFER,v273[e]),gl.framebufferTexture2D(gl.FRAMEBUFFER,gl.COLOR_ATTACHMENT0,gl.TEXTURE_2D,v271[e],0),gl.framebufferTexture2D(gl.FRAMEBUFFER,gl.DEPTH_ATTACHMENT,gl.TEXTURE_2D,v272[e],0);var r=gl.checkFramebufferStatus(gl.FRAMEBUFFER);return gl.bindFramebuffer(gl.FRAMEBUFFER,null),v274[e]=t,v275[e]=v,r==gl.FRAMEBUFFER_COMPLETE?1:0}for(var Game_ID_String=_Tx(307),v222=_Tx(308),v184=_Tx(309),v289=[_Tx(310),_Tx(311),_Tx(312),_Tx(313),_Tx(314),_Tx(315),_Tx(316),_Tx(317),_Tx(318),_Tx(319),_Tx(320),_Tx(321),_Tx(322),_Tx(323),_Tx(324),"BONUS","SCORE",_Tx(325),"LEVEL",_Tx(326),_Tx(327),"Pts",_Tx(328),_Tx(329)],i=0;i<v289.length;i++){var help=window.famobi.__("_"+i);help?v289[i]=help:famobi.log("no translation found: "+v289[i])}var v119,v226,v148,v186,v149,v91,v121,v153,v154,v229,v230,v191,WheelsCount,v231,v155,v36,v298,PlayerBonus=0,PlayerScore=0,PlayerBestScore=0,PlayerMaxLevel=6,PlayerCarID=1,PlayerEnergy=100,PlayerCollectedBags=0,PlayerExploded=0,v187=0,Control_Right=0,v151=0,v188=0,v276=0,v251=0,v120=0,v227=0,v277=0,v252=0,PlayerCoins=500,v189=-1,v253=0,v152=1,v290=null,v66=0,v190=1,v90=0,v311=1,CHASSIS=2,GROUND=4,OTHER=8;function f244(){this.x,this.y,this.radius,this.Body,this.ParentBody,this.Constraint=-1,this.AutoKill=0}function f285(){this.x,this.y}function f238(){this.A,this.B,this.C}function f170(){this.Name="",this.ID="",this.Texture="",this.TextureID=""}function f73(){this.Pos_X=0,this.Pos_Y=0}function f286(){this.Type=0,this.Size_X=0,this.Size_Y=0,this.Pos_X=0,this.Pos_Y=0,this.Start_X=0,this.Start_Y=0,this.Rot=0,this.MatIDStr=0,this.MatID=0,this.UV_X=0,this.UV_Y=0,this.UV_OffsetX=0,this.UV_OffsetY=0,this.Offset_X=0,this.Offset_Y=0,this.PositionBuffer,this.IndexBuffer,this.TextureCoordBuffer,this.IsStatic=0,this.IsExplosiv=0,this.IsCrunchable=0,this.IsMotor=0,this.IsPlatform=0,this.Sv_ALT=[],this.Radius=100,this.PhysicObject=-1,this.ExplosiveCounter=0,this.Constraint=-1,this.AutoKill=0,this.Background}var v92=1,v300Category=2,TyresCategory=4;function f147(e){v155.push,v155[v36]=new f170,v155[v36].Name=e,v155[v36].ID=_Tx(330),v155[v36].Texture=e,GLTexture[100+v36]=f160(100+v36,"textures/"+e),v36++}WallsCategory=8;var v300,v312,v313,v314,v315,v299=[0,0,0,0,0];function f287(e,t,v){0==e?t+=18:t-=18;var r=new p2.Circle({radius:12.5});v299[e]=new p2.Body({mass:.5,position:[t,v],angularVelocity:0,angle:0,id:1002+e,allowSleep:!1}),r.material=v186,r.collisionGroup=v311,r.collisionMask=GROUND,v299[e].addShape(r),v290.addBody(v299[e])}function f297(){v301=0,v302=1e3,v254=.8,v232=0,v94=0;var e=v153,t=v154+15;(v300=new p2.Body({mass:.5,position:[0,0],angularVelocity:0,angle:0,id:1001,allowSleep:!1})).fromPolygon([[-23.88,-7.54],[-24,3],[-4.86,3.03],[-5.34,10.78],[5.93,11.45],[9.37,5.06],[18.77,4.98],[21.54,3.29],[22.85,-2.19],[22.61,-9.28],[4.3,-11.29],[-4.24,-11.18]]);var v,r=v300.position[0],a=v300.position[1];for(v=0;v<v300.shapes.length;v++)v300.shapes[v].position[0]+=r,v300.shapes[v].position[1]+=a,v300.shapes[v].material=v119,v300.shapes[v].collisionGroup=CHASSIS,v300.shapes[v].collisionMask=GROUND;v300.position[0]=e,v300.position[1]=t,v290.addBody(v300),f287(0,e,t),f287(1,e,t);v312=new p2.PrismaticConstraint(v300,v299[1],{localAnchorA:[-18,-25],localAnchorB:[0,0],localAxisA:[0,1],disableRotationalLock:!0}),v313=new p2.PrismaticConstraint(v300,v299[0],{localAnchorA:[18,-25],localAnchorB:[0,0],localAxisA:[0,1],disableRotationalLock:!0}),v312.setLimits(-6,6.2),v313.setLimits(-6,6.2),v290.addConstraint(v312),v290.addConstraint(v313),v314=new p2.LinearSpring(v300,v299[0],{restLength:0,stiffness:.6,localAnchorA:[18,-28],localAnchorB:[0,0]}),v290.addSpring(v314),v315=new p2.LinearSpring(v300,v299[1],{restLength:0,stiffness:.6,localAnchorA:[-18,-28],localAnchorB:[0,0]}),v290.addSpring(v315)}function f215(e,t){}var v37,v67,v156,v291,v157,v122,v5=[],v10=[],v27=[],v38=-1;function f171(){v231=[],v155=[],SceneWheels=[],v291=[],WheelsCount=0,v156=0,v36=0,v298=1;for(var e=v91.split("\n"),t=0;t<e.length;t++){if(-1!=e[t].search(_Tx(332))&&(v155.push,v155[v36]=new f170,v155[v36].Name=e[t].replace(_Tx(333),""),v155[v36].ID=e[t+1].replace("ID: ",""),v155[v36].Texture=e[t+2].replace("Tex: ",""),v155[v36].Texture=v155[v36].Texture.replace(".psd",".png"),GLTexture[100+v36]=f160(100+v36,"textures/"+v155[v36].Texture),t+=2,v36++),-1!=e[t].search(_Tx(335))&&(v291.push,v291[v156]=new f73,v291[v156].x=.1*parseFloat(e[t+1].replace(_Tx(337),"")),v291[v156].y=.1*parseFloat(e[t+2].replace(_Tx(338),"")),v156++),-1!=e[t].search(_Tx(339))){e[t].replace(_Tx(340),"");SceneWheels.push,SceneWheels[WheelsCount]=new f244,SceneWheels[WheelsCount].Radius=.1*parseFloat(e[t+1].replace(_Tx(341),""))-.5,SceneWheels[WheelsCount].x=.1*parseFloat(e[t+2].replace("PosX: ","")),SceneWheels[WheelsCount].y=.1*parseFloat(e[t+3].replace("PosY: ",""));var v=.15,r=0,a=new p2.Circle({radius:SceneWheels[WheelsCount].Radius}),n=new p2.Body({mass:v,position:[SceneWheels[WheelsCount].x,SceneWheels[WheelsCount].y],angularVelocity:0,angle:0,id:2e3+WheelsCount,allowSleep:!0});a.material=v186,a.collisionGroup=GROUND,a.collisionMask=GROUND|CHASSIS,n.addShape(a),v290.addBody(n),SceneWheels[WheelsCount].Body=n,SceneWheels[WheelsCount].ParentBody=v67,v290.disableBodyCollision(n,v67);var o=new p2.RevoluteConstraint(n,v67,{worldPivot:[n.position[0],n.position[1]]});v290.addConstraint(o),SceneWheels[WheelsCount].Constraint=o,WheelsCount++}if(-1!=e[t].search(_Tx(342))){v231.push,v231[v298]=new f286,v231[v298].Name=e[t].replace(_Tx(343),""),v231[v298].Size_X=.1*parseFloat(e[t+1].replace(_Tx(344),"")),v231[v298].Size_Y=.1*parseFloat(e[t+2].replace(_Tx(345),"")),v231[v298].Pos_X=parseFloat(e[t+3].replace("PosX: ","")),v231[v298].Pos_Y=parseFloat(e[t+4].replace("PosY: ","")),v231[v298].Rot=parseFloat(e[t+5].replace("Rot: ",""));parseInt(e[t+6].replace("Tri: ","")),parseInt(e[t+7].replace(_Tx(346),""));v231[v298].MatIDStr=e[t+8].replace("Mat: ",""),v231[v298].UV_X=parseFloat(e[t+9].replace("UVx: ","")),v231[v298].UV_Y=parseFloat(e[t+10].replace("UVy: ",""));for(var i=[],f=[],s=[],u=0,c=[],d=0,x=[],g=0,h=0,B=0,T=[];-1==e[t].search("PolyEnd");){if(-1!=e[++t].search("Uv: ")){var b=e[t].replace("Uv: ","").split(" ");i.push,i[u]=new f285,i[u].x=parseFloat(b[0])*v231[v298].UV_X,i[u].y=parseFloat(b[1])*v231[v298].UV_Y,f.push,f[u]=new f285,f[u].x=parseFloat(b[2])*v231[v298].UV_X,f[u].y=parseFloat(b[3])*v231[v298].UV_Y,s.push,s[u]=new f285,s[u].x=parseFloat(b[4])*v231[v298].UV_X,s[u].y=parseFloat(b[5])*v231[v298].UV_Y,u++}if(-1!=e[t].search("V: ")){var m=e[t].replace("V: ","").split(" ");c.push,c[d]=new f285,c[d].x=.1*parseFloat(m[0]),c[d].y=.1*parseFloat(m[1]),d++}if(-1!=e[t].search("I: ")){var p=e[t].replace("I: ","").split(" ");x.push,x[g]=new f238,x[g].A=parseInt(p[0]),x[g].B=parseInt(p[1]),x[g].C=parseInt(p[2]),g++}if(-1!=e[t].search("Sv: ")){var _=e[t].replace("Sv: ","").split(" ");T.push,T[h]=[.1*parseFloat(_[0]),.1*parseFloat(_[1])],h++}if(-1!=e[t].search(_Tx(351))){_=e[t].replace(_Tx(352),"").split(" ");v231[v298].Sv_ALT.push,v231[v298].Sv_ALT[B]=[.1*parseFloat(_[0]),.1*parseFloat(_[1])],B++}}v=1,r=0;var S=!0,R=v119;v231[v298].Background=0,-1!=v231[v298].Name.search("Rock")&&(v=4),-1!=v231[v298].Name.search("Car")&&(v=1),-1!=v231[v298].Name.search(_Tx(331))&&(v=0,v231[v298].IsStatic=1),-1!=v231[v298].Name.search(_Tx(354))&&(v=2.3,S=!1),-1!=v231[v298].Name.search("Mud")&&(R=v226),-1!=v231[v298].Name.search("Grass")&&(R=v148),-1!=v231[v298].Name.search("Water")&&(R=v149),-1!=v231[v298].Name.search(_Tx(355))&&(v=.4,v231[v298].IsExplosiv=1),-1!=v231[v298].Name.search(_Tx(356))&&(v231[v298].IsCrunchable=1),-1!=v231[v298].Name.search(_Tx(357))&&(v231[v298].Background=1,v=0,v231[v298].IsStatic=1),-1!=v231[v298].Name.search(_Tx(358))&&(r=0,v=3,S=!1),-1!=v231[v298].Name.search("Motor")&&(v231[v298].IsMotor=1),-1!=v231[v298].Name.search(_Tx(359))&&(v231[v298].IsMotor=2),-1!=v231[v298].Name.search(_Tx(360))&&(v231[v298].IsPlatform=1,r=0,v=3,S=!1),-1!=v231[v298].Name.search(_Tx(361))&&(v153=.1*v231[v298].Pos_X,v154=.1*v231[v298].Pos_Y),-1!=v231[v298].Name.search(_Tx(362))&&(v229=.1*v231[v298].Pos_X,v230=.1*v231[v298].Pos_Y);var M,A=new p2.Body({mass:v,position:[0,0],angularVelocity:r,angle:0,id:v298,allowSleep:S,sleepSpeedLimit:.2,sleepTimeLimit:1});for(A.fromPolygon(T),v290.addBody(A),v231[v298].Offset_X=A.position[0],v231[v298].Offset_Y=A.position[1],A.position[0]=0,A.position[1]=0,M=0;M<A.shapes.length;M++)A.shapes[M].position[0]+=v231[v298].Offset_X,A.shapes[M].position[1]+=v231[v298].Offset_Y,A.shapes[M].material=R,A.shapes[M].collisionGroup=GROUND,A.shapes[M].collisionMask=GROUND|v311|CHASSIS;for(v231[v298].PhysicObject=A,v231[v298].Radius=0,l=0;l<A.shapes.length;l++){var E=A.shapes[l],y=E.position,F=E.angle,w=p2.vec2.create();if(E instanceof p2.Convex)for(var C=0;C!==E.vertices.length;C++){var V=E.vertices[C];p2.vec2.rotate(w,V,F);var I=w[0]+y[0],W=w[1]+y[1],O=Math.sqrt(Math.pow(I,2)+Math.pow(W,2))-8;v231[v298].Radius<O&&(v231[v298].Radius=O)}}A.position[0]=.1*v231[v298].Pos_X,A.position[1]=.1*v231[v298].Pos_Y,v231[v298].Start_X=A.position[0],v231[v298].Start_Y=A.position[1];if(-1!=v231[v298].Name.search("UpDown")){var U=new p2.Circle({radius:1});(G=new p2.Body({mass:0,position:[A.position[0],A.position[1]+10],angularVelocity:0,angle:0,id:-1})).addShape(U),v290.addBody(G);var P=new p2.LinearSpring(G,A,{restLength:0,stiffness:0,localAnchorA:[0,-1500],localAnchorB:[0,0]});v290.addSpring(P),A.fixedRotation=!0}if(-1!=v231[v298].Name.search("PinPoint")){U=new p2.Circle({radius:1});(G=new p2.Body({mass:0,position:[A.position[0],A.position[1]],angularVelocity:0,angle:0,id:-1})).addShape(U),v290.addBody(G);o=new p2.RevoluteConstraint(G,A,{worldPivot:[A.position[0],A.position[1]]});v290.addConstraint(o),v231[v298].Constraint=o}if(-1!=v231[v298].Name.search(_Tx(363))){U=new p2.Circle({radius:1});(G=new p2.Body({mass:0,position:[A.position[0]-16,A.position[1]],angularVelocity:0,angle:0,id:-1})).addShape(U),v290.addBody(G);o=new p2.RevoluteConstraint(G,A,{worldPivot:[A.position[0]-16,A.position[1]]});v290.addConstraint(o),v231[v298].Constraint=o,v37=G,v38=A}if(-1!=v231[v298].Name.search(_Tx(365))){if(-1!=v38){var L=new p2.RevoluteConstraint(v38,A,{worldPivot:[A.position[0]-16,A.position[1]]});v290.addConstraint(L),v231[v298].Constraint=L}v37=G,v38=A}if(-1!=v231[v298].Name.search(_Tx(367))){L=new p2.RevoluteConstraint(v38,A,{worldPivot:[A.position[0]-16,A.position[1]]});v290.addConstraint(L);var G;U=new p2.Circle({radius:1});(G=new p2.Body({mass:0,position:[A.position[0]+16,A.position[1]],angularVelocity:0,angle:0,id:-1})).addShape(U),v290.addBody(G);o=new p2.RevoluteConstraint(G,A,{worldPivot:[A.position[0]+16,A.position[1]]});v290.addConstraint(o),v231[v298].Constraint=L,v37=G,v38=-1}-1!=v231[v298].Name.search("Car")&&(v67=A),v231[v298].PositionBuffer=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,v231[v298].PositionBuffer);for(var D=[],X=0,N=0;N<d;N++)D.push,D[X]=c[N].x,X++,D.push,D[X]=c[N].y,X++,D.push,D[X]=-.2,X++;gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(D),gl.STATIC_DRAW),v231[v298].PositionBuffer.itemSize=3,v231[v298].PositionBuffer.numItems=d,v231[v298].TextureCoordBuffer=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,v231[v298].TextureCoordBuffer);var Y=[];for(N=0;N<d;N++)Y.push,Y[N]=new f285;for(N=0;N<g;N++)Y[x[N].A]=i[N],Y[x[N].B]=f[N],Y[x[N].C]=s[N];var z=[],J=0;for(N=0;N<d;N++)z.push,z[J]=Y[N].x,J++,z.push,z[J]=1-Y[N].y,J++;gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(z),gl.STATIC_DRAW),v231[v298].TextureCoordBuffer.itemSize=2,v231[v298].TextureCoordBuffer.numItems=u,v231[v298].IndexBuffer=gl.createBuffer(),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,v231[v298].IndexBuffer);var Z=[],H=0;for(N=0;N<g;N++)Z.push,Z[H]=x[N].A,H++,Z.push,Z[H]=x[N].B,H++,Z.push,Z[H]=x[N].C,H++;gl.bufferData(gl.ELEMENT_ARRAY_BUFFER,new Uint16Array(Z),gl.STATIC_DRAW),v231[v298].IndexBuffer.itemSize=1,v231[v298].IndexBuffer.numItems=3*g;for(C=0;C<v36;C++)if(v155[C].Name==v231[v298].MatIDStr){v231[v298].MatID=C;break}v298++}if(-1!=e[t].search(_Tx(369))){v231.push,v231[v298]=new f286,v231[v298].Name=e[t].replace(_Tx(370),""),v231[v298].Size_X=.1*parseFloat(e[t+1].replace("SizeX: ","")),v231[v298].Size_Y=.1*parseFloat(e[t+2].replace("SizeY: ","")),v231[v298].Pos_X=.1*parseFloat(e[t+3].replace("PosX: ","")),v231[v298].Pos_Y=.1*parseFloat(e[t+4].replace("PosY: ","")),v231[v298].Rot=parseFloat(e[t+5].replace("Rot: ","")),v231[v298].MatIDStr=e[t+6].replace("Mat: ",""),v231[v298].UV_X=parseFloat(e[t+7].replace("UVx: ","")),v231[v298].UV_Y=parseFloat(e[t+8].replace("UVy: ","")),v231[v298].UV_OffsetX=.1182*-parseFloat(e[t+9].replace(_Tx(371),"")),v231[v298].UV_OffsetY=.1182*parseFloat(e[t+10].replace(_Tx(372),"")),v231[v298].PositionBuffer=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,v231[v298].PositionBuffer);v231[v298].Pos_X,v231[v298].Pos_Y;var k=.5*v231[v298].Size_X,j=.5*v231[v298].Size_Y;D=[-k,-j,-.2,k,-j,-.2,k,j,-.2,-k,j,-.2];gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(D),gl.STATIC_DRAW),v231[v298].PositionBuffer.itemSize=3,v231[v298].PositionBuffer.numItems=4,v231[v298].TextureCoordBuffer=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,v231[v298].TextureCoordBuffer);z=[v231[v298].UV_OffsetX,v231[v298].UV_OffsetY+1-v231[v298].UV_Y,v231[v298].UV_OffsetX+v231[v298].UV_X,v231[v298].UV_OffsetY+1-v231[v298].UV_Y,v231[v298].UV_OffsetX+v231[v298].UV_X,v231[v298].UV_OffsetY+1,v231[v298].UV_OffsetX,v231[v298].UV_OffsetY+1];gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(z),gl.STATIC_DRAW),v231[v298].TextureCoordBuffer.itemSize=2,v231[v298].TextureCoordBuffer.numItems=4,v231[v298].IndexBuffer=gl.createBuffer(),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,v231[v298].IndexBuffer);Z=[0,1,2,0,2,3];gl.bufferData(gl.ELEMENT_ARRAY_BUFFER,new Uint16Array(Z),gl.STATIC_DRAW),v231[v298].IndexBuffer.itemSize=1,v231[v298].IndexBuffer.numItems=6;for(C=0;C<v36;C++)v155[C].Name==v231[v298].MatIDStr&&(v231[v298].MatID=C);v=1,r=0;-1!=v231[v298].Name.search("Static")&&(v=0),(a=new p2.Box({width:v231[v298].Size_X,height:v231[v298].Size_Y})).material=v119,a.collisionGroup=GROUND,a.collisionMask=GROUND|v311|CHASSIS;var Q=new p2.Body({mass:v,position:[v231[v298].Pos_X,v231[v298].Pos_Y],angularVelocity:r,angle:v231[v298].Rot,id:v298,allowSleep:!0,sleepSpeedLimit:.1});Q.addShape(a),v290.addBody(Q),t+=10,v298++}}f297(),v10=[],v27=[],v5=[];for(var q=1;q<v298;q++)0==v231[q].IsStatic?v27.push(q):0==v231[q].Background?v10.push(q):v5.push(q);v90=2}function f190(){v90=0,DataToDownload=1,v290=new p2.World({gravityX:0,gravityY:-6}),v119=new p2.Material,v226=new p2.Material,v148=new p2.Material,v186=new p2.Material,v149=new p2.Material;var e=new p2.ContactMaterial(v149,v186,{friction:0,restitution:0,frictionRelaxation:1e-6,stiffness:1e-7});v290.addContactMaterial(e);var t=new p2.ContactMaterial(v149,v119,{friction:0,restitution:0,frictionRelaxation:1e-6,stiffness:1e-7});v290.addContactMaterial(t);var v=new p2.ContactMaterial(v119,v186,{friction:7,restitution:0});v290.addContactMaterial(v);var r=new p2.ContactMaterial(v119,v119,{friction:3,restitution:.2,frictionRelaxation:10});v290.addContactMaterial(r);var a=new p2.ContactMaterial(v226,v186,{friction:.55});v290.addContactMaterial(a);var n=new p2.ContactMaterial(v226,v119,{friction:.1});v290.addContactMaterial(n);var o=new p2.ContactMaterial(v148,v186,{friction:6,restitution:0});v290.addContactMaterial(o);var i,f=new p2.ContactMaterial(v148,v119,{friction:5,restitution:0});v290.addContactMaterial(f),v290.sleepMode=p2.World.BODY_SLEEPING,(i=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")).onreadystatechange=function(){4==i.readyState&&(v91=i.responseText,DataToDownload--,v90=1)},i.open("GET",_Tx(375)+v190+".c4d.txt",!0),i.send()}function f263(e,t,v){PlayerScore+=v,window.famobi_analytics.trackEvent("EVENT_LIVESCORE",{liveScore:PlayerScore});var r=23;15==v&&(r=24),25==v&&(r=25),f61(r),f60(0,0),f92(2,.1),f62(15,.1,180,0),f45(e,t+10,-.2,0,1,0),f80(!0),f199(),PlayerBestScore<PlayerScore&&(PlayerBestScore=PlayerScore)}var v301=0,v302=0,v254=.8,v232=0;function f191(e,t){var v,r,a,n;v=0,r=-24,a=-f247(19,-24,-19,-24)-90,f203(),f231(v,r,0),f296(a,0,0,1),f138(3,17,5,-17,-5),f230(),a=-f247(19,-24,v=0+18*Math.cos(-.4),r=0+18*Math.sin(-.4))-90,n=Math.sqrt(Math.pow(v-19,2)+Math.pow(r- -24,2))-8,f203(),f231(v,r,0),f296(a,0,0,1),f138(4,0,-2,n,2),f230(),a=-f247(-19,-24,v=0+17*Math.cos(3.5),r=0+17*Math.sin(3.5))-90,n=Math.sqrt(Math.pow(v- -19,2)+Math.pow(r- -24,2))-8,f203(),f231(v,r,0),f296(a,0,0,1),f138(4,0,-2,n,2),f230(),a=-f247(-19,-24,v=0+8*Math.cos(4.4),r=0+8*Math.sin(4.4))-90,n=Math.sqrt(Math.pow(v- -19,2)+Math.pow(r- -24,2))-8,f203(),f231(v,r,0),f296(a,0,0,1),f138(3,0,-3,20,3),f230(),a=-f247(19,-24,v=0+8*Math.cos(5),r=0+8*Math.sin(5))-90,n=Math.sqrt(Math.pow(v-19,2)+Math.pow(r- -24,2))-8,f203(),f231(v,r,0),f296(a,0,0,1),f138(3,0,3,20,-3),f230(),f203(),f231(0,0,0),f296(0,0,0,1),0==t?f37(_Tx(376)+(e+1)+".png",5):f201(5),f138(-1,-25,12.5,25,-12.5),f230(),f203(),f231(19,-24,0),f203(),f296(0,0,0,1),f138(6,-14,14,14,-14),f230(),f138(7,-14,14,14,-14),f230(),f203(),f231(-19,-24,0),f203(),f296(0,0,0,1),f138(6,-14,14,14,-14),f230(),f138(7,-14,14,14,-14),f230()}function f288(){var e,t,v,r;0==PlayerExploded&&(e=.5*(v299[0].position[0]+v299[1].position[0]),t=.5*(v299[0].position[1]+v299[1].position[1]),v=-f247(v299[0].position[0],v299[0].position[1],v299[1].position[0],v299[1].position[1])-90,f203(),f231(e,t,0),f296(v,0,0,1),f138(3,17,5,-17,-5),f230(),e=v300.position[0]+18*Math.cos(v300.angle-.4),t=v300.position[1]+18*Math.sin(v300.angle-.4),v=-f247(v299[0].position[0],v299[0].position[1],e,t)-90,r=Math.sqrt(Math.pow(e-v299[0].position[0],2)+Math.pow(t-v299[0].position[1],2))-8,f203(),f231(e,t,0),f296(v,0,0,1),f138(4,0,-2,r,2),f230(),e=v300.position[0]+17*Math.cos(v300.angle+3.5),t=v300.position[1]+17*Math.sin(v300.angle+3.5),v=-f247(v299[1].position[0],v299[1].position[1],e,t)-90,r=Math.sqrt(Math.pow(e-v299[1].position[0],2)+Math.pow(t-v299[1].position[1],2))-8,f203(),f231(e,t,0),f296(v,0,0,1),f138(4,0,-2,r,2),f230(),e=v300.position[0]+8*Math.cos(v300.angle+4.4),t=v300.position[1]+8*Math.sin(v300.angle+4.4),v=-f247(v299[1].position[0],v299[1].position[1],e,t)-90,r=Math.sqrt(Math.pow(e-v299[1].position[0],2)+Math.pow(t-v299[1].position[1],2))-8,f203(),f231(e,t,0),f296(v,0,0,1),f138(3,0,-3,20,3),f230(),e=v300.position[0]+8*Math.cos(v300.angle+5),t=v300.position[1]+8*Math.sin(v300.angle+5),v=-f247(v299[0].position[0],v299[0].position[1],e,t)-90,r=Math.sqrt(Math.pow(e-v299[0].position[0],2)+Math.pow(t-v299[0].position[1],2))-8,f203(),f231(e,t,0),f296(v,0,0,1),f138(3,0,3,20,-3),f230()),f203(),f231(v300.position[0],v300.position[1],0),f296(57.2958*v300.angle,0,0,1),f37("datas/textures/car_body_"+PlayerCarID+".png",5),f138(-1,-25,12.5,25,-12.5),f230(),f203(),f231(v299[0].position[0],v299[0].position[1],0),f203(),f296(57.2958*v299[0].angle,0,0,1),f138(6,-14,14,14,-14),f230(),f138(7,-14,14,14,-14),f230(),f203(),f231(v299[1].position[0],v299[1].position[1],0),f203(),f296(57.2958*v299[1].angle,0,0,1),f138(6,-14,14,14,-14),f230(),f138(7,-14,14,14,-14),f230()}function f148(){var e;(f204(),gl.disable(gl.BLEND),v204>v176)?f138(1,0,-(e=.5*(v204-v176)),v204,v204-e):f138(1,-(e=.5*(v176-v204)),0,v176-e,v176);var t=.47*v176-.5*v302,v=.5*v301;v>0&&(v=0),gl.enable(gl.BLEND);for(var r=0;r<20&&(v+1001>0&&f138(2,v,t,v+1001,t+200),!((v+=1e3)>v204));r++);}function f216(e){f259(1),v231[e].IsCrunchable=0,v231[e].MatIDStr=_Tx(377),v231[e].MatID=0,v231[e].ExplosiveCounter=0;for(var t,v=v231[e].PhysicObject,r=v.position[0],a=v.position[1],n=v.angle,o=0;o<WheelsCount;o++)-1!=SceneWheels[o].Body&&SceneWheels[o].ParentBody==v&&(v290.removeConstraint(SceneWheels[o].Constraint),SceneWheels[o].Constraint=-1,f61(15),f60(.05,0),f92(2,.1),f62(2*SceneWheels[o].Radius,0,360*Math.random(),10+20*Math.random()),f45(SceneWheels[o].Body.position[0],SceneWheels[o].Body.position[1],-.2,.2*v.velocity[0],10+5*Math.random(),0),f199(),SceneWheels[o].Body.position[0]=-1e3,SceneWheels[o].AutoKill=1);for(var i=0;i<v.shapes.length;i++){var f=v.shapes[i],s=f.position,l=f.angle,u=p2.vec2.create();if(f instanceof p2.Convex)for(var c=0;c!==f.vertices.length;c++){var d=f.vertices[c];p2.vec2.rotate(u,d,l);var x=v.position[0]+(u[0]+s[0]),g=v.position[1]+(u[1]+s[1]),h=u[0]+s[0],B=u[1]+s[1],T=Math.sqrt(h*h+B*B);0==T&&(T=1e-9),h/=T,B/=T;f61(20),f60(.05,0),f92(2,.2),f62(15,-1,360*Math.random(),.15*(5+30*Math.random())),f45(x,g,-.2,5*h,5*B+5+10*Math.random(),0),f199()}}for(;v.shapes.length>0;)v.removeShape(v.shapes[0]);for(v.position[0]=0,v.position[1]=0,v.angle=0,v.fromPolygon(v231[e].Sv_ALT),v231[e].Offset_X=v.position[0],v231[e].Offset_Y=v.position[1],t=0;t<v.shapes.length;t++)v.shapes[t].position[0]+=v231[e].Offset_X,v.shapes[t].position[1]+=v231[e].Offset_Y,v.shapes[t].material=v119,v.shapes[t].collisionGroup=GROUND,v.shapes[t].collisionMask=GROUND|v311|CHASSIS;v.position[0]=r,v.position[1]=a,v.angle=n,f263(r,a,25),v158+=5}var v158=0;function f217(e){v158=15,f259(4);var t=.55*v204/v254;if(!(v231[e].Pos_X+v231[e].Radius<-v301-t||v231[e].Pos_X-v231[e].Radius>-v301+t)){v231[e].MatIDStr="Voiture_alt",v231[e].MatID=0,v231[e].ExplosiveCounter=0,v231[e].IsExplosiv=0,v231[e].PhysicObject.velocity[1]+=15,v231[e].PhysicObject.mass=.1,f216(e),f61(14),f60(0,0),f92(1.5,.05),f62(40,2,360*Math.random(),.01*(10+20*Math.random())),f45(v231[e].PhysicObject.position[0],v231[e].PhysicObject.position[1],-.2,0,1,0),f199(),f61(14),f60(0,0),f92(2,.1),f62(40,-1,360*Math.random(),.01*-(10+20*Math.random())),f45(v231[e].PhysicObject.position[0],v231[e].PhysicObject.position[1],-.2,0,0,0),f199(),f61(19),f60(0,0),f92(2,1),f62(100,-20,360*Math.random(),2*(10+20*Math.random())),f45(v231[e].PhysicObject.position[0],v231[e].PhysicObject.position[1],-.2,0,0,0),f199();for(var v=0;v<5;v++)f61(18),f60(.05,0),f92(2,.2),f62(14,0,360*Math.random(),.1*(10+20*Math.random())),f45(v231[e].PhysicObject.position[0],v231[e].PhysicObject.position[1],-.2,.1*(200*Math.random()-100),25+20*Math.random(),0),f199();f263(v231[e].PhysicObject.position[0],v231[e].PhysicObject.position[1],15);var r=v290.bodies;for(v=0;v<v66;v++){var a=r[v];if(a.type!=p2.Body.STATIC&&a.id!=e&&a.position[0]<v231[e].PhysicObject.position[0]+100&&a.position[0]>v231[e].PhysicObject.position[0]-100&&a.position[1]<v231[e].PhysicObject.position[1]+100&&a.position[1]>v231[e].PhysicObject.position[1]-100){var n=10+80*Math.random(),o=a.position[0]-v231[e].PhysicObject.position[0],i=a.position[1]-v231[e].PhysicObject.position[1],f=Math.sqrt(o*o+i*i);0==f&&(f=1e-9),o/=f,i/=f,a.velocity[0]+=o*n*.25,a.velocity[1]+=Math.abs(i*n),a.position[0]<v231[e].PhysicObject.position[0]?a.angularVelocity+=1:a.angularVelocity-=1;var s=a.id;-1!=s&&s<1e3&&1==v231[s].IsExplosiv&&0==v231[s].ExplosiveCounter&&(v231[s].ExplosiveCounter=100+300*Math.random()),-1!=s&&s<1e3&&0==v231[s].IsExplosiv&&-1!=v231[s].Constraint&&(v290.removeConstraint(v231[s].Constraint),v231[s].Constraint=-1),-1!=s&&s<1e3&&1==v231[s].IsCrunchable&&f216(s),s>1999&&-1!=SceneWheels[s-2e3].Constraint&&(v290.removeConstraint(SceneWheels[s-2e3].Constraint),SceneWheels[s-2e3].Constraint=-1,f61(15),f60(.05,0),f92(2,.1),f62(2*SceneWheels[s-2e3].Radius,0,360*Math.random(),10+20*Math.random()),f45(SceneWheels[s-2e3].Body.position[0],SceneWheels[s-2e3].Body.position[1],-.2,.8*a.velocity[0],1*a.velocity[1],0),f199(),SceneWheels[s-2e3].Body.position[0]=-1e3,SceneWheels[s-2e3].AutoKill=1)}}}}var v233=0;function f172(){for(var e=.55*v204/v254,t=0;t!==v290.narrowphase.contactEquations.length;t++){var v=v290.narrowphase.contactEquations[t],r=v.bodyA,a=r.position[0];if(a+(o=v.contactPointA)[0]>-v301-e&&a+o[0]<-v301+e){var n=v.bodyB,o=v.contactPointA,i=(v.contactPointB,r.position[1]),f=(n.position[0],n.position[1],2*r.angularVelocity),s=2*n.angularVelocity,l=Math.abs(f),u=Math.abs(s),c=r.velocity[0],d=n.velocity[0],x=Math.abs(c),g=Math.abs(d);if(g>x&&(x=g,d=c),u>l&&(l=u,s=f),5!=v251||0!=PlayerExploded||n.shapes[0].collisionGroup!=CHASSIS&&r.shapes[0].collisionGroup!=CHASSIS||r.shapes[0].material==v149||r.shapes[0].material==v149||(PlayerEnergy-=.05*v260,v233<0?(f259(3),v233=10):v233-=.1*v260,0==PlayerExploded&&PlayerEnergy<0&&(v290.removeConstraint(v312),v290.removeConstraint(v313),v290.removeSpring(v314),v290.removeSpring(v315),v300.velocity[0]*=.5,v300.velocity[1]+=62,v299[0].velocity[0]-=20,v299[0].velocity[1]+=42,v299[1].velocity[0]+=20,v299[1].velocity[1]+=40,v300.angularVelocity-=2.8,v299[1].angularVelocity+=2,v299[0].angularVelocity-=2,PlayerExploded=1,window.famobi_analytics.trackScreen("SCREEN_LEVELRESULT"),v251=8,Stanislic_SendInfo(_Tx(380)),f143(),f259(1),f259(4),v234=0,v125=0,f196(0,1e5-Math.floor(PlayerScore),0)),Math.random()>.5&&(f61(19),f60(-.1,0),f92(1,.8),f62(6+15*Math.random(),1.5,360*Math.random(),.2),f45(a+o[0]-5+10*Math.random(),i+o[1]+1,-.2,f,.5+Math.random()*l*2,0),f199())),n.shapes[0].material==v186||r.shapes[0].material==v186){var h=r.id,B=n;if(-1==h||h>900){h=n.id,n;B=r}-1!=h&&h<1e3&&1==v231[h].IsExplosiv&&(f217(h),v231[h].PhysicObject.position[0]=-1e5),-1!=h&&h<1e3&&1==v231[h].IsCrunchable&&B.velocity[1]<-.2&&(1003==B.id||1002==B.id)&&(B.velocity[1]=15,f216(h))}n.shapes[0].material!=v149&&r.shapes[0].material!=v149||((r.velocity[0]>14||r.velocity[0]<-14)&&(r.velocity[0]*=.9),(n.velocity[0]>14||n.velocity[0]<-14)&&(n.velocity[0]*=.9),r.velocity[1]*=.9,n.velocity[1]*=.9),(l>.8||x>6)&&(f+=.1*c+3*Math.random(),(n.shapes[0].material==v226||r.shapes[0].material==v226)&&Math.random()>.5?(f61(11),f60(.1,0),f92(1,.5),f62(3+15*Math.random(),.5,360*Math.random(),.1),f45(a+o[0]-5+10*Math.random(),i+o[1]+1,-.2,f,.5+Math.random()*l*2,0),f199()):(n.shapes[0].material==v148||r.shapes[0].material==v148)&&Math.random()>.5?(f61(12),f60(.01,0),f92(1,.5),f62(3+15*Math.random(),.5,360*Math.random(),.1),f45(a+o[0]-5+10*Math.random(),i+o[1]+4,-.2,f,.5+Math.random()*l*2,0),f199()):(n.shapes[0].material==v149||r.shapes[0].material==v149)&&Math.random()>.5&&(f61(22),f60(-.01,0),f92(1,.5),f62(3+20*Math.random(),.5,360*Math.random(),.1),f45(a+o[0]-9+18*Math.random(),i+o[1]+4,-.2,f,0,0),f199()))}}}function f192(e){1==v231[e].IsExplosiv&&0==v231[e].ExplosiveCounter&&Math.abs(v231[e].PhysicObject.velocity[0])>5&&(v231[e].ExplosiveCounter=100),v231[e].ExplosiveCounter>0&&(Math.random()>.5&&(f228(2),f181(5,5,1,1)),v231[e].ExplosiveCounter-=.1*v260,v231[e].ExplosiveCounter<20&&(f217(e),v231[e].PhysicObject.position[0]=-1e5)),f203(),f231(v231[e].Pos_X,v231[e].Pos_Y,0),f296(v231[e].Rot,0,0,1),f201(100+v231[e].MatID),gl.bindBuffer(gl.ARRAY_BUFFER,v231[e].PositionBuffer),gl.vertexAttribPointer(v105[v141].vertexPositionAttribute,v231[e].PositionBuffer.itemSize,gl.FLOAT,!1,0,0),gl.bindBuffer(gl.ARRAY_BUFFER,v231[e].TextureCoordBuffer),gl.vertexAttribPointer(v105[v141].textureCoordAttribute,v231[e].TextureCoordBuffer.itemSize,gl.FLOAT,!1,0,0),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,v231[e].IndexBuffer),f13(1),gl.drawElements(gl.TRIANGLES,v231[e].IndexBuffer.numItems,gl.UNSIGNED_SHORT,0),v99+=v231[e].IndexBuffer.numItems,f230(),f228(1),f181(1,1,1,1),1==v231[e].AutoKill&&-1!=v231[e].PhysicObject&&(v231[e].AutoKill=0,v290.removeBody(v231[e].PhysicObject),v231[e].PhysicObject=-1)}function f108(){for(var e,t,v,r,a=.55*v204/v254,n=0;n<WheelsCount;n++)-1!=SceneWheels[n].Body&&((e=SceneWheels[n].Body.position[0])+(r=SceneWheels[n].Radius)>-v301-a&&e-r<-v301+a&&(SceneWheels[n].ParentBody.sleepState!=p2.Body.SLEEPING&&SceneWheels[n].Body.wakeUp(),t=SceneWheels[n].Body.position[1],v=57.2958*SceneWheels[n].Body.angle,f203(),f231(e,t,0),f203(),f296(v,0,0,1),f138(15,-r,r,r,-r),f230(),f138(16,-r,r,r,-r),f230()),1==SceneWheels[n].AutoKill&&(v290.removeBody(SceneWheels[n].Body),SceneWheels[n].Body=-1))}function f41(){var e=.55*v204/v254;f181(1,1,1,1),f228(1);for(var t=0;t<v5.length;t++)ObjID=v5[t],v231[ObjID].Pos_X+v231[ObjID].Radius>-v301-e&&v231[ObjID].Pos_X-v231[ObjID].Radius<-v301+e&&f192(ObjID)}function f87(){f181(1,1,1,1);for(var e=0;e<v156;e++){var t=v291[e].x,v=v291[e].y+Math.abs(25*f269(3*v277+45*e));f138(27,t-16,v+16,t+16,v-16),v300.position[0]+40>t&&v300.position[0]-40<t&&v300.position[1]+40>v&&v300.position[1]-40<v&&(f61(27),f60(0,0),f92(1,.1),f62(25,3.1,180,0),f45(t,v,-.2,0,1,0),f80(!0),f199(),PlayerCollectedBags++,v293=1,f263(t,v-20,25),v291[e].x=-5e3,f259(6))}}function f109(){f172();var e,t=.55*v204/v254;f181(1,1,1,1),f87(),f181(1,1,1,1),f228(1);for(var v=0;v<v27.length;v++)e=v27[v],v231[e].Pos_X+v231[e].Radius>-v301-t&&v231[e].Pos_X-v231[e].Radius<-v301+t&&f192(e);f108(),f156(),f228(1);for(v=0;v<v10.length;v++)e=v10[v],v231[e].Pos_X+v231[e].Radius>-v301-t&&v231[e].Pos_X-v231[e].Radius<-v301+t&&f192(e)}function f149(){f228(2);for(var e=0;e!==v290.narrowphase.contactEquations.length;e++){var t=v290.narrowphase.contactEquations[e],v=t.bodyA,a=t.bodyB,n=t.contactPointA,o=t.contactPointB,i=v.position[0],f=v.position[1],s=a.position[0],l=a.position[1];f203(),f231(i+n[0],f+n[1],0),f181(10,0,0,1),f138(1,-2,-1,2,1),f230(),f203(),f231(s+o[0],l+o[1],0),f181(10,10,0,1),f138(1,-1,-2,1,2),f230()}var u=v290.bodies;for(e=0;e<v66;e++){var c,d=u[e];for(f203(),f231(d.position[0],d.position[1],0),f296(57.2958*d.angle,0,0,1),f181(0,10,0,1),f138(1,-.3,0,.3,5),f181(0,0,10,1),f138(1,0,-.3,5,.3),f230(),d.sleepState!=p2.Body.SLEEPING?f181(10,0,0,1):f181(0,0,0,1),d.type==p2.Body.STATIC&&f181(0,10,10,1),c=0;c<d.shapes.length;c++){var x=d.shapes[c],g=x.position,h=x.angle;if(x instanceof p2.Circle){for(r=0;r<360;r+=36){var B=d.position[0]+f270(-d.angle+r/57.2958)*x.radius,T=d.position[1]+f269(-d.angle+r/57.2958)*x.radius,b=d.position[0]+f270(-d.angle+(r+36)/57.2958)*x.radius,m=d.position[1]+f269(-d.angle+(r+36)/57.2958)*x.radius,p=Math.sqrt(Math.pow(B-b,2)+Math.pow(T-m,2)),_=-f247(B,T,b,m);f203(),f231(B,T,0),f296(_,0,0,1),f138(1,-.3,-.3,.3,p+.3),f230()}}if(x instanceof p2.Convex)for(var S=p2.vec2.create(),R=p2.vec2.create(),M=0;M!==x.vertices.length;M++){var A=M+1;A==x.vertices.length&&(A=0);var E=x.vertices[M],y=x.vertices[A];p2.vec2.rotate(S,E,h),p2.vec2.rotate(R,y,h);B=S[0]+g[0],T=S[1]+g[1],b=R[0]+g[0],m=R[1]+g[1],p=Math.sqrt(Math.pow(B-b,2)+Math.pow(T-m,2)),_=-f247(B,T,b,m);f203(),f231(d.position[0],d.position[1],0),f296(57.2958*d.angle,0,0,1),f231(S[0]+g[0],S[1]+g[1],0),f296(_,0,0,1),f138(1,-.3,-.3,.3,p+.3),f230()}}}}var v68=.8,v93=1.8,v94=0;function f246(e){v93=4+.1*PlayerCarID;var t=.001+.002*PlayerCarID;v157=v300.angularVelocity,1==keysDown[40]||1==v188?v94+=v260*t/e:1==keysDown[38]||1==v151?v94-=v260*t/e:v94*=.5,1!=keysDown[37]&&1!=v187||(v157+=.025*v260/e),1!=keysDown[39]&&1!=Control_Right||(v157-=.025*v260/e),v157<-v68&&(v157=-v68),v157>v68&&(v157=v68),v94<-v93&&(v94=-v93),v94>v93&&(v94=v93),v300.angularVelocity=v157,v299[1].angularVelocity=v94,v299[0].angularVelocity=v94}function f193(){(null==(Pref_User_Sound=parseInt(f272(_Tx(382))))||isNaN(Pref_User_Sound))&&(Pref_User_Sound=1),(null==(v76=parseInt(f272(_Tx(383))))||isNaN(v76))&&(v76=1),(null==(v52=parseInt(f272("UserAvatar")))||isNaN(v52))&&(v52=1),(null==(PlayerMaxLevel=parseInt(f272(_Tx(384))))||isNaN(PlayerMaxLevel))&&(PlayerMaxLevel=1),(null==(PlayerBestScore=parseInt(f272(_Tx(385))))||isNaN(PlayerBestScore))&&(PlayerBestScore=0),(v278=f272(_Tx(386))+"___").length<10&&(v278=_Tx(387));var e=f272(_Tx(388));null!=e&&e.length>10&&(v192=e)}function f194(){f273("UserName",v101),f273("UserAvatar",v52),f273("UserSound",Pref_User_Sound),f273("UserMusic",v76),f273("MaxLevel",PlayerMaxLevel),f273("StarsLevel",v192),f273("BestScore",PlayerBestScore),f273("pl_ScoreTop",v278)}function f289(){f40(1,0),f40(2,0),f173(),f204(),f228(3),gl.enable(gl.BLEND),f181(0,0,0,.5),f183(.5*v204-242*v294,42,.5*v204+242*v294,v176-35),f181(1,.5,0,1),f183(.5*v204-240*v294,40,.5*v204+240*v294,v176-40),f228(2),f181(1,1,1,1);var e=f95(13,.5*v204-170*v294,350,1.3),t=f95(15,.5*v204,350,1.3),v=f95(14,.5*v204+170*v294,350,1.3);1==f95(11,.5*v204+235*v294,45,.8)&&(window.famobi_analytics.trackScreen("SCREEN_LEVEL"),v251=5,f259(5)),1==e&&window.famobi_analytics.trackEvent("EVENT_LEVELFAIL",{levelName:""+v190,reason:"quit"}).then(function(){f102(1),f102(2),f144("title"),window.famobi_analytics.trackScreen("SCREEN_LEVELSELECT"),v251=21,f259(5)}),1==t&&(f102(1),f102(2),PlayerScore=0,window.famobi_analytics.trackEvent("EVENT_LIVESCORE",{liveScore:PlayerScore}),v251=3,f259(5)),1==v&&(window.famobi_analytics.trackScreen("SCREEN_LEVEL"),v251=5,f259(5)),f228(2),f181(1,.5,0,1),f282(v249),f231(.5*v204,64,0),f299(1.3*v294,1.3*v294,1),"tr"==v162&&f299(.7,.9,1),"ru"==v162&&f299(.55,.6,1),"pl"==v162&&f299(.7,.9,1),"nl"==v162&&f299(.8,.9,1),f181(2,2,2,1),f212(v289[14]),f231(0,72,0)}var v278="";function f218(e,t,v,r){if(Score_PlayerMax=1e5-PlayerBestScore,f249(0),v78>0){v278="";for(var a=0;a<20;a++)a<20&&(v278+=f179(a,0)+";"+f135(a,0)+";123;"+(1e5-f153(a,0))+",");v78=0}var n="1",o="",i=0,f=e+1,s=v278.split(","),l=s.length;if(e>-1&&e<l){var u=s[e].split(";");u.length;o=u[0],n=u[1],i=u[3]}else o=v101+"",n=v52+"",i=Math.floor(PlayerBestScore)+"",f=ScoresTable[0].PlayerRank;void 0===i||i<1||i>99999||(f181(1,1,1,1),f203(),f231(t,v,0),f299(r,r,1),f203(),f231(34,0,0),f299(.3,.3,1),f38(_Tx(389)+n+".jpg",26),f230(),f181(2,2,2,1),f234(21,-5,-1,.2),f203(),f231(-5,-12,0),f299(.25,.25,1),f282(v249),f231(0,0,-1),f>99&&f299(.7,1,1),f>999&&f299(.9,1,1),f181(3,3,3,.8),f212(f+""),f231(-3,-3,-1),f181(0,0,0,1),f212(f+""),f230(),f181(0,0,0,1),f203(),f231(56,-25,0),f299(.4,.5,1),f282(v284),f212(o),f230(),f181(1.5,1.5,1.5,1),f203(),f231(365,-25,0),f299(.4,.5,1),f282(FontRight),f212(i+""),f230(),f230(),v123++)}var v95=0,v123=0;function f264(){var e=1008+v95+100*v294;v95<-e&&(v95+=e),v95-=.005*v260,1==v197&&(v95-=.2*v260,1==MouseClick&&Stanislic_SendInfo(_Tx(390))),v301-=.01*v260,v302=-190,f148(),f204(),f228(3),gl.enable(gl.BLEND),f181(0,0,0,.5),f183(.5*v204-242*v294,42,.5*v204+242*v294,v176-35),f181(1,.5,0,1),f183(.5*v204-240*v294,40,.5*v204+240*v294,v176-40),f228(2),f181(1,.5,0,1),f282(v249);var t=gl.drawingBufferHeight/700;gl.viewport(0,40*t,gl.drawingBufferWidth,gl.drawingBufferHeight-185*t),f231(.5*v204-220*v294,0,0),f299(2*v294,2.6*v294,1),v123=0;for(var v=-20;v<40;v++){var r=v;r>19&&(r-=20),r>19&&(r-=20),r<0&&(r+=20);var a=28*v+v95+100*v294;-1==r&&(a-=15),a>-20&&a<357&&!window.famobi.hasFeature("standalone")&&window.famobi.hasFeature("leaderboard")&&f218(r,0,a,.6)}f204(),gl.enable(gl.BLEND),f228(2),f181(1,1,1,.3),f138(28,.5*v204-240*v294,40,.5*v204+240*v294,145),f138(28,.5*v204-240*v294,130,.5*v204+240*v294,145),f181(0,0,0,.4),f138(28,.5*v204-240*v294,170,.5*v204+240*v294,145),f228(2),f181(1,1,1,1),f218(-1,.5*v204-219,97,1.2),f228(1),1==f95(11,.5*v204+235*v294,45,.8)&&(v251=v120,f259(5)),f282(FontRight);var n=.8*f211(v101);f203(),f231(v204-16,609,0),f228(3),f181(0,0,0,.7),f183(-86-n,8,16,500),f228(1),f299(.8,.9,1),f181(0,0,0,1),f212(v101),f230(),f181(1,1,1,1),f203(),f231(v204-72-n,653,0),f299(.59,.49,1),f38("datas/textures/avatars/"+v52+".jpg",26),f230(),f269(10*v277)>0&&f181(2.5,2.5,0,1),f234(23,v204-72-n,658,.64),f181(1,1,1,1),1==f175(v204-140-n,605,v204,900)&&(v251=11)}function f298(){var e=1008+v95+100*v294;v95<-e&&(v95+=e),v95-=.005*v260,1==v197&&(v95-=.2*v260,1==MouseClick&&Stanislic_SendInfo("High scores Scroll")),v301-=.01*v260,v302=-190,f148(),f204(),f228(3),gl.enable(gl.BLEND),f181(0,0,0,.5),f183(.5*v204-242*v294,42,.5*v204+242*v294,v176-35),f181(1,.5,0,1),f183(.5*v204-240*v294,40,.5*v204+240*v294,v176-40),f228(2),f181(1,.5,0,1),f282(v249),f181(1,1,1,1),f282(v249),f203(),f231(.5*v204,113,0),f299(.5,.5,1),f181(0,0,0,.8),f212(v289[20]),f230(),v101=f167(0,v101,.5*v204+1,163,-1);var t=.5*v204-211,v=.5*v204+210,r=t,a=296;f203(),v52>0&&v52<25||(v52=1);for(var n=1;n<25;n++)n==v52&&(f228(3),f181(1,1,0,1),f183(r-44,a-44,r+44,a+44)),1==MouseClick&&v303>r-44&&v303<r+44&&v304>a-44&&v304<a+44&&(MouseClick=-1,v52=n),f228(1),f203(),f181(1,1,1,1),f231(r,a,0),f299(.6,.6,1),f38("datas/textures/avatars/"+n+".jpg",26),f181(1,1,1,1),f230(),(r+=84)>v&&(r=t,a+=83);f203(),f228(2),1==f176(.5*v204+269-50,0,.5*v204+269+50,100)&&(TextField_x=-5e3,TextField_y=-5e3,ShowAbout=0,WindowsZoom=0,window.famobi_analytics.trackScreen("SCREEN_LEVEL"),v251=5,f194(),Stanislic_SendInfo(_Tx(392)),f196(0,1e5,0)),f204(),f228(3),f228(1),1==f95(11,.5*v204+235*v294,45,.8)&&(v101.length<3&&(v101="Pilot"),v251=9,f259(5),f194())}function f219(){v301-=.01*v260,v302=-190,f148(),f204(),f228(3),gl.enable(gl.BLEND),f181(0,0,0,.5),f183(.5*v204-242*v294,42,.5*v204+242*v294,v176-35),f181(1,.5,0,1),f183(.5*v204-240*v294,40,.5*v204+240*v294,v176-40),f228(1),1==f95(11,.5*v204+235*v294,45,.8)&&(v251=v120,f259(5));f228(2),f181(1,1,1,1),f203(),f231(.5*v204,350,0),f296(20*v277,0,0,1),f138(19,-300,-300,300,300),f230(),f181(1,.5,0,1),f282(v249),f203(),f231(.5*v204,42,0),f296(11*v294,0,0,1),f299(.9*v294,1*v294,1),f181(2,2,2,1),f212(v289[22]),f231(0,72,0),f212(v289[23]),f230(),f181(1,1,1,1),f203(),f231(.5*v204-41,290,0);var e=8*v294+.06*f270(8*v277);f299(e,-e,1),f296(15*v294,0,0,1),f191(PlayerCarID-1,0),f230()}function f290(){v301-=.01*v260,v302=-190,f148(),f204(),f228(3),gl.enable(gl.BLEND),f181(0,0,0,.5),f183(.5*v204-242*v294,42,.5*v204+242*v294,v176-35),f181(1,.5,0,1),f183(.5*v204-240*v294,40,.5*v204+240*v294,v176-40),f228(1),f234(4,.5*v204,100,.5*v294),1==f95(11,.5*v204+235*v294,45,.8)&&(window.famobi_analytics.trackScreen("SCREEN_HOME"),v251=1,f259(5)),f228(2),f181(1,.5,0,1),f282(v249),f231(.5*v204,200,0),f299(.3*v294,.3*v294,1),f181(2,2,2,1),f212(v289[4]),f231(0,72,0),f181(2,2,2,.5),f212(v289[5]),f231(0,350,0),f203(),f231(0,-194,0),f181(1,1,1,1),f38(_Tx(393),26),f230(),f181(2,2,2,1),f212(v289[6]),f231(0,72,0),f181(2,2,2,.5),f212(v289[7]),f231(0,350,0),f203(),f231(0,-194,0),f181(1,1,1,1),f38(_Tx(394),26),f230(),f181(2,2,2,1),f212(v289[8]),f231(0,72,0),f181(2,2,2,.5),f212(v289[9]),f231(0,350,0),f203(),f231(0,-194,0),f181(1,1,1,1),f38(_Tx(395),26),f230(),f181(2,2,2,1),f212(v289[10]),f231(0,72,0),f181(2,2,2,.5),f212(v289[11])}var v192=_Tx(396);function f291(e,t,v){return t>e.length-1?e:e.substr(0,t)+v+e.substr(t+1)}function f74(){v301-=.01*v260,v302=-190,f148(),f228(3),gl.enable(gl.BLEND),f181(1,1,1,.9),f183(.5*v204-222*v294,0,.5*v204+222*v294,v176),f228(2);var e=-1.5,t=0,v=50;v204<1.1*v176&&(v=40);for(var r=0;r<20;r++){var a=0;r+1>PlayerMaxLevel&&(a=1);var n=.5*v204+50*e*2.4,o=135+t*v*2.4;++e>2&&(e=-1.5,t++),f228(3),0==a?f181(1,.5,0,1):f181(.4,.4,.4,1),1==MouseClick&&0==a&&v303>n-50&&v303<n+50&&v304>o-v&&v304<o+v&&(MouseClick=-1,v190=r+1,v251=3,f259(5)),f183(n-50,o-v,n+50,o+v),f228(2),0==a?f181(1,1,1,1):f181(0,0,0,.5),f203(),f231(n,o-33,0),f282(v249),f299(.5,.5,1);var i=r+1;i<10&&(i="0"+i),f212(i+"");var f=parseInt(v192[r]);f181(1,1,1,1),f>0?f181(2,2,1,1):f181(0,0,0,.25),f234(21,-54,137,.25),f>2?f181(2,2,1,1):f181(0,0,0,.25),f234(21,54,137,.25),f>1?f181(2,2,1,1):f181(0,0,0,.25),f234(21,0,127,.3),f230()}f181(1,1,1,1),v204>628&&f150();var s=f95(16,165*v294-100,630,1);f228(2),f181(0,0,0,1),f282(v249),f231(.5*v204,111*v294-100,0),f299(.65,.65,1),f212(v289[13]),1==s&&(window.famobi_analytics.trackScreen("SCREEN_CHARACTER"),v251=2,f259(5))}var v124=[0,3,6,9,12,15,18];function f110(){var e,t;v301-=.01*v260,v302=-190,f148(),f228(3),gl.enable(gl.BLEND),f181(1,1,1,.9),f183(.5*v204-222*v294,0,.5*v204+222*v294,v176),f228(2);var v=1;v204<1.1*v176&&(v=.8);for(var r=0;r<6;r++){var a=0;v124[r]>PlayerMaxLevel&&(a=1),0==r&&(e=.5*v204-150*v,t=140),1==r&&(e=.5*v204+120*v,t=140),2==r&&(e=.5*v204-150*v,t=140+195*v),3==r&&(e=.5*v204+120*v,t=140+195*v),4==r&&(e=.5*v204-150*v,t=140+390*v),5==r&&(e=.5*v204+120*v,t=140+390*v),f203(),f231(e,t,0);var n=3.2*v294*v;0==a&&(n+=.06*f270(4*v277+45*r)),f299(n,-n,1),f296(11,0,0,1),1==a?f181(.25,.25,.25,1):f181(1,1,1,1),f191(r,a),1==a&&(f181(1,1,1,1),f234(17,0,-16,-.17*v294),f228(2),f282(v249),f299(.12,-.155,1),f231(0,61,0),f212("LVL "+v124[r])),f230(),0==a&&1==MouseClick&&v303>e-30*n&&v303<e+40*n&&v304<t+40*n&&v304>t-15*n&&(PlayerCarID=r+1,window.famobi_analytics.trackScreen("SCREEN_LEVELSELECT"),v251=21,f259(5))}f150();var o=f95(16,165*v294-100,630,1);f228(2),f181(0,0,0,1),f282(v249),f231(.5*v204,111*v294-100,0),f299(.65,.65,1),f212(v289[12]),1==o&&(window.famobi_analytics.trackScreen("SCREEN_HOME"),v251=1,f259(5))}function f150(){var e=1;v204<1.1*v176&&(e=.7),(v76>1||v76<0)&&(v76=1),(Pref_User_Sound>1||Pref_User_Sound<0)&&(Pref_User_Sound=1);var t=f95(6-v76,v204-60*e,60*e*v294,e),v=f95(8-Pref_User_Sound,v204-60*e,150*e*v294,e);1==t&&(MouseClick=-1,v76=window.famobi_paused?0:1-v76,f194(),(0==v76||window.famobi_paused)&&f143(),1!=v76||window.famobi_paused||f144(-1),f259(5),0==v76&&Stanislic_SendInfo(_Tx(397)),1==v76&&Stanislic_SendInfo(_Tx(398)),window.famobi_analytics.trackEvent("EVENT_VOLUMECHANGE",{bgmVolume:v76,sfxVolume:Pref_User_Sound})),1==v&&(MouseClick=-1,Pref_User_Sound=window.famobi_paused?0:1-Pref_User_Sound,f194(),f259(5),0==Pref_User_Sound&&Stanislic_SendInfo(_Tx(399)),1==Pref_User_Sound&&Stanislic_SendInfo(_Tx(400)),window.famobi_analytics.trackEvent("EVENT_VOLUMECHANGE",{bgmVolume:v76,sfxVolume:Pref_User_Sound}))}function f220(){v301-=.01*v260,v302=-190,f148();var e=1;v204<1.1*v176&&(e=.8),f234(4,.5*v204-18*e,200*v294,e);var t=1;if(v204<1.1*v176&&(t=.7),f150(),window.famobi.hasFeature("credits"))var v=f95(9,v204-60*t,240*t*v294,t);var r=0;if(window.famobi.hasFeature("leaderboard")&&!window.famobi.hasFeature("standalone")){var a=f95(12,.5*v204-99,470,1.5*v294);r=99}var n=f95(14,.5*v204+r,470,(1.5-.02*f270(8*v277))*v294);f228(2),f181(1,1,1,1);var o=_Tx(401);1==Monetisation_IsFamobi&&(o=famobi_getMoreGamesButtonImage());var i=f25(o),f=f20(o);if(i>8&&f>8){var s=240/i,l=240/f,u=s;l<s&&(u=l),f203(),f231(.5*v204,730-f*u*v294,0),f299(u,u,1),f38(o,26),f230(),v303<.5*v204+i*u*.5&&v303>.5*v204-i*u*.5&&v304>590-f*u*.5&&v304<590+f*u*.5&&1==v197?1==Monetisation_IsFamobi?famobi_moreGamesLink():v258=_Tx(402):v258=""}1==n&&(MouseClick=-1,window.famobi_analytics.trackScreen("SCREEN_CHARACTER"),v251=2,f259(5)),1==v&&(window.famobi_analytics.trackScreen("SCREEN_CREDITS"),v251=20,f259(5)),1==a&&(v120=v251,v251=9)}var v28=0;function f173(){var e;f148(),f228(2),f231(.5*v204,.5*v176-v28,0),1==v100&&v300.position[0]>v153+100?v28=.95*v28+5:v28*=.9,f299(v254,-v254,1),f231(v301,v302,0),v158>0&&(f231(Math.random()*v158,Math.random()*v158,0),v158-=.06*v260);var t=v290.bodies;for(v66=t.length,e=0;e<v66;e++){var v=t[e];if(0!=v.mass){var r=v.id;-1!=r&&r<1e3&&(v231[r].Pos_X=v.position[0],v231[r].Pos_Y=v.position[1],v231[r].Rot=57.2958*v.angle,1==v231[r].IsMotor&&(v.angularVelocity=.1),2==v231[r].IsMotor&&(v.angularVelocity=.2*f270(v277)),0!=v231[r].IsPlatform&&(v.angularVelocity*=.1,v.position[0]=.5*(v.position[0]+v231[r].Start_X),v.velocity[0]*=.1,v.velocity[1]=20*f270(v277+45*r)))}}f41(),1==v190&&(1==v100?(f95(2,87,314,.0025*f270(7*v277)-.12),f95(3,89,297,.0025*f270(7*v277+40)-.12),f95(1,91,277,.0025*f270(7*v277+80)-.12),f95(0,93,262,.0025*f270(7*v277+120)-.12)):(f95(24,87,314,.005*f270(7*v277)-.2),f95(25,89,297,.005*f270(7*v277+40)-.2),f95(27,91,277,.005*f270(7*v277+80)-.2),f95(26,93,262,.005*f270(7*v277+120)-.2))),f288(),f109()}var v234=0,v125=0;function f265(){if(1!=f17()){v125<50?(1==MouseClick&&(v125=50),v125+=.025*v260):window.famobi_eventCalled||(window.famobi_eventCalled=!0,setTimeout(function(){Promise.all([window.famobi_analytics.trackEvent("EVENT_LEVELFAIL",{levelName:""+v190,reason:"dead"})]).then(function(){window.famobi_showButton=!0},function(){window.famobi_showButton=!0})},1500)),f204(),f228(1);if(v204<1.1*v176&&.7,f181(1,1,1,1),window.famobi_showButton)var e=f95(12,.5*v204-180,580,.8*v294),t=f95(15,.5*v204,560,(1.5-.02*f270(8*v277))*v294),v=f95(13,.5*v204+180,580,.8*v294);f228(2),f282(v249),f231(.5*v204,219,0),f181(1,1,1,1),f299(1.6,1.6,1),f296(-4,0,0,1),f299(1e3,.7,1),f181(.1,.1,.1,1),f234(20,0,36,.9),f181(1,1,1,1),f299(5e-4,.7,1),f181(1.7,1.7,1.7,1),f212(v289[19]),f181(0,0,0,1),f299(.7,.7,1),f231(-10,175,0),f212(v289[16]),f231(-5,65,0),f299(1.7,1.7,1),f181(0,0,0,1),f212(Math.floor(PlayerScore)+v289[21]),f231(0,-3,0),f181(2,.5,0,1),v255>0&&(v255-=.0015*v260,f270(40*v277)>0&&f181(2,2,0,1)),f212(Math.floor(PlayerScore)+v289[21]),PlayerScore>100&&0==v239?(PlayerScore-=50,v255=1):PlayerScore>20&&0==v239?(PlayerScore-=10,v255=1):PlayerScore>0&&0==v239&&(PlayerScore--,v255=1),f204(),f228(1),f181(1,1,1,1),f234(22,.5*v204,140,.7),window.famobi_showButton&&1==e&&(PlayerScore=0,window.famobi_analytics.trackEvent("EVENT_LIVESCORE",{liveScore:PlayerScore}),v120=v251,v251=9,Stanislic_SendInfo(_Tx(403))),window.famobi_showButton&&1==v&&(PlayerScore=0,window.famobi_analytics.trackEvent("EVENT_LIVESCORE",{liveScore:PlayerScore}),MouseClick=-1,window.famobi_analytics.trackScreen("SCREEN_LEVELSELECT"),v251=21,f259(5),Stanislic_SendInfo(_Tx(404))),window.famobi_showButton&&1==t&&(PlayerScore=0,window.famobi_analytics.trackEvent("EVENT_LIVESCORE",{liveScore:PlayerScore}),MouseClick=-1,v251=3,f259(5),f194(),Stanislic_SendInfo(_Tx(405))),window.famobi_showButton&&f150()}}var v161,v128,v129,v69,v159=0,v160=0,v126=0,v127=0,v235=0,v236=0,v193=0,v194=0,v292=-1,v255=0,v293=0,v237=1;function f130(){if(5==v251){if(0==v100)v160=.5*(v160+630),v236=.5*(v236+570),v159=.5*(v159+13),v237=1;else{var e=.8;v204<1.15*v176&&(e=.69),v204<.8*v176&&(e=.6),v204>1.15*v176?(v160=.5*(v160+107),v236=.5*(v236+51),v159=.5*(v159+13),v237=1):(v160=.5*(v160+700-326*e),v236=.5*(v236+700-326*e),v159=.5*(v159+v204-20),v237=0)}v126=0,v127=0,v235=59,v193=0,v194=0,v130<1&&(PlayerBonus-=.003*v260)}f181(1,1,1,1),v159+=v126*v260,v160+=v127*v260,v235+=v193*v260,v236+=v194*v260,v193*=.9,v194*=.9,v126*=.9,v127*=.9,PlayerBonus<0&&(PlayerBonus=0),f282(1==v237?v284:FontRight),-1==v237&&f282(v249),f228(2),f181(1,1,1,2),f203(),f231(v159,v160,0),f299(.6,.7,1),f212(v289[15]+" "+Math.floor(PlayerBonus)),f230(),f181(1,1,1,2);var t=30;v293>0&&(v293-=.0015*v260,f270(35*v277)<0&&(f181(2,2,0,1.5),t+=5)),f282(v284),f203(),f231(v235,v236,0);f138(27,-23-t,35-t,-23+t,35+t),f299(.6,.7,1),f212(Math.floor(PlayerCollectedBags)+"/"+Math.floor(v156)),f230(),f181(1,1,1,1),5==v251&&PlayerScore>0&&(f228(2),f282(v249),f203(),f231(.5*v204,52,0),f299(.7,.7,1),f181(0,0,0,2),f212(PlayerScore+v289[21]),f231(0,-1,0),f181(2,.6,0,1),v255>0&&(v255-=.0015*v260,f270(40*v277)>0&&f181(2,2,0,1.5)),f212(PlayerScore+v289[21]),f230(),f181(1,1,1,1),v292!=PlayerScore&&(v292=PlayerScore,v255=1)),f228(2)}function f195(){if(1!=f17()){var e,t;if(0==v161&&(v129=0,(v128+=v260)>1e3&&(v128=0,v161=1)),1==v161)if(v235<(e=.5*v204)+10&&(v193+=.005*v260),v235>e-10&&(v193-=.005*v260),v236<(t=140)+10&&(v194+=.005*v260),v236>t-10&&(v194-=.005*v260),Math.abs(v193)<1&&Math.abs(v194)<1&&Math.abs(v235-e)<10&&Math.abs(v236-t)<10)v129=0,PlayerCollectedBags>.24*v156&&(v129=1),PlayerCollectedBags>.499*v156&&(v129=2),PlayerCollectedBags>v156-1&&(v129=3),Stanislic_SendInfo(_Tx(406)+v190+_Tx(407)+v129),famobi_LevelStars(v190-1,v129),parseInt(v192[v190-2])<v129&&(v192=f291(v192,v190-2,v129+""),f194()),v235=-1e3,v161=2,f259(5);if(2==v161)v237=-1,v159<(e=.5*v204)+10&&(v126+=.005*v260),v159>e-10&&(v126-=.005*v260),v160<(t=420)+10&&(v127+=.005*v260),v160>t-10&&(v127-=.005*v260),Math.abs(v126)<1&&Math.abs(v127)<1&&Math.abs(v159-e)<10&&Math.abs(v160-t)<10&&(PlayerBonus>25?(PlayerBonus-=15,PlayerScore+=15):PlayerBonus>0&&(PlayerBonus--,PlayerScore++),0==PlayerBonus&&(v159=-1e3,f196(0,1e5-Math.floor(PlayerScore),0),f259(5),v255=1,window.famobi_score.setLevelScore(v190-1,Math.max(0,PlayerScore-window.famobi_score.getCurrentScore())),v161=3));3==v161&&(v161=4,setTimeout(function(){Promise.all([window.famobi_analytics.trackEvent("EVENT_LEVELSUCCESS",{levelName:""+(v190-1)}),window.famobi_analytics.trackEvent("EVENT_LEVELSCORE",{levelScore:window.famobi_score.getLevelScore(v190-1),levelName:""+(v190-1)}),window.famobi_analytics.trackEvent("EVENT_TOTALSCORE",{totalScore:window.famobi_score.getTotalScore()})]).then(function(){v161=5},function(){v161=5})},1500)),f204(),f228(1);v204<1.1*v176&&.7,f181(1,1,1,1);var v=f95(15,.5*v204-180,v69=v161<5?1e3:.5*(v69+580),.8*v294),r=14;21==v190&&(r=12);var a=f95(r,.5*v204,v69-20,(1.5-.02*f270(8*v277))*v294),n=f95(13,.5*v204+180,v69,.8*v294);f228(2),f282(v249),f231(.5*v204,219,0),f181(1,1,1,1),f299(1.6,1.6,1),f296(-4,0,0,1),f299(1e3,.7,1),f234(20,0,36,.9),f299(5e-4,.7,1),v129>0?f181(2,2,1,1):f181(0,0,0,.75),f234(21,-132,-60,.6),v129>2?f181(2,2,1,1):f181(0,0,0,.75),f234(21,132,-60,.6),v129>1?f181(2,2,1,1):f181(0,0,0,.75),f234(21,0,-80,.8),f181(1.7,1.7,1.7,1),f212(v289[17]),f181(0,0,0,1),f299(.7,.7,1),f231(-10,175,0),f212(v289[16]),f231(-5,65,0),f299(1.7,1.7,1),f181(0,0,0,1),f212(Math.floor(PlayerScore)+v289[21]),f231(0,-3,0),f181(2,.5,0,1),v255>0&&(v255-=.0015*v260,f270(40*v277)>0&&f181(2,2,0,1)),f212(Math.floor(PlayerScore)+v289[21]),f204(),f228(1),f181(1,1,1,1),PlayerBestScore<PlayerScore&&(PlayerBestScore=PlayerScore),5===v161&&f150(),1==v&&(v190--,MouseClick=-1,v251=3,f259(5),f194()),1==n&&(f194(),MouseClick=-1,window.famobi_analytics.trackScreen("SCREEN_LEVELSELECT"),v251=21,f259(5),Stanislic_SendInfo(_Tx(408))),1==a&&21!=v190&&(MouseClick=-1,v251=3,f259(5),f194(),Stanislic_SendInfo(_Tx(409)),f196(0,1e5-Math.floor(PlayerScore),0)),1==a&&21==v190&&(f102(1),f102(2),f144("title"),window.famobi_analytics.trackScreen("SCREEN_LEVELSELECT"),v251=21,f259(5),v190--,MouseClick=-1,f194(),v120=v251,v251=9,Stanislic_SendInfo(_Tx(410)),f196(0,1e5-Math.floor(PlayerScore),0))}}var v130,v294=1,v195=0;function f221(){if((v277+=.001*v260)>360&&(v277-=360),(v252+=5e-4*v260)>360&&(v252-=360),!(DataToDownload>0||1!=v146)){switch(106==v259&&(3==++v276&&(v276=0),v259=0),f204(),f228(1),v294=.8*v294+.2,v189!=v251&&(v189=v251,v294=0),21==v251&&window.famobi_v251!=v251&&window.famobi_analytics.trackEvent("EVENT_LIVESCORE",{liveScore:0}),window.famobi_v251=v251,v251){case 0:Stanislic_SendInfo(_Tx(411)),f251(0,8,1,1,121,126),f251(1,8,124,1,244,126),f251(2,8,247,1,367,126),f251(3,8,370,1,490,126),f251(4,21,340,663,1022,1022),f251(5,21,525,1,605,81),f251(6,21,609,1,690,81),f251(7,21,525,85,605,165),f251(8,21,609,85,690,165),f251(9,21,525,169,605,249),f251(10,21,609,169,690,249),f251(11,21,694,1,776,81),f251(12,21,778,1,897,122),f251(13,21,901,1,1020,122),f251(14,21,778,126,897,247),f251(15,21,901,126,1020,247),f251(16,21,525,253,633,370),f251(17,21,637,253,952,543),f251(18,21,1,340,395,421),f251(20,21,4,430,155,540),f251(21,21,399,374,633,608),f251(22,21,161,425,395,659),f251(23,21,2,545,157,685),f251(24,21,246,663,336,729),f251(25,21,246,733,336,799),f251(26,21,246,803,336,869),f251(27,21,246,873,336,939),f91(!0),f193(),window.famobi_analytics.trackScreen("SCREEN_HOME"),v251=1,f144("title");break;case 1:f220();break;case 2:f110();break;case 21:f74();break;case 20:f290();break;case 3:f144(_Tx(412)),v251=4,f190();break;case 4:window.famobi_eventCalled=!1,window.famobi_showButton=!1,PlayerScore=window.famobi_score.getTotalScore(v190),window.famobi_analytics.trackEvent("EVENT_LIVESCORE",{liveScore:PlayerScore}),window.famobi_score.setCurrentScore(PlayerScore),v130=4e3,gl.clearColor(.1,.1,.15,1),gl.clear(gl.COLOR_BUFFER_BIT),f204(),f228(2),f181(.7,.7,.7,1),f282(v249),f231(.5*v204,300,0),f299(.7,.7,1),f212(v289[1]),1==v90&&f171(),2==v90&&0==DataToDownload&&window.famobi_analytics.trackEvent(v190===lastLevelPlayed?"EVENT_LEVELRESTART":"EVENT_LEVELSTART",{levelName:""+v190}).then(function(){var e;for(lastLevelPlayed=v190,window.famobi_analytics.trackScreen("SCREEN_LEVEL"),v251=5,PlayerEnergy=100,PlayerCollectedBags=0,PlayerBonus=999,PlayerExploded=0,v277=0,e=0;e<50;e++)v290.step(.1);f142(.5),f259(10),f142(1),f126(1,8,0,!0),f126(2,9,0,!0)});break;case 5:(v195=.9*v195+.1*Math.abs(.06*v300.velocity[0]))<0&&(v195=0),v195>1&&(v195=1),f40(1,.25-.25*v195),f40(2,v195),f246(2),v290.step(.003*v260),f246(2),v290.step(.003*v260),v300.velocity[0]>10?v232=.99*v232+1.25:v300.velocity[0]<-10?v232=.99*v232-1.25:v232*=.99,v301=v300.position[0]+v232<v229?.5*v301-.5*(v300.position[0]+v232):.9*v301-.1*v229,(v302=.5*v302-.5*v300.position[1])>-130&&(v302=-130);var e=3.5;v204<v176&&(e=2.5),e-=Math.abs(.01*v232),v254=.9*v254+.1*e,f173(),2==v276&&f149(),f181(1,1,1,1);var t=.9;v204<1.15*v176&&(t=.7),v204<.8*v176&&(t=.6),f204(),f228(1),f181(1,1,1,1),f234(18,.5*v204,39,.7),f228(3),f181(1,.5,0,1);var v=.5*v204-83;if(PlayerEnergy<0&&(PlayerEnergy=0),PlayerEnergy>100&&(PlayerEnergy=100),f183(v,24,v+2.09*PlayerEnergy,47.5),f228(1),f181(1,1,1,1),1==f95(10,v204-40,40*v294,.8)&&(window.famobi_analytics.trackScreen("SCREEN_PAUSE"),v251=7,f259(5)),f130(),1==v100&&(f228(2),f181(1,1,1,1==v187?1:.3),v187=f26(0,77*t,v176-120*t,1.5*t),f181(1,1,1,1==Control_Right?1:.3),Control_Right=f26(1,290*t,v176-90*t,1.5*t),f181(1,1,1,1==v188?1:.3),v188=f26(2,v204-290*t,v176-90*t,1.5*t),f181(1,1,1,1==v151?1:.3),v151=f26(3,v204-77*t,v176-120*t,1.5*t),f181(1,1,1,1)),f228(2),f282(v249),v130>0){var r=.01*v130;r>1&&(r=1),f228(2),f282(v249),f231(.5*v204,160*r,0),f181(1,1,1,1),f299(1.6,1.6,1),f296(-4,0,0,1),f299(1e3,.7,1),f299(1,r,1),f234(20,0,36,.9),f299(5e-4,.7,1),f181(1.7,1.7,1.7,1),f212(v289[18]+" "+v190),v130-=v260,1!=keysDown[40]&&1!=v188&&1!=keysDown[38]&&1!=v151&&1!=keysDown[37]&&1!=v187&&1!=keysDown[39]&&1!=Control_Right||v130>100&&(v130=100)}if(f204(),f181(1,1,1,1),v300.position[0]>v229){if(window.famobi_analytics.trackScreen("SCREEN_LEVELRESULT"),v251=6,f143(),v190++,f102(1),f102(2),PlayerMaxLevel<v190){PlayerMaxLevel=v190;for(var a=0,n=0;n<6;n++)v124[n]>PlayerMaxLevel||(a=n+1);v124.indexOf(v190-1)>=0&&(PlayerCarID=a,v120=v251,v251=13)}f194(),f259(10),f259(7),v161=0,v128=0}break;case 6:v290.step(.003*v260),v290.step(.003*v260),v232*=.99,v301=.9*v301-.1*v229,v302=.9*v302-.1*(v230+64),v254=.98*v254+.02*(e=4.5),f173(),Math.abs(v301+v229)<10&&f195(),f204(),f228(1),f130();break;case 7:f289();break;case 8:f102(1),f102(2),v290.step(.003*v260),v290.step(.003*v260),f173(),v234>6?f265():v234+=.003*v260;break;case 9:window.famobi_analytics.trackScreen("SCREEN_OTHER","SCREEN_LEADERBOARD"),v251=10,v95=0,v123=0;break;case 10:f264();break;case 11:v251=12;break;case 12:f298();break;case 13:v251=14;break;case 14:f219()}if(f204(),f228(2),f181(1,1,1,1),1==v276){var o;for(f204(),f228(2),f181(1,0,0,2),f282(v284),f299(.3,.3,1),f212(_Tx(413)+v99),f231(0,70,0),f212(_Tx(414)+v303+" "+v304),f231(0,70,0),f212(_Tx(415)+v212+" "+v213),f231(0,70,0),f212(_Tx(416)+v66),f231(0,70,0),f212(_Tx(417)+v222+" "+Monetisation_IsFamobi),f231(0,70,0),o=0;o<v165;o++)f212(_Tx(429)+v96[o].Touch_id+"] "+v96[o].x+", "+v96[o].y),f231(0,70,0);f181(1,1,1,1)}v99=0}}